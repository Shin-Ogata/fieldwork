/*!
 * @cdp/runtime 0.9.20
 *   runtime core framework
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t="undefined"!=typeof globalThis?globalThis:t||self,e(t.CDP=t.CDP||{}))}(this,function(t){"use strict";function e(){return"object"==typeof globalThis?globalThis:Function("return this")()}function n(t,...n){let s=t??e();for(const t of n)s[t]=s[t]??{},s=s[t];return s}function s(t){return n(null,t)}function r(t="CDP",e="Config"){return n(s(t),e)}function i(t){return null!=t}function o(t){return null==t}function a(t){return"string"==typeof t}function c(t){return"number"==typeof t}function l(t){return"boolean"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return!t||"function"!=typeof t&&"object"!=typeof t}const d=Array.isArray;function f(t){return Boolean(t)&&"object"==typeof t}function p(t){return!!f(t)&&(!Object.getPrototypeOf(t)||w(Object,t))}function g(t){if(!p(t))return!1;for(const e in t)return!1;return!0}function m(t){return"function"==typeof t}function _(t){return!(o(t)||l(t)||d(t)||u(t)||""===t||Number.isNaN(Number(t)))}function y(t){return Symbol.iterator in Object(t)}const b={Int8Array:!0,Uint8Array:!0,Uint8ClampedArray:!0,Int16Array:!0,Uint16Array:!0,Int32Array:!0,Uint32Array:!0,Float32Array:!0,Float64Array:!0};function v(t){return!!b[E(t)]}function w(t,e){return null!=e&&"function"==typeof t&&Object.getPrototypeOf(e)===Object(t.prototype)}function E(t){if(null!=t){const e=t[Symbol.toStringTag];if(a(e))return e;if(m(t)&&t.prototype&&null!=t.name)return t.name;{const e=t.constructor;if(m(e)&&e===Object(e.prototype).constructor)return e.name}}return Object.prototype.toString.call(t).slice(8,-1)}function R(t,e){return null==t&&null==e?E(t)===E(e):null!=t&&null!=e&&Object.getPrototypeOf(t)===Object.getPrototypeOf(e)}const O=Symbol("@cdp"),x={notNullish:(t,e)=>{if(null==t)throw i(e)||(e=`${E(t)} is not a valid value.`),new TypeError(e)},typeOf:(t,e,n)=>{if(typeof e!==t)throw i(n)||(n=`Type of ${E(e)} is not ${t}.`),new TypeError(n)},array:(t,e)=>{if(!d(t))throw i(e)||(e=`${E(t)} is not an Array.`),new TypeError(e)},iterable:(t,e)=>{if(!(Symbol.iterator in Object(t)))throw i(e)||(e=`${E(t)} is not an iterable object.`),new TypeError(e)},instanceOf:(t,e,n)=>{if(!(e instanceof t))throw i(n)||(n=`${E(e)} is not an instance of ${t.name}.`),new TypeError(n)},ownInstanceOf:(t,e,n)=>{if(null==e||Object.getPrototypeOf(e)!==Object(t.prototype))throw i(n)||(n=`The object is not own instance of ${t.name}.`),new TypeError(n)},notOwnInstanceOf:(t,e,n)=>{if(null!=e&&Object.getPrototypeOf(e)===Object(t.prototype))throw i(n)||(n=`The object is own instance of ${t.name}.`),new TypeError(n)},hasProperty:(t,e,n)=>{if(null==t||!(e in t))throw i(n)||(n=`The object does not have property ${String(e)}.`),new TypeError(n)},hasOwnProperty:(t,e,n)=>{if(null==t||!Object.prototype.hasOwnProperty.call(t,e))throw i(n)||(n=`The object does not have own property ${String(e)}.`),new TypeError(n)}};function C(t,...e){x[t](...e)}function S(t,e){const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(!$(t[s],e[s]))return!1;return!0}function T(t,e){const n=t.byteLength;if(n!==e.byteLength)return!1;let s=0;if(n-s>=8){const r=n>>>3,i=new Float64Array(t,0,r),o=new Float64Array(e,0,r);for(let t=0;t<r;t++)if(!Object.is(i[t],o[t]))return!1;s=r<<3}if(s===n)return!0;const r=new DataView(t),i=new DataView(e);if(n-s>=4){if(!Object.is(r.getUint32(s),i.getUint32(s)))return!1;s+=4}if(n-s>=2){if(!Object.is(r.getUint16(s),i.getUint16(s)))return!1;s+=2}if(n>s){if(!Object.is(r.getUint8(s),i.getUint8(s)))return!1;s+=1}return s===n}function k(t,e,n){"__proto__"!==e&&"constructor"!==e&&(t[e]=n)}function $(t,e){if(t===e)return!0;if(m(t)&&m(e))return t.length===e.length&&t.name===e.name;if(!f(t)||!f(e))return!1;{const n=t.valueOf(),s=e.valueOf();if(t!==n||e!==s)return n===s}{const n=t instanceof RegExp,s=e instanceof RegExp;if(n||s)return n===s&&String(t)===String(e)}{const n=d(t),s=d(e);if(n||s)return n===s&&S(t,e)}{const n=t instanceof ArrayBuffer,s=e instanceof ArrayBuffer;if(n||s)return n===s&&T(t,e)}{const n=ArrayBuffer.isView(t),s=ArrayBuffer.isView(e);if(n||s)return n===s&&R(t,e)&&T(t.buffer,e.buffer)}{const n=y(t),s=y(e);if(n||s)return n===s&&S([...t],[...e])}if(R(t,e)){const n=new Set(Object.keys(t)),s=new Set(Object.keys(e));if(n.size!==s.size)return!1;for(const t of n)if(!s.has(t))return!1;for(const s of n)if(!$(t[s],e[s]))return!1}else{for(const n in t)if(!(n in e))return!1;const n=new Set;for(const s in e){if(!(s in t))return!1;n.add(s)}for(const s of n)if(!$(t[s],e[s]))return!1}return!0}function P(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function A(t,e,n){return t!==e||n&&void 0===t}function L(t,e,n){if("__proto__"!==n&&"constructor"!==n){const s=t[n],r=N(s,e[n]);!A(s,r,!0)||(t[n]=r)}}function N(t,e){if(void 0===e||t===e)return t;if(!f(e))return e;if(e.valueOf()!==e)return $(t,e)?t:new e.constructor(e.valueOf());if(e instanceof RegExp)return $(t,e)?t:function n(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}(e);if(e instanceof ArrayBuffer)return $(t,e)?t:P(e);if(ArrayBuffer.isView(e))return $(t,e)?t:v(e)?function s(t){const e=P(t.buffer);return new t.constructor(e,t.byteOffset,t.length)}(e):function r(t){const e=P(t.buffer);return new DataView(e,t.byteOffset,t.byteLength)}(e);if(Array.isArray(e))return function i(t,e){for(let n=0,s=e.length;n<s;n++){const s=t[n],r=N(s,e[n]);!A(s,r,!1)||(t[n]=r)}return t}(d(t)?t:[],e);if(e instanceof Set)return function o(t,e){for(const n of e)t.has(n)||t.add(N(void 0,n));return t}(t instanceof Set?t:new Set,e);if(e instanceof Map)return function a(t,e){for(const[n,s]of e){const e=t.get(n),r=N(e,s);!A(e,r,!1)||t.set(n,r)}return t}(t instanceof Map?t:new Map,e);const c=f(t)?t:{};if(R(t,e))for(const t of Object.keys(e))L(c,e,t);else for(const t in e)L(c,e,t);return c}function D(t,...e){let n=t;for(const t of e)n=N(n,t);return n}function I(t){return D(void 0,t)}const j=Object.prototype,M=Function.prototype[Symbol.hasInstance],V=Symbol("override"),U=Symbol("is-inherited"),F=Symbol("constructors"),B=Symbol("class-base"),H=Symbol("class-sources"),z=Symbol("proto-extends-only");function K(t,e,n){try{null==t[n]&&Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}catch{}}function W(t,e){e&&Object.getOwnPropertyNames(e).filter(t=>!/(prototype|name|constructor)/.test(t)).forEach(n=>{K(t,e,n)}),e&&Object.getOwnPropertySymbols(e).forEach(n=>{K(t,e,n)})}function q(t,e){const n=e??(null===e?void 0:e=>Object.prototype.isPrototypeOf.call(t.prototype,e)),s=n&&Object.getOwnPropertyDescriptor(t,V);s||Object.defineProperties(t,{[Symbol.hasInstance]:{value:n,writable:!0,enumerable:!1},[V]:{value:!!n||void 0,writable:!0}})}function G(t,e,n){switch(e){case"protoExtendsOnly":t[z]=!0;break;case"instanceOf":q(t,n)}}function J(t,...e){let n=!1;class s extends t{[F];[B];constructor(...s){super(...s);const r=new Map;if(this[F]=r,this[B]=t,n)for(const t of e)if(!t[z]){const e={apply:(e,n,s)=>{const r=new t(...s);W(this,r)}};r.set(t,new Proxy(t,e))}}super(t,...e){const n=this[F],s=n.get(t);return s&&(s.call(this,...e),n.set(t,null)),this}isMixedWith(t){return this.constructor!==t&&(this[B]===t||this[H].reduce((e,n)=>e||t===n,!1))}static[Symbol.hasInstance](t){return Object.prototype.isPrototypeOf.call(s.prototype,t)}[U](t){const e=this[F];if(e.has(t))return!0;for(const n of e.keys())if(Object.prototype.isPrototypeOf.call(t,n))return!0;return!1}get[H](){return[...this[F].keys()]}}for(const t of e){const e=Object.getOwnPropertyDescriptor(t,Symbol.hasInstance);if(!e||e.writable){const n=e?t[Symbol.hasInstance]:M;q(t,e=>n.call(t,e)||!!e?.[U]&&e[U](t))}W(s.prototype,t.prototype);let r=Object.getPrototypeOf(t.prototype);for(;j!==r;)W(s.prototype,r),r=Object.getPrototypeOf(r);n||(n=!t[z])}return s}function Y(t,e){return null!=t&&f(t)&&e in t}function X(t){const e={};for(const n of Object.keys(t))k(e,t[n],n);return e}function Q(t,e){C("typeOf","object",t),C("typeOf","object",e);const n={};for(const s of Object.keys(e))$(t[s],e[s])||k(n,s,e[s]);return n}function Z(t,...e){C("typeOf","object",t);const n=[...e];n.length||n.push(void 0);const s={...t};for(const e of Object.keys(t))for(const t of n)if($(t,s[e])){delete s[e];break}return s}function tt(t,e,n){const s=d(e)?e:[e];if(!s.length)return m(n)?n.call(t):n;const r=(t,e)=>m(e)?e.call(t):e;let i=t;for(const t of s){const e=null==i?void 0:i[t];if(void 0===e)return r(i,n);i=r(i,e)}return i}const et=new Proxy(function nt(){return et},{get:(t,e)=>{const n=t[e];return null!=n?n:et}});function st(t){return t||function e(){const t=new Proxy({},{get:(t,e)=>{const n=t[e];return null!=n?n:et}});return Object.defineProperty(t,"stub",{value:!0,writable:!1}),t}()}const rt=e(),it=st(rt.setTimeout).bind(rt),ot=st(rt.clearTimeout).bind(rt),at=st(rt.setInterval).bind(rt),ct=st(rt.clearInterval).bind(rt);function lt(t){return Promise.resolve().then(t)}function ut(...t){}function ht(t){return new Promise(e=>it(e,t))}function dt(t,e,n){let s,r,i,o,a,c=0;const u=Number(e)||0,h=Object.assign({leading:!1,trailing:!0},l(n)?{leading:n,trailing:!n}:n),{leading:d,trailing:f}=h,p=null!=h.maxWait?Math.max(Number(h.maxWait)||0,u):null,g=e=>{const n=s,o=r;return s=r=void 0,c=e,i=t.apply(o,n),i},m=t=>{if(void 0===o)return!0;const e=t-o,n=t-c;return e>=u||e<0||null!==p&&n>=p},_=t=>(a=void 0,f&&s?g(t):(s=r=void 0,i)),y=()=>{const t=Date.now();if(m(t))return _(t);a=it(y,(t=>{const e=t-o,n=t-c,s=u-e;return null!=p?Math.min(s,p-n):s})(t))};function b(...t){const e=Date.now(),n=m(e);if(s=t,r=this,o=e,n){if(null==a)return(t=>(c=t,a=it(y,u),d?g(t):i))(o);if(p)return a=it(y,u),g(o)}return a??=it(y,u),i}return b.cancel=()=>{void 0!==a&&ot(a),c=0,s=o=r=a=void 0},b.flush=()=>void 0===a?i:_(Date.now()),b.pending=()=>null!=a,b}function ft(){let t,e=[];function n(){t=null;const n=e;e=[];for(const t of n)t()}return function(s){e.push(s),t??=lt(n)}}function pt(t){const e=e=>t[e],n=`(?:${Object.keys(t).join("|")})`,s=RegExp(n),r=RegExp(n,"g");return t=>(t=null==t||"symbol"==typeof t?"":String(t),s.test(t)?t.replace(r,e):t)}const gt={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#x60;"},mt=pt(gt),_t=pt(X(gt));function yt(t){return"true"===t||"false"!==t&&("null"===t?null:t===String(Number(t))?Number(t):t&&/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/.test(t)?JSON.parse(t):t)}function bt(t){return void 0===t||a(t)?t:f(t)?JSON.stringify(t):String(t)}function vt(t,e=!1){return t??(e?String(t):null)}function wt(t){return"null"===t?null:"undefined"===t?void 0:t}let Et=0;function Rt(t="",e){const n=(++Et).toString(16);return null!=e?`${t}${n.padStart(e,"0")}`:`${t}${n}`}function Ot(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const xt=/(abort|cancel)/im;function Ct(t){return null!=t&&(a(t)?xt.test(t):!!f(t)&&xt.test(t.message))}function St(t,e=!1){const n=e?t.slice(1).toLowerCase():t.slice(1);return t.charAt(0).toUpperCase()+n}function Tt(t){return t.charAt(0).toLowerCase()+t.slice(1)}function kt(t,e=!1){return t=t.trim().replace(/[-_\s]+(.)?/g,(t,e)=>e?e.toUpperCase():""),!0===e?Tt(t):t}function $t(t){return St(kt(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}function Pt(t){return t.trim().replace(/([A-Z])/g,"-$1").replace(/[_\s]+/g,"-").toLowerCase()}function At(t,e=!1){const n=e?t:t.slice(),s=n.length;for(let t=s>0?s>>>0:0;t>1;){const e=t*Math.random()>>>0,s=n[--t];n[t]=n[e],n[e]=s}return n}function Lt(t,e,n=!1){const s=n?t:t.slice();if(s.length<2)return s;const r=Lt(s.splice(0,s.length>>>1),e,!0),i=Lt(s.splice(0),e,!0);for(;r.length&&i.length;)s.push(e(r[0],i[0])<=0?r.shift():i.shift());return s.concat(r,i)}function Nt(t){return[...new Set(t)]}function Dt(t,e){const n=Math.trunc(e),s=n<0?t[n+t.length]:t[n];if(null==s)throw new RangeError(`invalid array index. [length: ${t.length}, given: ${e}]`);return s}function It(t,...e){const n=[t,...e];return n.reduce((t,e)=>t.filter(t=>!e.includes(t)))}function jt(t,e){const n=[];if(t.length<e)return[];if(1===e)for(const[e,s]of t.entries())n[e]=[s];else for(let s=0,r=t.length;s<r-e+1;s++){const r=jt(t.slice(s+1),e-1);for(let e=0,i=r.length;e<i;e++)n.push([t[s]].concat(r[e]))}return n}async function Mt(t,e,n){return Promise.all(t.map(async(t,s,r)=>await e.call(n??this,t,s,r)))}const Vt={year:(t,e,n)=>(t.setUTCFullYear(e.getUTCFullYear()+n),t),month:(t,e,n)=>(t.setUTCMonth(e.getUTCMonth()+n),t),day:(t,e,n)=>(t.setUTCDate(e.getUTCDate()+n),t),hour:(t,e,n)=>(t.setUTCHours(e.getUTCHours()+n),t),min:(t,e,n)=>(t.setUTCMinutes(e.getUTCMinutes()+n),t),sec:(t,e,n)=>(t.setUTCSeconds(e.getUTCSeconds()+n),t),msec:(t,e,n)=>(t.setUTCMilliseconds(e.getUTCMilliseconds()+n),t)};function Ut(t,e,n="day"){const s=new Date(t.getTime()),r=Vt[n];if(r)return r(s,t,e);throw new TypeError(`invalid unit: ${n}`)}const Ft={};function Bt(t){return Ft[t]?Ft[t]++:Ft[t]=1,Ft[t]}function Ht(t){if(Ft[t]){const e=--Ft[t];return 0===e&&delete Ft[t],e}return 0}const zt=new WeakMap;function Kt(t){if(!zt.has(t))throw new TypeError("This is not a valid EventPublisher.");return zt.get(t)}function Wt(t){if(!a(t)&&!u(t))throw new TypeError(`Type of ${E(t)} is not a valid channel.`)}function qt(t){return null!=t&&C("typeOf","function",t),t}function Gt(t,e,n,...s){const r=t.get(e);if(r)for(const t of r)try{const e=n?[n,...s]:s,r=t(...e);if(!0===r)break}catch(t){void Promise.reject(t)}}class Jt{constructor(){C("instanceOf",Jt,this),zt.set(this,new Map)}publish(t,...e){const n=Kt(this);Wt(t),Gt(n,t,void 0,...e),"*"!==t&&Gt(n,"*",t,...e)}hasListener(t,e){const n=Kt(this);if(null==t)return n.size>0;if(Wt(t),null==e)return n.has(t);qt(e);const s=n.get(t);return!!s&&s.has(e)}channels(){return[...Kt(this).keys()]}on(t,e){const n=Kt(this);qt(e);const s=d(t)?t:[t];for(const t of s)Wt(t),n.has(t)?n.get(t).add(e):n.set(t,new Set([e]));return Object.freeze({get enable(){for(const t of s){const s=n.get(t);if(!s?.has(e))return this.unsubscribe(),!1}return!0},unsubscribe(){for(const t of s){const s=n.get(t);s&&(s.delete(e),s.size>0||n.delete(t))}}})}once(t,e){const n=this.on(t,e),s=this.on(t,()=>{n.unsubscribe(),s.unsubscribe()});return n}off(t,e){const n=Kt(this);if(null==t)return n.clear(),this;const s=d(t)?t:[t],r=qt(e);for(const t of s)if(Wt(t),null!=r){const e=n.get(t);e&&(e.delete(r),e.size>0||n.delete(t))}else n.delete(t);return this}}const Yt=Jt;Yt.prototype.trigger=Jt.prototype.publish;const Xt=Symbol("context");function Qt(t,e,n,s){const r=[],i=d(n)?n:[n];for(const n of i){const i=e.on(n,s);t.set.add(i),r.push(i);const o=t.map.get(e)??new Map,a=o.get(n)??new Map;a.set(s,i),o.has(n)||o.set(n,a),t.map.has(e)||t.map.set(e,o)}return Object.freeze({get enable(){for(const t of r)if(t.enable)return!0;return!1},unsubscribe(){for(const t of r)t.unsubscribe()}})}function Zt(t,e,n,s){if(null!=e){e.off(n,s);const r=t.map.get(e);if(!r)return;if(null!=n){const e=d(n)?n:[n];for(const n of e){const e=r.get(n);if(!e)return;if(s){const n=e.get(s);n&&(n.unsubscribe(),t.set.delete(n)),e.delete(s)}else for(const n of e.values())n.unsubscribe(),t.set.delete(n)}}else for(const e of r.values())for(const n of e.values())n.unsubscribe(),t.set.delete(n)}else{for(const e of t.set)e.unsubscribe();t.map=new WeakMap,t.set.clear()}}class te{[Xt];constructor(){this[Xt]={map:new WeakMap,set:new Set}}listenTo(t,e,n){return Qt(this[Xt],t,e,n)}listenToOnce(t,e,n){const s=Qt(this[Xt],t,e,n),r=t.on(e,()=>{Zt(this[Xt],t,e,n),r.unsubscribe()});return s}stopListening(t,e,n){return Zt(this[Xt],t,e,n),this}}class ee extends(J(Yt,te)){constructor(){super(),this.super(te)}}const ne=ee,se=Symbol("cancel"),re=Symbol("close"),ie=Object.freeze({enable:!1,unsubscribe(){}}),oe=new WeakMap;function ae(t){if(!oe.has(t))throw new TypeError("The object is not a valid CancelToken.");return oe.get(t)}class ce{static source(...t){let e,n;const s=new ce((t,s)=>{e=t,n=s},...t);return Object.freeze({token:s,cancel:e,close:n})}constructor(t,...e){C("instanceOf",ce,this),C("typeOf","function",t);const n=new Set(e.filter(t=>oe.has(t)));let s=0;for(const t of n)s|=ae(t).status;const r={broker:new Yt,subscriptions:new Set,reason:void 0,status:s};oe.set(this,Object.seal(r));const i=this[se],o=this[re];if(0===s)for(const t of n)r.subscriptions.add(t.register(i.bind(this))),this.register(i.bind(t));t(i.bind(this),o.bind(this))}get reason(){return ae(this).reason}get cancelable(){return 0===ae(this).status}get requested(){return!!(1&ae(this).status)}get closed(){return!!(2&ae(this).status)}get[Symbol.toStringTag](){return"CancelToken"}register(t){const e=ae(this);return this.cancelable?e.broker.on("cancel",t):ie}[se](t){const e=ae(this);if(C("notNullish",t),this.cancelable){e.reason=t,e.status|=1;for(const t of e.subscriptions)t.unsubscribe();e.broker.trigger("cancel",t),Promise.resolve().then(()=>this[re]())}}[re](){const t=ae(this);if(!this.closed){t.status|=2;for(const e of t.subscriptions)e.unsubscribe();t.subscriptions.clear(),t.broker.off()}}}const le=Promise,ue=le.prototype.then,he=Symbol("create"),de=new WeakMap;class fe extends Promise{static get[Symbol.species](){return le}static resolve(t,e){return this[he](super.resolve(t),e)}static[he](t,e,n){let s;if(C("instanceOf",le,t),e instanceof ce)if(!n||m(n[0])&&!m(n[1]))if(e.cancelable){let n;s=new le((s,r)=>{n=e.register(r),ue.call(t,s,r)});const r=()=>{n.unsubscribe(),de.delete(s)};s.then(r,r)}else if(e.requested)s=super.reject(e.reason);else{if(!e.closed)throw new Error("Unexpected Exception");s=t}else s=t;else s=t;return n&&(s=ue.apply(s,n)),e?.cancelable&&de.set(s,e),s instanceof this||Object.setPrototypeOf(s,this.prototype),s}constructor(t,e){return super(t),fe[he](this,e)}then(t,e){return fe[he](this,de.get(this),[t,e])}catch(t){return this.then(void 0,t)}finally(t){return fe[he](super.finally(t),de.get(this))}}function pe(t){return Promise=t?fe:le,Promise}function ge(t){const e=t.map(t=>t.catch(t=>t));return Promise.all(e)}function me(t){return Promise.resolve(void 0,t)}function _e(t){const e={};return t.constructor.race([t,e]).then(t=>t===e?"pending":"fulfilled",()=>"rejected")}pe(!r().noAutomaticNativeExtend);class ye extends fe{resolve;reject;constructor(t,e){const[n,s]=((t,e)=>m(t)?[t,e]:[ut,t])(t,e),r={};super((t,e)=>{Object.assign(r,{resolve:t,reject:e}),n(t,e)},s),Object.assign(this,r)}status(){return _e(this)}get[Symbol.toStringTag](){return"Deferred"}static get[Symbol.species](){return le}}class be{_broker;get(){return this._broker??(this._broker=new Yt)}}const ve=Symbol("internal"),we=Symbol("notify"),Ee=Symbol("stock-change"),Re=Symbol("notify-changes");function Oe(t){if(!t||!t[ve])throw new TypeError("The object passed is not an IObservable.")}const xe={set(t,e,n,s){if(!a(e))return Reflect.set(t,e,n,s);const r=t[e];return"disabled"!==t[ve].state&&n!==r&&t[Ee](e,r),Reflect.set(t,e,n,s)}};Object.freeze(xe);class Ce{[ve];constructor(t="active"){C("instanceOf",Ce,this);const e={state:t,changed:!1,changeMap:new Map,broker:new be};return Object.defineProperty(this,ve,{value:Object.seal(e)}),new Proxy(this,xe)}on(t,e){Oe(this);const{changeMap:n,broker:s}=this[ve],r=s.get().on(t,e);if(0<n.size){const e=d(t)?t:[t];for(const t of e)n.has(t)||n.set(t,this[t])}return r}off(t,e){Oe(this),this[ve].broker.get().off(t,e)}suspend(t=!1){return Oe(this),this[ve].state=t?"disabled":"suspended",t&&this[ve].changeMap.clear(),this}resume(){Oe(this);const t=this[ve];return"active"!==t.state&&(t.state="active",lt(()=>this[Re]())),this}getObservableState(){return Oe(this),this[ve].state}getBroker(){const{broker:t}=this[ve];return t.get()}static from(t){const e=D(new class extends Ce{}("disabled"),t);return e.resume(),e}notify(...t){if(Oe(this),0===t.length)return;const{changeMap:e}=this[ve],n=new Map;for(const s of t){const t=this[s],r=e.has(s)?e.get(s):t;n.set(s,[t,r]),Object.prototype.hasOwnProperty.call(this,s)&&(this[ve].changed=!0)}this[we](n)}[Ee](t,e){const{state:n,changeMap:s,broker:r}=this[ve];if(this[ve].changed=!0,0===s.size){s.set(t,e);for(const t of r.get().channels())s.has(t)||s.set(t,this[t]);"active"===n&&void lt(()=>this[Re]())}else s.has(t)||s.set(t,e)}[Re](){const{state:t,changeMap:e}=this[ve];if("active"!==t)return;const n=new Map;for(const[t,s]of e){const e=this[t];$(s,e)||n.set(t,[e,s])}this[we](n)}[we](t){const{changed:e,changeMap:n,broker:s}=this[ve];n.clear(),this[ve].changed=!1;const r=s.get();for(const[e,n]of t)r.trigger(e,...n,e);e&&r.trigger("@",this)}}const Se={defineProperty(t,e,n){const s=t[ve];if("disabled"===s.state||s.byMethod||!Object.prototype.hasOwnProperty.call(n,"value"))return Reflect.defineProperty(t,e,n);const r=t[e],i=n.value;if("length"===e&&i!=r){const s=r>>>0,o=i>>>0,a=()=>{const e=o<s&&t.slice(o);if(e)for(let n=s;--n>=o;)t[Ee](-1,n,void 0,e[n-o]);else for(let e=s;e<o;e++)t[Ee](1,e)},c=Reflect.defineProperty(t,e,n);return c&&a(),c}if(i!==r&&Te(e)){const s=e>>>0,o=Number(s>=t.length),a=Reflect.defineProperty(t,e,n);return a&&t[Ee](o,s,i,r),a}return Reflect.defineProperty(t,e,n)},deleteProperty(t,e){const n=t[ve];if("disabled"===n.state||n.byMethod||!Object.prototype.hasOwnProperty.call(t,e))return Reflect.deleteProperty(t,e);const s=t[e],r=Reflect.deleteProperty(t,e);return r&&Te(e)&&t[Ee](0,e>>>0,void 0,s),r}};function Te(t){const e=String(t),n=Math.trunc(e);return String(n)===e&&0<=n&&n<4294967295}Object.freeze(Se);class ke extends Array{[ve];constructor(){super(...arguments),C("instanceOf",ke,this);const t={state:"active",byMethod:!1,records:[],indexes:new Set,broker:new be};Object.defineProperty(this,ve,{value:Object.seal(t)});const e=arguments.length;if(1===e&&c(arguments[0])){const t=arguments[0]>>>0;for(let e=0;e<t;e++)this[Ee](1,e)}else if(0<e)for(let t=0;t<e;t++)this[Ee](1,t,arguments[t]);return new Proxy(this,Se)}on(t){return Oe(this),this[ve].broker.get().on("@",t)}off(t){Oe(this),this[ve].broker.get().off("@",t)}suspend(t=!1){return Oe(this),this[ve].state=t?"disabled":"suspended",t&&(this[ve].records=[]),this}resume(){Oe(this);const t=this[ve];return"active"!==t.state&&(t.state="active",lt(()=>this[Re]())),this}getObservableState(){return Oe(this),this[ve].state}sort(t){Oe(this);const e=this[ve],n=Array.from(this);e.byMethod=!0;const s=super.sort(t);if(e.byMethod=!1,"disabled"!==e.state){const t=n.length;for(let e=0;e<t;e++){const t=n[e],s=this[e];s!==t&&this[Ee](0,e,s,t)}}return s}splice(t,e,...n){Oe(this);const s=this[ve],r=this.length;s.byMethod=!0;const i=super.splice(...arguments);if(s.byMethod=!1,"disabled"!==s.state){t=Math.trunc(t);const e=t<0?Math.max(r+t,0):Math.min(t,r);for(let t=i.length;--t>=0;)this[Ee](-1,e+t,void 0,i[t]);const s=n.length;for(let t=0;t<s;t++)this[Ee](1,e+t,n[t])}return i}shift(){Oe(this);const t=this[ve],e=this.length;t.byMethod=!0;const n=super.shift();return t.byMethod=!1,"disabled"!==t.state&&this.length<e&&this[Ee](-1,0,void 0,n),n}unshift(...t){Oe(this);const e=this[ve];e.byMethod=!0;const n=super.unshift(...t);if(e.byMethod=!1,"disabled"!==e.state){const e=t.length;for(let n=0;n<e;n++)this[Ee](1,n,t[n])}return n}map(t,e){return ke.from([...this].map(t,e))}getBroker(){const{broker:t}=this[ve];return t.get()}[Ee](t,e,n,s){const{state:r,indexes:i,records:o}=this[ve],a=i.has(e)?function c(t,e,n){const s=1===e?t=>-1===t:t=>-1!==t;for(let e=t.length;--e>=0;){const r=t[e];if(r.index===n&&s(r.type))return e;r.index<n&&Boolean(r.type)&&(n-=r.type)}return-1}(o,t,e):-1,l=o.length;if(a>=0){const s=o[a].type;if(s){for(let t,n=l;--n>a;)t=o[n],t.index>=e&&(t.index-=s);const r=o.splice(a,1)[0];-1!==t&&this[Ee](Number(!t),e,n,r.oldValue)}else{const s=o.splice(a,1)[0];this[Ee](t,e,n,s.oldValue)}return}i.add(e),o[l]={type:t,index:e,newValue:n,oldValue:s},"active"===r&&0===l&&lt(()=>this[Re]())}[Re](){const{state:t,records:e}=this[ve];if("active"===t&&0!==e.length){for(const t of e)Object.freeze(t);this[we](Object.freeze(e)),this[ve].records=[]}}[we](t){const e=this[ve];e.indexes.clear(),e.broker.get().trigger("@",t)}}globalThis.CDP_DECLARE=globalThis.CDP_DECLARE||{},function(){let t;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.ABORT=1]="ABORT",t[t.PENDING=2]="PENDING",t[t.NOOP=3]="NOOP",t[t.FAIL=-1]="FAIL",t[t.FATAL=-2]="FATAL",t[t.NOT_SUPPORTED=-3]="NOT_SUPPORTED"}(t=CDP_DECLARE.RESULT_CODE||(CDP_DECLARE.RESULT_CODE={})),CDP_DECLARE.ASSIGN_RESULT_CODE=function e(n){Object.assign(t,n)};const n={0:"operation succeeded.",1:"operation aborted.",2:"operation pending.",3:"no operation.","-1":"operation failed.","-2":"unexpected error occured.","-3":"operation not supported."};function s(t,e,s,r){if(e<0||1e3<=e)throw new RangeError(`declareResultCode(), invalid local-code range. [code: ${e}]`);const i=r?1:-1,o=i*(t+e);return n[o]=s??`[CODE: ${o}]`,o}CDP_DECLARE.ERROR_MESSAGE_MAP=function r(){return n},CDP_DECLARE.DECLARE_SUCCESS_CODE=function i(t,e,n){return s(t,e,n,!0)},CDP_DECLARE.DECLARE_ERROR_CODE=function o(t,e,n){return s(t,e,n,!1)}}();var $e=CDP_DECLARE.RESULT_CODE,Pe=CDP_DECLARE.DECLARE_SUCCESS_CODE,Ae=CDP_DECLARE.DECLARE_ERROR_CODE,Le=CDP_DECLARE.ASSIGN_RESULT_CODE,Ne=CDP_DECLARE.ERROR_MESSAGE_MAP;function De(t){return t<0}function Ie(t){return!De(t)}function je(t,e){const n=e?`[${e}]`:"";return $e[t]?`${n}[${$e[t]}]`:`${n}[UNKNOWN]`}function Me(t){const e=Ne();return e[t]?e[t]:`unregistered result code. [code: ${t}]`}const{isFinite:Ve}=Number,Ue=t=>({configurable:!1,writable:!1,enumerable:!0,value:t});class Fe extends Error{constructor(t,e,n){t=o(t)?$e.SUCCESS:Ve(t)?Math.trunc(t):$e.FAIL,super(e??Me(t),n);const s=n?.cause;let r=Be(s)?s.time:void 0;Ve(r)||(r=Date.now()),Object.defineProperties(this,{code:Ue(t),time:Ue(r),cause:Ue(s)})}code;time;cause;get isSucceeded(){return Ie(this.code)}get isFailed(){return De(this.code)}get isCanceled(){return this.code===$e.ABORT}get codeName(){return je(this.code,this.name)}get help(){return Me(this.code)}get[Symbol.toStringTag](){return"Result"}}function Be(t){return t instanceof Error||"Error"===E(t)}function He(t){return t instanceof Fe||"Result"===E(t)}function ze(t){if(t instanceof Fe){let{code:e,cause:n,time:s}=t;return e=o(e)?$e.SUCCESS:Ve(e)?Math.trunc(e):$e.FAIL,Ve(s)||(s=Date.now()),Reflect.defineProperty(t,"code",Ue(e)),Reflect.defineProperty(t,"time",Ue(s)),Reflect.defineProperty(t,"cause",Ue(n)),t}{const e=Object(t),n=a(e.message)?e.message:a(t)?t:void 0,s=Ct(n)?$e.ABORT:Ve(e.code)?e.code:t,r=Be(e.cause)?e.cause:Be(t)?t:a(t)?new Error(t):t;return new Fe(s,n,{cause:r})}}function Ke(t,e,n){return new Fe(t,e,{cause:n})}Fe.prototype.name="Result";class We{_broker=new Yt;_storage={};get kind(){return"memory"}async getItem(t,e){e=e??{},await me(e.cancel);const n=vt(this._storage[t]);switch(e.dataType){case"string":return bt(n);case"number":return Number(wt(n));case"boolean":return Boolean(wt(n));case"object":return Object(wt(n));default:return wt(n)}}async setItem(t,e,n){n=n??{},await me(n.cancel);const s=vt(e,!0),r=vt(this._storage[t]);$(r,s)||(k(this._storage,t,s),!n.silent&&this._broker.trigger("@",t,s,r))}async removeItem(t,e){e=e??{},await me(e.cancel);const n=this._storage[t];void 0!==n&&(delete this._storage[t],!e.silent&&this._broker.trigger("@",t,null,n))}async clear(t){t=t??{},await me(t.cancel),g(this._storage)||(this._storage={},!t.silent&&this._broker.trigger("@",null,null,null))}async keys(t){return await me(t?.cancel),Object.keys(this._storage)}on(t){return this._broker.on("@",t)}off(t){this._broker.off("@",t)}get context(){return this._storage}}const qe=new We;const Ge={tags:["{{","}}"],escape:mt};const Je=n(null,"CDP_DECLARE","TEMPLATE_CACHE");function Ye(t){return t.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Xe(t,e){return h(t)&&Object.prototype.hasOwnProperty.call(t,e)}function Qe(t){return!/\S/.test(t)}class Ze{_source;_tail;_pos;constructor(t){this._source=this._tail=t,this._pos=0}get pos(){return this._pos}get source(){return this._source}get eos(){return""===this._tail}scan(t){const e=t.exec(this._tail);if(!e||0!==e.index)return"";const n=e[0];return this._tail=this._tail.substring(n.length),this._pos+=n.length,n}scanUntil(t){const e=this._tail.search(t);let n;switch(e){case-1:n=this._tail,this._tail="";break;case 0:n="";break;default:n=this._tail.substring(0,e),this._tail=this._tail.substring(e)}return this._pos+=n.length,n}}class tn{_view;_parent;_cache;constructor(t,e){this._view=t,this._cache={".":this._view},this._parent=e}get view(){return this._view}push(t){return new tn(t,this)}lookup(t){const e=this._cache;let n;if(Object.prototype.hasOwnProperty.call(e,t))n=e[t];else{let s,r,i,o=this,a=!1;for(;o;){if(0<t.indexOf("."))for(s=o._view,r=t.split("."),i=0;null!=s&&i<r.length;)i===r.length-1&&(a=Y(s,r[i])||Xe(s,r[i])),s=s[r[i++]];else s=o._view[t],a=Y(o._view,t);if(a){n=s;break}o=o._parent}e[t]=n}return m(n)&&(n=n.call(this._view)),n}}const en={white:/\s*/,space:/\s+/,equals:/\s*=/,curly:/\s*\}/,tag:/#|\^|\/|>|\{|&|=|!/};class nn{parse(t,e){const n=function s(t,e){return`${t}:${e.join(":")}`}(t,e??Ge.tags);let r=Je[n];return r??=Je[n]=function i(t,e){if(!t)return[];let n=!1;const s=[],r=[],i=[];let o=!1,c=!1,l="",u=0;const h=()=>{if(o&&!c)for(;i.length;)delete r[i.pop()];else i.length=0;o=!1,c=!1},f=t=>{if(a(t)&&(t=t.split(en.space,2)),!d(t)||2!==t.length)throw new Error(`Invalid tags: ${JSON.stringify(t)}`);return{openingTag:new RegExp(`${Ye(t[0])}\\s*`),closingTag:new RegExp(`\\s*${Ye(t[1])}`),closingCurly:new RegExp(`\\s*${Ye(`}${t[1]}`)}`)}},{tag:p,white:g,equals:m,curly:_}=en;let y=f(e??Ge.tags);const b=new Ze(t);let v;for(;!b.eos;){const{openingTag:t,closingTag:e,closingCurly:a}=y;let d,w=b.pos,E=b.scanUntil(t);if(E)for(let t=0,e=E.length;t<e;++t){const e=E.charAt(t);Qe(e)?(i.push(r.length),l+=e):(c=!0,n=!0,l+=" "),r.push(["text",e,w,w+1]),w+=1,"\n"===e&&(h(),l="",u=0,n=!1)}if(!b.scan(t))break;o=!0;let R=b.scan(p)||"name";if(b.scan(g),"="===R?(E=b.scanUntil(m),b.scan(m),b.scanUntil(e)):"{"===R?(E=b.scanUntil(a),b.scan(_),b.scanUntil(e),R="&"):E=b.scanUntil(e),!b.scan(e))throw new Error(`Unclosed tag at ${b.pos}`);if(d=">"===R?[R,E,w,b.pos,l,u,n]:[R,E,w,b.pos],u++,r.push(d),"#"===R||"^"===R)s.push(d);else if("/"===R){if(v=s.pop(),!v)throw new Error(`Unopened section "${E}" at ${w}`);if(v[1]!==E)throw new Error(`Unclosed section "${v[1]}" at ${w}`)}else"name"===R||"{"===R||"&"===R?c=!0:"="===R&&(y=f(E))}if(h(),v=s.pop(),v)throw new Error(`Unclosed section "${v[1]}" at ${b.pos}`);return function E(t){const e=[];let n=e;const s=[];let r;for(const i of t)switch(i[0]){case"#":case"^":n.push(i),s.push(i),n=i[4]=[];break;case"/":r=s.pop(),r[5]=i[2],n=s.length>0?s[s.length-1][4]:e;break;default:n.push(i)}return e}(function w(t){const e=[];let n;for(const s of t)s&&("text"===s[0]&&n&&"text"===n[0]?(n[1]+=s[1],n[3]=s[3]):(e.push(s),n=s));return e}(r))}(t,e),{tokens:r,cacheKey:n}}render(t,e,n,s){const{tokens:r}=this.parse(t,s);return this.renderTokens(r,e,n,t,s)}renderTokens(t,e,n,s,r){const i=e instanceof tn?e:new tn(e);let o="";for(const e of t){let t;switch(e[0]){case"#":t=this.renderSection(e,i,n,s);break;case"^":t=this.renderInverted(e,i,n,s);break;case">":t=this.renderPartial(e,i,n,r);break;case"&":t=this.unescapedValue(e,i);break;case"name":t=this.escapedValue(e,i);break;case"text":t=this.rawValue(e)}null!=t&&(o+=t)}return o}renderSection(t,e,n,s){const r=this;let i="",o=e.lookup(t[1]);const a=t=>r.render(t,e,n);if(o){if(d(o))for(const r of o)i+=this.renderTokens(t[4],e.push(r),n,s);else if("object"==typeof o||"string"==typeof o||"number"==typeof o)i+=this.renderTokens(t[4],e.push(o),n,s);else if(m(o)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");o=o.call(e.view,s.slice(t[3],t[5]),a),null!=o&&(i+=o)}else i+=this.renderTokens(t[4],e,n,s);return i}}renderInverted(t,e,n,s){const r=e.lookup(t[1]);if(!r||d(r)&&0===r.length)return this.renderTokens(t[4],e,n,s)}indentPartial(t,e,n){const s=e.replace(/[^ \t]/g,""),r=t.split("\n");for(let t=0;t<r.length;t++)r[t].length&&(t>0||!n)&&(r[t]=s+r[t]);return r.join("\n")}renderPartial(t,e,n,s){if(!n)return;const r=m(n)?n(t[1]):n[t[1]];if(null!=r){const i=t[6],o=t[5],a=t[4];let c=r;0===o&&a&&(c=this.indentPartial(r,a,i));const{tokens:l}=this.parse(c,s);return this.renderTokens(l,e,n,c)}}unescapedValue(t,e){const n=e.lookup(t[1]);if(null!=n)return n}escapedValue(t,e){const n=e.lookup(t[1]);if(null!=n)return Ge.escape(n)}rawValue(t){return t[1]}}Ge.writer=new nn;class sn{static compile(t,e){if(!a(t))throw new TypeError(`Invalid template! the first argument should be a "string" but "${function n(t){return d(t)?"array":typeof t}(t)}" was given for TemplateEngine.compile(template, options)`);const{tags:s}=e??Ge,{writer:r}=Ge,i=(e,n)=>r.render(t,e??{},n,s),{tokens:o,cacheKey:c}=r.parse(t,s);return i.tokens=o,i.cacheKey=c,i.cacheLocation=["CDP_DECLARE","TEMPLATE_CACHE"],i}static clearCache(){!function t(){const t=s("CDP_DECLARE");t.TEMPLATE_CACHE={}}()}static setGlobalSettings(t){const e={...Ge},{writer:n,tags:s,escape:r}=t;return n&&(Ge.writer=n),s&&(Ge.tags=s),r&&(Ge.escape=r),e}static createScanner(t){return new Ze(t)}static createContext(t,e){return new tn(t,e)}static createWriter(){return new nn}}const rn=st(globalThis.btoa),on=st(globalThis.atob),an=st(globalThis.Blob),cn=st(globalThis.FileReader),ln=st(globalThis.URL),un=st(globalThis.TextEncoder);class hn{static encode(t){const e=(new un).encode(t),n=Array.from(e).map(t=>String.fromCharCode(t)).join("");return rn(n)}static decode(t){const e=on(t),n=Uint8Array.from(e,t=>t.charCodeAt(0));return(new TextDecoder).decode(n)}}function dn(t,e,n){const{cancel:s,onprogress:r}=n;return s&&C("instanceOf",ce,s),r&&C("typeOf","function",r),new Promise((n,i)=>{const o=new cn,a=s?.register(()=>{o.abort()});o.onabort=o.onerror=()=>{i(o.error)},o.onprogress=r,o.onload=()=>{n(o.result)},o.onloadend=()=>{a&&a.unsubscribe()},o[t](...e)},s)}function fn(t,e){return dn("readAsArrayBuffer",[t],{...e})}function pn(t,e){return dn("readAsDataURL",[t],{...e})}function gn(t,e,n){return dn("readAsText",[t,e??void 0],{...n})}function mn(t){const e={base64:!1},n=/^data:(.+?\/.+?)?(;.+?)?,(.*)$/.exec(t);if(null==n)throw new Error(`Invalid data-URL: ${t}`);return e.mimeType=n[1],e.base64=/;base64/.test(n[2]),e.data=n[3],e}function _n(t){const e=t.split("").map(t=>t.charCodeAt(0));return new Uint8Array(e)}function yn(t){return unescape(encodeURIComponent(t))}function bn(t){return decodeURIComponent(escape(t))}function vn(t,e){return pn(t,e)}function wn(t,e="application/octet-stream"){return Rn(new Uint8Array(t),e)}function En(t,e="application/octet-stream"){return new an([t],{type:e})}function Rn(t,e="application/octet-stream"){return`data:${e};base64,${On(t)}`}function On(t){return hn.encode(xn(t))}function xn(t){return bn(function e(t){return Array.prototype.map.call(t,t=>String.fromCharCode(t)).join("")}(t))}function Cn(t,e="application/octet-stream"){return En(Sn(t),e)}function Sn(t){return _n(yn(hn.decode(t)))}function Tn(t,e="text/plain"){return new an([t],{type:e})}function kn(t){return _n(yn(t))}function $n(t){return hn.encode(t)}function Pn(t){const e=mn(t);return e.base64?Cn(e.data,e.mimeType||"application/octet-stream"):Tn(decodeURIComponent(e.data),e.mimeType||"text/plain")}function An(t){return Ln(t).buffer}function Ln(t){return Sn(Nn(t))}function Nn(t){const e=mn(t);return e.base64?e.data:hn.encode(decodeURIComponent(e.data))}async function Dn(t,e){const{cancel:n}=e??{};return await me(n),null==t?String(t):t instanceof ArrayBuffer?wn(t):t instanceof Uint8Array?Rn(t):t instanceof an?vn(t,e):bt(t)}async function In(t,e){const{dataType:n,cancel:s}=e??{};await me(s);const r=wt(yt(t));switch(n){case"string":return bt(r);case"number":return Number(r);case"boolean":return Boolean(r);case"object":return Object(r);case"buffer":return An(bt(r));case"binary":return Ln(bt(r));case"blob":return Pn(bt(r));default:return r}}const jn=new WeakMap,Mn=new Set;!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.AJAX_DECLARE=9007199254740991]="AJAX_DECLARE",t[t.ERROR_AJAX_RESPONSE=CDP_DECLARE.DECLARE_ERROR_CODE(100,21,"network error.")]="ERROR_AJAX_RESPONSE",void(t[t.ERROR_AJAX_TIMEOUT=CDP_DECLARE.DECLARE_ERROR_CODE(100,22,"request timeout.")]="ERROR_AJAX_TIMEOUT")}();const Vn=st(globalThis.FormData),Un=st(globalThis.Headers),Fn=st(globalThis.AbortController),Bn=st(globalThis.URLSearchParams),Hn=st(globalThis.XMLHttpRequest),zn=st(globalThis.fetch),Kn=t=>{const e=m(t)?t():t;return void 0!==e?String(e):""},Wn=t=>{const e=[];for(const n of Object.keys(t)){const s=Kn(t[n]);s&&e.push(`${encodeURIComponent(n)}=${encodeURIComponent(s)}`)}return e.join("&")},qn=t=>{const e={};for(const n of Object.keys(t)){const s=Kn(t[n]);s&&k(e,n,s)}return e},Gn=t=>_(t)?Number(t):"true"===t||"false"!==t&&("null"===t?null:decodeURIComponent(t)),Jn=t=>{const e={},n=new Bn(t.includes("?")?t.split("?")[1]:t);for(const[t,s]of n)e[decodeURIComponent(t)]=Gn(s);return e},Yn=(t,e)=>{if(e in t)return m(t[e])?t[e].bind(t):t[e]},Xn=["hasListener","channels","on","off","once"],Qn=(t,e)=>{let n=0;const[s,r]=t instanceof Blob?[t.stream(),t.size]:[t,null!=e?Math.trunc(e):NaN],i=new ne,o={get:(t,e)=>{if("read"===e){const e=t.read();return void(async()=>{const{done:t,value:s}=await e;s&&(n+=s.length),i.trigger("progress",Object.freeze({computable:!Number.isNaN(r),loaded:n,total:r,done:t,chunk:s}))})(),()=>e}return Yn(t,e)}};return new Proxy(s,{get:(t,e)=>"getReader"===e?()=>new Proxy(t.getReader(),o):"length"===e?r:Xn.includes(e)?(...t)=>i[e](...t):Yn(t,e)})};let Zn;const ts={get timeout(){return Zn},set timeout(t){Zn=c(t)&&0<=t?t:void 0}},es={text:"text/plain, text/html, application/xml; q=0.8, text/xml; q=0.8, */*; q=0.01",json:"application/json, text/javascript, */*; q=0.01"};function ns(t){const e=new Un(t.headers),{method:n,contentType:s,dataType:r,mode:i,body:o,username:a,password:c}=t;return"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(e.get("Content-Type")&&o instanceof Vn?e.delete("Content-Type"):e.get("Content-Type")||(null==s&&"json"===r?e.set("Content-Type","application/json; charset=UTF-8"):null!=s&&e.set("Content-Type",s))),e.get("Accept")||e.set("Accept",es[r]||"*/*"),i&&"cors"!==i&&!e.get("X-Requested-With")&&e.set("X-Requested-With","XMLHttpRequest"),null==a||e.get("Authorization")||e.set("Authorization",`Basic ${hn.encode(`${a}:${c??""}`)}`),e}async function ss(t,e){const n=new Fn,s=()=>n.abort(),r=Object.assign({method:"GET",dataType:"response",timeout:ts.timeout},e,{signal:n.signal}),{cancel:i,timeout:o}=r;if(i){if(i.requested)throw i.reason;i.register(s)}const a=ce.source(i),{token:c}=a;c.register(s),o&&setTimeout(()=>a.cancel(Ke($e.ERROR_AJAX_TIMEOUT,"request timeout")),o),r.method=r.method.toUpperCase(),r.headers=ns(r);const{method:l,data:u,dataType:h}=r;null!=u&&("GET"!==l&&"HEAD"!==l||t.includes("?")?r.body??=new Bn(qn(u)):t+=`?${Wn(u)}`);const d=await Promise.resolve(zn(t,r),c);if("response"===h)return d;if(d.ok)return"stream"===h?Qn(d.body,Number(d.headers.get("content-length"))):Promise.resolve(d[h](),c);throw Ke($e.ERROR_AJAX_RESPONSE,d.statusText,d)}ss.settings=ts;const rs=t=>t??"json",is=(t,e,n,s)=>ss(t,{...s,method:"GET",data:e,dataType:rs(n)}),os={get:is,text:(t,e)=>is(t,void 0,"text",e),json:(t,e)=>is(t,void 0,"json",e),blob:(t,e)=>is(t,void 0,"blob",e),post:(t,e,n,s)=>ss(t,{...s,method:"POST",data:e,dataType:rs(n)}),resource:(t,e,n)=>{const s=new Hn;null==n||t.includes("?")||(t+=`?${Wn(n)}`),s.open("GET",t,!1);const r=rs(e),i=ns({method:"GET",dataType:r});if(i.forEach((t,e)=>{s.setRequestHeader(e,t)}),s.send(null),!(200<=s.status&&s.status<300))throw Ke($e.ERROR_AJAX_RESPONSE,s.statusText,s);return"json"===r?JSON.parse(s.response):s.response}},as=st(globalThis.URL),cs=st(globalThis.Worker),ls=st(globalThis.Blob);class us extends cs{_context;constructor(t,e){const n=function s(t){if(!m(t)&&!a(t))throw new TypeError(`${E(t)} is not a function or string.`);return as.createObjectURL(new ls([m(t)?`(${t.toString()})(self);`:t],{type:"application/javascript"}))}(t);super(n,e),this._context=n}terminate(){super.terminate(),as.revokeObjectURL(this._context)}}const hs=st(globalThis.location),ds=st(globalThis.document),fs=st(globalThis.requestAnimationFrame),ps=st(globalThis.requestIdleCallback),gs=t=>{const e=/^(([^?#]+)\/)([\S]*)?$/.exec(t);return e?.[1]??""},ms=gs(ds.querySelector("base")?.getAttribute("href")??hs.href),_s=t=>t?.includes("://")?t:null!=t?.[0]?"/"===t[0]?ms+t.slice(1):ms+t:ms;async function ys(t=1,e=fs){for(;t-- >0;)await new Promise(e)}let bs={},vs={};async function ws(t,e){const{url:n,noCache:s}=Object.assign({noCache:!1},e),r=await async function i(t,e){if(!t)return null;if(bs[t])return bs[t];{const n=await os.text(t),s=ds.createElement("template");s.innerHTML=n;const r=s.content,i={fragment:r,html:n.replace(/\s/gm,"")};return!e&&r&&(bs[t]=i),i}}(n,s);return function o(t,e,n){const{fragment:s,html:r}=e??{},i=`${t}${r?`::${r}`:""}`;if(vs[i])return vs[i];const o=s??ds,a=o.querySelector(t),c=a instanceof HTMLTemplateElement?a:a?.innerHTML;return!n&&c&&(vs[i]=c),c}(t,r,s)}function Es(t){return"string"==typeof t?(t=>{const e=ds.createElement("template");return e.innerHTML=t,e})(t):t?.cloneNode(!0)}const Rs=st(globalThis.window),Os=st(globalThis.document),xs=st(globalThis.CustomEvent),Cs=st(globalThis.requestAnimationFrame);function Ss(t){return t?.parent instanceof Window}function Ts(t,e){if(!t)return[];e=e??Os;const n=[];try{if("string"==typeof t){const s=t.trim();if(s.startsWith("<")&&s.endsWith(">")){const t=Os.createElement("template");t.innerHTML=s,n.push(...t.content.children)}else{const t=s;if(m(e.getElementById)&&"#"===t[0]&&!/[ .<>:~]/.exec(t)){const s=e.getElementById(t.substring(1));s&&n.push(s)}else"body"===t?n.push(Os.body):n.push(...e.querySelectorAll(t))}}else t.nodeType||Ss(t)?n.push(t):0<t.length&&(t[0].nodeType||Ss(t[0]))&&n.push(...t)}catch(t){void 0}return n}function ks(t){return c(t)&&0<=t?t:void 0}const $s=["type","src","nonce","noModule"];const Ps=new Map,As=t=>{for(const[e,n]of Ps)if(n.targets.has(t))return e},Ls=(t,e,n,s)=>{As(t)&&!n.has(t)&&(s.delete(t),n.add(t),t.dispatchEvent(e));for(const r of t.childNodes)Ls(r,e,n,s)},Ns=(t,e,n,s)=>{for(const r of t)Node.ELEMENT_NODE===r.nodeType&&Ls(r,new xs(e,{bubbles:!0,cancelable:!0}),n,s)};let Ds;const Is=(t,e)=>Ds(t,e);Is.utils={isWindowContext:Ss,elementify:Ts,rootify:function js(t,e){const n=(t,e)=>{const s=t instanceof HTMLTemplateElement?t.content:t;e.push(s);const r=s.querySelectorAll("template");for(const t of r)n(t,e)},s=[];for(const r of Ts(t,e))n(r,s);return s},evaluate:function Ms(t,e,n){const r=n??Os,i=r.createElement("script");if(i.text=`CDP_DOM_EVAL_RETURN_VALUE_BRIDGE = (() => { return ${t}; })();`,e)for(const t of $s){const n=e[t]||e?.getAttribute?.(t);n&&i.setAttribute(t,n)}try{s("CDP_DOM_EVAL_RETURN_VALUE_BRIDGE"),r.head.appendChild(i).parentNode.removeChild(i);const t=globalThis.CDP_DOM_EVAL_RETURN_VALUE_BRIDGE;return t}finally{delete globalThis.CDP_DOM_EVAL_RETURN_VALUE_BRIDGE}},detectify:(t,e)=>{const n=e??(t.ownerDocument?.body&&t.ownerDocument)??Os,s=Ps.get(n)??(t=>{const e=new WeakSet,n=new WeakSet,s={targets:new Set,observer:new MutationObserver(t=>{for(const s of t)Ns(s.removedNodes,"disconnected",n,e),Ns(s.addedNodes,"connected",e,n)})};return Ps.set(t,s),s.observer.observe(t,{childList:!0,subtree:!0}),s})(n);return s.targets.add(t),t},undetectify:t=>{if(null==t)(()=>{for(const[,t]of Ps)t.targets.clear(),t.observer.disconnect();Ps.clear()})();else{const e=As(t);if(e){const n=Ps.get(e);n.targets.delete(t),n.targets.size||(n.observer.disconnect(),Ps.delete(e))}}}};const Vs=Symbol("create-iterable-iterator");class Us{constructor(t){const e=this;for(const[n,s]of t.entries())e[n]=s;this.length=t.length}get isConnected(){for(const t of this)if(Fs(t)&&t.isConnected)return!0;return!1}[Symbol.iterator](){const t={base:this,pointer:0,next(){return this.pointer<this.base.length?{done:!1,value:this.base[this.pointer++]}:{done:!0,value:void 0}}};return t}entries(){return this[Vs]((t,e)=>[t,e])}keys(){return this[Vs](t=>t)}values(){return this[Vs]((t,e)=>e)}[Vs](t){const e={base:this,pointer:0},n={next(){const n=e.pointer;return n<e.base.length?(e.pointer++,{done:!1,value:t(n,e.base[n])}):{done:!0,value:void 0}},[Symbol.iterator](){return this}};return n}}function Fs(t){return!(!t||!t.nodeType)}function Bs(t){return Fs(t)&&Node.ELEMENT_NODE===t.nodeType}function Hs(t){return Bs(t)&&null!=t.dataset}function zs(t){return!(!t||!t.querySelector)}function Ks(t){return Bs(t[0])}function Ws(t){return Hs(t[0])}function qs(t){return t[0]instanceof Document}function Gs(t){return Ss(t[0])}function Js(t){return!t}function Ys(t){return"string"==typeof t}function Xs(t){return null!=t.nodeType}function Qs(t){return t instanceof Document}function Zs(t){return Ss(t)}function tr(t){return null!=t.length}function er(t,e){return!(!t||t.nodeName.toLowerCase()!==e.toLowerCase())}function nr(t){if(t.offsetParent)return t.offsetParent;if(er(t,"svg")){const e=Is(t),n=e.css(["display","position"]);if("none"===n.display||"fixed"===n.position)return null;{let t=e[0].parentElement;for(;t;){const{display:e,position:n}=Is(t).css(["display","position"]);if("none"===e)return null;if(n&&"static"!==n)break;t=t.parentElement}return t}}return null}function sr(t){return Bs(t)&&"select"===t.nodeName.toLowerCase()&&t.multiple}function rr(t){return Bs(t)&&null!=t.value}class ir{addClass(t){if(!Ks(this))return this;const e=d(t)?t:[t];for(const t of this)Bs(t)&&t.classList.add(...e);return this}removeClass(t){if(!Ks(this))return this;const e=d(t)?t:[t];for(const t of this)Bs(t)&&t.classList.remove(...e);return this}hasClass(t){if(!Ks(this))return!1;for(const e of this)if(Bs(e)&&e.classList.contains(t))return!0;return!1}toggleClass(t,e){if(!Ks(this))return this;const n=d(t)?t:[t],s=null==e?t=>{for(const e of n)t.classList.toggle(e)}:e?t=>t.classList.add(...n):t=>t.classList.remove(...n);for(const t of this)Bs(t)&&s(t);return this}prop(t,e){if(null==e&&a(t)){const e=this[0];return e&&e[t]}for(const n of this)if(null!=e)k(n,t,e);else for(const e of Object.keys(t))e in n&&k(n,e,t[e]);return this}attr(t,e){if(Ks(this)){if(void 0===e&&a(t)){const e=this[0].getAttribute(t);return e??void 0}if(null===e)return this.removeAttr(t);for(const n of this)if(Bs(n))if(null!=e)n.setAttribute(t,String(e));else for(const e of Object.keys(t)){const s=t[e];null===s?n.removeAttribute(e):n.setAttribute(e,String(s))}return this}return void 0===e?void 0:this}removeAttr(t){if(!Ks(this))return this;const e=d(t)?t:[t];for(const t of this)if(Bs(t))for(const n of e)t.removeAttribute(n);return this}val(t){if(!Ks(this))return null==t?void 0:this;if(null==t){const t=this[0];if(sr(t)){const e=[];for(const n of t.selectedOptions)e.push(n.value);return e}return"value"in t?t.value:void 0}for(const e of this)if(d(t)&&sr(e))for(const n of e.options)n.selected=t.includes(n.value);else rr(e)&&(e.value=t);return this}data(t,e){if(!Ws(this))return null==e?void 0:this;if(void 0===e){const e=this[0].dataset;if(null==t){const t={};for(const n of Object.keys(e))k(t,n,yt(e[n]));return t}return yt(e[kt(t)])}{const n=kt(t??"");if(n)for(const t of this)Hs(t)&&k(t.dataset,n,bt(e));return this}}removeData(t){if(!Ws(this))return this;const e=d(t)?t.map(t=>kt(t)):[kt(t)];for(const t of this)if(Hs(t)){const{dataset:n}=t;for(const t of e)delete n[t]}return this}}function or(t,e,n,s){let r;s=s??ut;for(const[i,o]of e.entries())if(m(t)){if(t.call(o,i,o)&&(r=n(o),void 0!==r))return r}else if(Ys(t)){if(o.matches?.(t)&&(r=n(o),void 0!==r))return r}else if(Zs(t)){if(Ss(o)){if(r=n(o),void 0!==r)return r}else if(r=s(),void 0!==r)return r}else if(Qs(t)){if(Os===o){if(r=n(o),void 0!==r)return r}else if(r=s(),void 0!==r)return r}else if(Xs(t)){if(t===o&&(r=n(o),void 0!==r))return r}else if(tr(t)){for(const e of t)if(e===o&&(r=n(o),void 0!==r))return r}else if(r=s(),void 0!==r)return r;if(r=s(),void 0!==r)return r}function ar(t){return null!=t&&Node.DOCUMENT_NODE!==t.nodeType&&Node.DOCUMENT_FRAGMENT_NODE!==t.nodeType}function cr(t,e){if(t){if(!e)return!0;if(Is(t).is(e))return!0}return!1}function lr(t,e,n,s){if(!Ks(e))return Is();const r=new Set;for(const i of e){let e=i[t];for(;e&&(null==n||!Is(e).is(n));)s?Is(e).is(s)&&r.add(e):r.add(e),e=e[t]}return Is([...r])}G(ir,"protoExtendsOnly");class ur{get(t){return null!=t?(t=Math.trunc(t),t<0?this[t+this.length]:this[t]):this.toArray()}toArray(){return[...this]}index(t){if(Ks(this)){if(null==t){let t=0,e=this[0];for(;null!==(e=e.previousSibling);)Node.ELEMENT_NODE===e.nodeType&&(t+=1);return t}{let e;e=a(t)?Is(t)[0]:t instanceof Us?t[0]:t;const n=[...this].indexOf(e);return 0<=n?n:void 0}}}first(){return Is(this[0])}last(){return Is(this[this.length-1])}add(t,e){const n=Is(t,e),s=new Set([...this,...n]);return Is([...s])}is(t){return!(this.length<=0||Js(t))&&or(t,this,()=>!0,()=>!1)}filter(t){if(this.length<=0||Js(t))return Is();const e=[];return or(t,this,t=>{e.push(t)}),Is(e)}not(t){if(this.length<=0||Js(t))return Is();const e=new Set([...this]);return or(t,this,t=>{e.delete(t)}),Is([...e])}find(t){if(a(t)){if(Gs(this))return Is();{const e=[];for(const n of this)if(zs(n)){const s=n.querySelectorAll(t);e.push(...s)}return Is(e)}}{const e=Is(t);return e.filter((t,e)=>{for(const t of this)if(Fs(t)&&t!==e&&t.contains(e))return!0;return!1})}}has(t){if(Gs(this))return Is();const e=[];for(const n of this)if(zs(n)){const s=Is(t,n);e.push(...s)}return this.filter((t,n)=>{if(Fs(n))for(const t of new Set(e))if(n!==t&&n.contains(t))return!0;return!1})}map(t){const e=[];for(const[n,s]of this.entries())e.push(t.call(s,n,s));return Is(e)}each(t){for(const[e,n]of this.entries())if(!1===t.call(n,e,n))return this;return this}slice(t,e){return Is([...this].slice(t,e))}eq(t){return null==t?Is():Is(this.get(t))}closest(t){if(null!=t&&Ks(this)){if(a(t)){const e=new Set;for(const n of this)if(Bs(n)){const s=n.closest(t);s&&e.add(s)}return Is([...e])}return this.is(t)?Is(this):this.parents(t).eq(0)}return Is()}children(t){if(Gs(this))return Is();const e=new Set;for(const n of this)if(zs(n))for(const s of n.children)cr(s,t)&&e.add(s);return Is([...e])}parent(t){const e=new Set;for(const n of this)if(Fs(n)){const s=n.parentNode;ar(s)&&cr(s,t)&&e.add(s)}return Is([...e])}parents(t){return this.parentsUntil(void 0,t)}parentsUntil(t,e){let n=[];for(const s of this){let r=s.parentNode;for(;ar(r)&&(null==t||!Is(r).is(t));)e?Is(r).is(e)&&n.push(r):n.push(r),r=r.parentNode}return 1<this.length&&(n=[...new Set(n.reverse())].reverse()),Is(n)}next(t){if(!Ks(this))return Is();const e=new Set;for(const n of this)if(Bs(n)){const s=n.nextElementSibling;cr(s,t)&&e.add(s)}return Is([...e])}nextAll(t){return this.nextUntil(void 0,t)}nextUntil(t,e){return lr("nextElementSibling",this,t,e)}prev(t){if(!Ks(this))return Is();const e=new Set;for(const n of this)if(Bs(n)){const s=n.previousElementSibling;cr(s,t)&&e.add(s)}return Is([...e])}prevAll(t){return this.prevUntil(void 0,t)}prevUntil(t,e){return lr("previousElementSibling",this,t,e)}siblings(t){if(!Ks(this))return Is();const e=new Set;for(const n of this)if(Bs(n)){const s=n.parentNode;if(ar(s))for(const r of Is(s).children(t))r!==n&&e.add(r)}return Is([...e])}contents(){if(Gs(this))return Is();const t=new Set;for(const e of this)if(Fs(e))if(er(e,"iframe"))t.add(e.contentDocument);else if(er(e,"template"))t.add(e.content);else for(const n of e.childNodes)t.add(n);return Is([...t])}offsetParent(){const t=Os.documentElement;if(this.length<=0)return Is();if(Ks(this)){const e=new Set;for(const n of this){const s=nr(n)??t;e.add(s)}return Is([...e])}return Is(t)}}function hr(t){const e=t.trim();return"<"===e.slice(0,1)&&">"===e.slice(-1)}function dr(...t){const e=new Set;for(const n of t)if(a(n)&&!hr(n)||Fs(n))e.add(n);else{const t=Is(n);for(const n of t)(a(n)||Fs(n)&&Node.DOCUMENT_NODE!==n.nodeType)&&e.add(n)}return e}function fr(t){return a(t)?Os.createTextNode(t):t}function pr(t,e,n){const s=null!=t?e.filter(t):e;n||s.off();for(const t of s)Bs(t)&&t.remove()}G(ur,"protoExtendsOnly");class gr{html(t){if(void 0===t){const t=this[0];return Bs(t)?t.innerHTML:""}if(a(t)){for(const e of this)Bs(e)&&(e.innerHTML=t);return this}return void 0,this}text(t){if(void 0===t){const t=this[0];if(Fs(t)){const e=t.textContent;return null!=e?e.trim():""}return""}{const e=a(t)?t:String(t);for(const t of this)Fs(t)&&(t.textContent=e);return this}}append(...t){const e=dr(...t);for(const t of this)Bs(t)&&t.append(...e);return this}appendTo(t){return Is(t).append(this)}prepend(...t){const e=dr(...t);for(const t of this)Bs(t)&&t.prepend(...e);return this}prependTo(t){return Is(t).prepend(this)}before(...t){const e=dr(...t);for(const t of this)if(Fs(t)&&t.parentNode)for(const n of e)t.parentNode.insertBefore(fr(n),t);return this}insertBefore(t){return Is(t).before(this)}after(...t){const e=dr(...[...t].reverse());for(const t of this)if(Fs(t)&&t.parentNode)for(const n of e)t.parentNode.insertBefore(fr(n),t.nextSibling);return this}insertAfter(t){return Is(t).after(this)}wrapAll(t){if(qs(this)||Gs(this))return this;const e=this[0],n=Is(t,e.ownerDocument).eq(0).clone(!0);return e.parentNode&&n.insertBefore(e),n.map((t,e)=>{for(;e.firstElementChild;)e=e.firstElementChild;return e}).append(this),this}wrapInner(t){if(!Ks(this))return this;for(const e of this){const n=Is(e),s=n.contents();0<s.length?s.wrapAll(t):n.append(t)}return this}wrap(t){if(!Ks(this))return this;for(const e of this){const n=Is(e);n.wrapAll(t)}return this}unwrap(t){return this.parent(t).not("body").each((t,e)=>{Is(e).replaceWith(e.childNodes)}),this}empty(){for(const t of this)if(Bs(t))for(;t.firstChild;)t.removeChild(t.firstChild);return this}detach(t){return pr(t,this,!0),this}remove(t){return pr(t,this,!1),this}replaceWith(t){const e=(()=>{const e=Is(t);if(1===e.length&&Bs(e[0]))return e[0];{const t=Os.createDocumentFragment();for(const n of e)Bs(n)&&t.appendChild(n);return t}})();for(const t of this)Bs(t)&&t.replaceWith(e);return this}replaceAll(t){return Is(t).replaceWith(this)}}function mr(t){return(t.ownerDocument&&t.ownerDocument.defaultView)??Rs}function _r(t){const e=mr(t);return e.getComputedStyle(t)}function yr(t){return parseFloat(t)||0}G(gr,"protoExtendsOnly");const br={width:["left","right"],height:["top","bottom"]};function vr(t,e){return yr(t.getPropertyValue(`padding-${br[e][0]}`))+yr(t.getPropertyValue(`padding-${br[e][1]}`))}function wr(t,e){return yr(t.getPropertyValue(`border-${br[e][0]}-width`))+yr(t.getPropertyValue(`border-${br[e][1]}-width`))}function Er(t,e){return yr(t.getPropertyValue(`margin-${br[e][0]}`))+yr(t.getPropertyValue(`margin-${br[e][1]}`))}function Rr(t,e,n){if(null==n){if(Gs(t))return t[0].document.documentElement[`client${$t(e)}`];if(qs(t))return t[0].documentElement[`scroll${$t(e)}`];{const n=t[0];if(Hs(n)){const t=_r(n),s=yr(t.getPropertyValue(e));return"border-box"===t.getPropertyValue("box-sizing")?s-(wr(t,e)+vr(t,e)):s}return 0}}return t.css(e,a(n)?n:`${n}px`)}function Or(t,e,n){if(null==n){if(Gs(t)||qs(t))return Rr(t,e);{const n=t[0];return Hs(n)?n[`client${$t(e)}`]:0}}if(Gs(t)||qs(t))return t;{const s=a(n);for(const r of t)if(Hs(r)){const{style:t,newVal:i}=(()=>{s&&r.style.setProperty(e,n);const t=_r(r),i=s?yr(t.getPropertyValue(e)):n;return{style:t,newVal:i}})();"border-box"===t.getPropertyValue("box-sizing")?r.style.setProperty(e,`${i+wr(t,e)}px`):r.style.setProperty(e,i-vr(t,e)+"px")}return t}}function xr(...t){let[e,n]=t;return c(e)||a(e)||(n=!!e,e=void 0),{includeMargin:n,value:e}}function Cr(t,e,n,s){if(null==s){if(Gs(t))return t[0][`inner${$t(e)}`];if(qs(t))return Rr(t,e);{const s=t[0];if(Hs(s)){const t=Tr(s,e);if(n){const n=_r(s);return t+Er(n,e)}return t}return 0}}if(Gs(t)||qs(t))return t;{const r=a(s);for(const i of t)if(Hs(i)){const{style:t,newVal:o}=(()=>{r&&i.style.setProperty(e,s);const t=_r(i),o=n?Er(t,e):0,a=(r?yr(t.getPropertyValue(e)):s)-o;return{style:t,newVal:a}})();"content-box"===t.getPropertyValue("box-sizing")?i.style.setProperty(e,o-wr(t,e)-vr(t,e)+"px"):i.style.setProperty(e,`${o}px`)}return t}}function Sr(t){if(t.getClientRects().length<=0)return{top:0,left:0};const e=t.getBoundingClientRect(),n=mr(t);return{top:e.top+n.scrollY,left:e.left+n.scrollX}}function Tr(t,e){if(null!=t.offsetWidth)return t[`offset${$t(e)}`];{const n=_r(t),s=yr(n.getPropertyValue(e));return"content-box"===n.getPropertyValue("box-sizing")?s+wr(n,e)+vr(n,e):s}}class kr{css(t,e){if(!Ws(this))return a(t)?null==e?"":this:d(t)?{}:this;if(a(t)){if(void 0===e){const e=this[0];return _r(e).getPropertyValue(Pt(t))}{const n=Pt(t),s=null===e;for(const t of this)Hs(t)&&(s?t.style.removeProperty(n):t.style.setProperty(n,e));return this}}if(d(t)){const e=this[0],n=mr(e),s={};for(const r of t){const t=Pt(r);s[r]=n.getComputedStyle(e).getPropertyValue(t)}return s}{const e=function n(t){const e={};for(const n in t)k(e,Pt(n),t[n]);return e}(t);for(const t of this)if(Hs(t)){const{style:n}=t;for(const t in e)null===e[t]?n.removeProperty(t):n.setProperty(t,e[t])}return this}}width(t){return Rr(this,"width",t)}height(t){return Rr(this,"height",t)}innerWidth(t){return Or(this,"width",t)}innerHeight(t){return Or(this,"height",t)}outerWidth(...t){const{includeMargin:e,value:n}=xr(...t);return Cr(this,"width",e,n)}outerHeight(...t){const{includeMargin:e,value:n}=xr(...t);return Cr(this,"height",e,n)}position(){if(!Ws(this))return{top:0,left:0};let t,e={top:0,left:0};const n=this[0],{position:s,marginTop:r,marginLeft:i}=Is(n).css(["position","marginTop","marginLeft"]),o=yr(r),a=yr(i);if("fixed"===s)t=n.getBoundingClientRect();else{t=Sr(n);const s=n.ownerDocument;let r=nr(n)??s.documentElement,i=Is(r);for(;r&&(r===s.body||r===s.documentElement)&&"static"===i.css("position");)r=r.parentNode,i=Is(r);if(r&&r!==n&&Node.ELEMENT_NODE===r.nodeType){e=Sr(r);const{borderTopWidth:t,borderLeftWidth:n}=i.css(["borderTopWidth","borderLeftWidth"]);e.top+=yr(t),e.left+=yr(n)}}return{top:t.top-e.top-o,left:t.left-e.left-a}}offset(t){if(Ws(this)){if(null==t)return Sr(this[0]);for(const e of this){const n=Is(e),s={},{position:r,top:i,left:o}=n.css(["position","top","left"]);"static"===r&&(e.style.position="relative");const a=n.offset(),c=(()=>{const t=("absolute"===r||"fixed"===r)&&(i+o).includes("auto");return t?n.position():{top:yr(i),left:yr(o)}})();null!=t.top&&(s.top=`${t.top-a.top+c.top}px`),null!=t.left&&(s.left=`${t.left-a.left+c.left}px`),n.css(s)}return this}return null==t?{top:0,left:0}:this}}G(kr,"protoExtendsOnly");const $r={eventData:new WeakMap,eventListeners:new WeakMap,liveEventListeners:new WeakMap};function Pr(t){const e=$r.eventData.get(t.target)??[];return e.unshift(t),e}function Ar(t,e){$r.eventData.set(t,e)}function Lr(t){$r.eventData.delete(t)}function Nr(t){const e=t.split("."),n=e.shift();return e.length?(e.sort(),`${n}.${e.join(".")}`):n}function Dr(t){const e=[],n=t.split("."),s=n.shift();if(n.length){n.sort();const t=[];for(let e=n.length;e>=1;e--)t.push(...jt(n,e));const r=`.${n.join(".")}.`;e.push({type:s,namespace:r});for(const n of t)e.push({type:`${s}.${n.join(".")}`,namespace:r})}else e.push({type:s,namespace:""});return e}function Ir(t,e){const n=[],s=e.split("."),r=s.shift(),i=Nr(e);if(s.length){const e=t=>{if(t){const e=Object.keys(t),s=e.filter(t=>i===t.split("|")[0]).map(t=>t.split("|")[1]),r=e.filter(t=>{for(const e of s)if(e===t.split("|")[1])return!0;return!1}).map(t=>{const e=t.split("|");return{type:e[0],namespace:e[1]}});n.push(...r)}},{eventListeners:s,liveEventListeners:r}=$r;e(s.get(t)),e(r.get(t))}else n.push({type:r,namespace:""});return n}function jr(t,e,n,s,r,i){const o=s?$r.liveEventListeners:$r.eventListeners;if(!o.has(t)){if(!i)return{registered:void 0,handlers:[]};o.set(t,{})}const a=o.get(t),c=function l(t,e,n,s){const r={...s};return delete r.once,`${t}|${e}|${JSON.stringify(r)}|${n}`}(e,n,s,r);return a[c]||(a[c]={registered:new Set,handlers:[]}),a[c]}function Mr(t,e=!0){const n=[],s=t=>{if(t){for(const e of Object.keys(t)){const s=e.split("|"),r=s[0],i=JSON.parse(s[2]);for(const s of t[e].handlers)n.push({event:r,handler:s.proxy,options:i})}return!0}return!1},{eventListeners:r,liveEventListeners:i}=$r;return s(r.get(t))&&e&&r.delete(t),s(i.get(t))&&e&&i.delete(t),n}function Vr(t,e){const n=[],s=e.split(".").filter(t=>!!t),r=t=>{for(const e of s)if(t.includes(`.${e}.`))return!0;return!1},i=t=>{if(t){const e=Object.keys(t).filter(r);for(const s of e){const e=s.split("|"),r=e[0],i=JSON.parse(e[2]),{registered:o,handlers:a}=t[s];for(const t of a)n.push({event:r,handler:t.proxy,options:i}),o.delete(t.listener)}}},{eventListeners:o,liveEventListeners:a}=$r;return i(o.get(t)),i(a.get(t)),n}function Ur(...t){let[e,n,s,r]=t;return m(n)&&([e,s,r]=t,n=void 0),e=e?d(e)?e:[e]:[],n=n??"",r?!0===r&&(r={capture:!0}):r={},{type:e,selector:n,listener:s,options:r}}const Fr=["resize","scroll"];function Br(t,e,n){if(null==e){for(const e of this)Fr.includes(t)||(m(e[t])?e[t]():Is(e).trigger(t));return this}return this.on(t,e,n)}function Hr(t,e){const n=Mr(t,!1);for(const t of n)e.addEventListener(t.event,t.handler,t.options)}function zr(t,e,n,s){return m(e)&&t.on(n,function r(i){i.target===this&&(e.call(this,i),s||t.off(n,r))}),t}class Kr{on(...t){const{type:e,selector:n,listener:s,options:r}=Ur(...t);const i=n?function o(t){if(t.defaultPrevented)return;const e=Pr(t),r=Is(t.target);if(r.is(n))s.apply(r[0],e);else for(const t of r.parents())Is(t).is(n)&&s.apply(t,e)}:function a(t){s.apply(this,Pr(t))};for(const t of this)for(const o of e){const e=Dr(o);for(const o of e){const{type:e,namespace:a}=o,{registered:c,handlers:l}=jr(t,e,a,n,r,!0);c&&!c.has(s)&&(c.add(s),l.push({listener:s,proxy:i}),t.addEventListener(e,i,r))}}return this}off(...t){const{type:e,selector:n,listener:s,options:r}=Ur(...t);if(e.length<=0)for(const t of this){const e=Mr(t);for(const n of e)t.removeEventListener(n.event,n.handler,n.options)}else for(const t of this)for(const i of e)if(i.startsWith(".")){const e=Vr(t,i);for(const n of e)t.removeEventListener(n.event,n.handler,n.options)}else{const e=Ir(t,i);for(const i of e){const{type:e,namespace:o}=i,{registered:a,handlers:c}=jr(t,e,o,n,r,!1);if(0<c.length)for(let n=c.length-1;n>=0;n--){const i=c[n];(s&&i.listener===s||i?.listener?.origin===s||!s)&&(t.removeEventListener(e,i.proxy,r),c.splice(n,1),a.delete(i.listener))}}}return this}once(...t){const{type:e,selector:n,listener:s,options:r}=Ur(...t),i={...r,once:!0},o=this;function a(...t){s.apply(this,t),o.off(e,n,a,i),delete a.origin}return a.origin=s,this.on(e,n,a,i)}trigger(t,...e){const n=t=>a(t)?new xs(Nr(t),{detail:e,bubbles:!0,cancelable:!0}):t,s=d(t)?t:[t];for(const t of s){const s=n(t);for(const t of this)Ar(t,e),t.dispatchEvent(s),Lr(t)}return this}transitionStart(t,e=!1){return zr(this,t,"transitionstart",e)}transitionEnd(t,e=!1){return zr(this,t,"transitionend",e)}animationStart(t,e=!1){return zr(this,t,"animationstart",e)}animationEnd(t,e=!1){return zr(this,t,"animationend",e)}hover(t,e){return e=e??t,this.mouseenter(t).mouseleave(e)}click(t,e){return Br.bind(this)("click",t,e)}dblclick(t,e){return Br.bind(this)("dblclick",t,e)}blur(t,e){return Br.bind(this)("blur",t,e)}focus(t,e){return Br.bind(this)("focus",t,e)}focusin(t,e){return Br.bind(this)("focusin",t,e)}focusout(t,e){return Br.bind(this)("focusout",t,e)}keyup(t,e){return Br.bind(this)("keyup",t,e)}keydown(t,e){return Br.bind(this)("keydown",t,e)}keypress(t,e){return Br.bind(this)("keypress",t,e)}submit(t,e){return Br.bind(this)("submit",t,e)}contextmenu(t,e){return Br.bind(this)("contextmenu",t,e)}change(t,e){return Br.bind(this)("change",t,e)}mousedown(t,e){return Br.bind(this)("mousedown",t,e)}mousemove(t,e){return Br.bind(this)("mousemove",t,e)}mouseup(t,e){return Br.bind(this)("mouseup",t,e)}mouseenter(t,e){return Br.bind(this)("mouseenter",t,e)}mouseleave(t,e){return Br.bind(this)("mouseleave",t,e)}mouseout(t,e){return Br.bind(this)("mouseout",t,e)}mouseover(t,e){return Br.bind(this)("mouseover",t,e)}touchstart(t,e){return Br.bind(this)("touchstart",t,e)}touchend(t,e){return Br.bind(this)("touchend",t,e)}touchmove(t,e){return Br.bind(this)("touchmove",t,e)}touchcancel(t,e){return Br.bind(this)("touchcancel",t,e)}resize(t,e){return Br.bind(this)("resize",t,e)}scroll(t,e){return Br.bind(this)("scroll",t,e)}clone(t=!1,e=!1){const n=this;return Ks(n)?n.map((n,s)=>function r(t,e,n){const s=t.cloneNode(!0);if(e)if(n){const e=t.querySelectorAll("*"),n=s.querySelectorAll("*");for(const[t]of e.entries())Hr(e[t],n[t])}else Hr(t,s);return s}(s,t,e)):n}}function Wr(t){return Bs(t)?t:function e(t){return Fs(t)&&Node.DOCUMENT_NODE===t.nodeType}(t)?t.documentElement:Ss(t)?t.document.documentElement:null}function qr(t,e){const{top:n,left:s,duration:r,easing:i,callback:o}=e,a=t.scrollTop,l=t.scrollLeft;let u=c(n),h=c(s);if(!r){let e=!1;return u&&n!==a&&(t.scrollTop=n,e=!0),h&&s!==l&&(t.scrollLeft=s,e=!0),e&&m(o)&&o(),void 0}const d=(e,n,s,r)=>{if(!e)return{max:0,new:0,initial:0};const i=t[`scroll${$t(r)}`]-Tr(t,r),o=Math.max(Math.min(n,i),0);return{max:i,new:o,initial:s}},f=d(u,n,a,"height"),p=d(h,s,l,"width");if(u&&f.new===f.initial&&(u=!1),h&&p.new===p.initial&&(h=!1),!u&&!h)return;const g=t=>m(i)?i(t):"linear"===i?t:function e(t){return.5-Math.cos(t*Math.PI)/2}(t),_={top:0,left:0},y=Date.now(),b=()=>{const e=Date.now()-y,n=Math.max(Math.min(e/r,1),0),s=g(n);if(u&&(_.top=f.initial+s*(f.new-f.initial)),h&&(_.left=p.initial+s*(p.new-p.initial)),u&&f.new>f.initial&&_.top>=f.new||u&&f.new<f.initial&&_.top<=f.new||h&&p.new>p.initial&&_.left>=p.new||h&&p.new<p.initial&&_.left<=p.new)return u&&(t.scrollTop=f.new),h&&(t.scrollLeft=p.new),m(o)&&o(),t=null,void 0;u&&(t.scrollTop=_.top),h&&(t.scrollLeft=_.left),Cs(b)};Cs(b)}G(Kr,"protoExtendsOnly");class Gr{scrollTop(t,e,n,s){if(null==t){const t=Wr(this[0]);return t?t.scrollTop:0}return this.scrollTo({top:t,duration:e,easing:n,callback:s})}scrollLeft(t,e,n,s){if(null==t){const t=Wr(this[0]);return t?t.scrollLeft:0}return this.scrollTo({left:t,duration:e,easing:n,callback:s})}scrollTo(...t){const e=function n(...t){const e={easing:"swing"};if(1===t.length)Object.assign(e,t[0]);else{const[n,s,r,i,o]=t;Object.assign(e,{top:s,left:n,duration:r,easing:i,callback:o})}return e.top=ks(e.top),e.left=ks(e.left),e.duration=ks(e.duration),e}(...t);for(const t of this){const n=Wr(t);Hs(n)&&qr(n,e)}return this}}G(Gr,"protoExtendsOnly");const Jr=new WeakMap;class Yr{animate(t,e){const n={dom:this,animations:new Map};if(!Ks(this))return n.finished=Promise.resolve(n),n;for(const s of this)if(Bs(s)){const r=s.animate(t,e),i=Jr.get(s)??new Set;i.add(r),Jr.set(s,i),n.animations.set(s,r)}return n.finished=Promise.all([...n.animations.values()].map(t=>t.finished)).then(()=>n),n}cancel(){if(Ks(this))for(const t of this){const e=Jr.get(t);if(e){for(const t of e)t.cancel();Jr.delete(t)}}return this}finish(){if(Ks(this))for(const t of this){const e=Jr.get(t);if(e)for(const t of e)t.finish()}return this}reflow(){if(this[0]instanceof HTMLElement)for(const t of this)ut(t.offsetHeight);return this}repaint(){if(this[0]instanceof HTMLElement)for(const t of this){const e=t.style.display;t.style.display="none",t.style.display=e}return this}}G(Yr,"protoExtendsOnly");class Xr extends(J(Us,ir,ur,gr,kr,Kr,Gr,Yr)){constructor(t){super(t)}static create(t,e){return t&&!e&&Qr(t)?t:new Xr(Ts(t,e))}}function Qr(t){return t instanceof Xr}G(Xr,"instanceOf",null),function Zr(t,e){Ds=e,Is.fn=t}(Xr.prototype,Xr.create);const ti=st(globalThis.navigator),ei=st(globalThis.screen),ni=st(globalThis.devicePixelRatio),si={navigator:ti,screen:ei,devicePixelRatio:ni},{navigator:ri,screen:ii,devicePixelRatio:oi}=si,ai=(t,e)=>600<=Math.min(t,e),ci=t=>{t=t??{navigator:ri,screen:ii,devicePixelRatio:oi};const n={ios:!1,android:!1,androidChrome:!1,desktop:!1,mobile:!1,phone:!1,tablet:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!!e().cordova,electron:!1},{userAgent:s,platform:r,standalone:i}=t.navigator??ri,{width:o,height:a}=t.screen??ii,c=t.devicePixelRatio,l=/(Android);?[\s/]+([\d.]+)?/.exec(s);let u=/(iPad).*OS\s([\d_]+)/.exec(s);const h=/(iPod)(.*OS\s([\d_]+))?/.exec(s);let d=!u&&/(iPhone\sOS|iOS)\s([\d_]+)/.exec(s);const f=0<=s.indexOf("MSIE ")||0<=s.indexOf("Trident/"),p=0<=s.indexOf("Edge/"),g=0<=s.indexOf("Gecko/")&&0<=s.indexOf("Firefox/"),m="Win32"===r;let _="MacIntel"===r;const y=s.toLowerCase().startsWith("electron");if(!d&&!u&&_&&(ri.maxTouchPoints>0||"ontouchstart"in globalThis)&&void 0!==i){const t=/(Version)\/([\d.]+)/.exec(s);ai(o,a)?u=t:d=t,_=!1}return n.ie=f,n.edge=p,n.firefox=g,l&&!m&&(n.os="android",n.osVersion=l[2],n.android=!0,n.androidChrome=0<=s.toLowerCase().indexOf("chrome"),0<=s.indexOf("Mobile")?n.phone=!0:n.tablet=!0),(u??d??h)&&(n.os="ios",n.ios=!0),d&&!h&&(n.osVersion=d[2].replace(/_/g,"."),n.phone=!0,n.iphone=!0,(375===o&&812===a||812===o&&375===a||414===o&&896===a||896===o&&414===a)&&(n.iphoneX=!0)),u&&(n.osVersion=u[2].replace(/_/g,"."),n.tablet=!0,n.ipad=!0),h&&(n.osVersion=h[3]?h[3].replace(/_/g,"."):null,n.phone=!0,n.ipod=!0),n.desktop=!(t=>"orientation"in globalThis||0<=t.indexOf("Windows Phone"))(s),n.desktop&&(n.electron=y,n.macos=_,n.windows=m,n.macos&&(n.os="macos"),n.windows&&(n.os="windows")),n.mobile=!n.desktop,!n.mobile||n.phone||n.tablet||(ai(o,a)?n.tablet=!0:n.phone=!0),n.pixelRatio=c??1,n},li=ci(),ui=t=>"string"==typeof t,hi=()=>{let t,e;const n=new Promise((n,s)=>{t=n,e=s});return n.resolve=t,n.reject=e,n},di=t=>null==t?"":""+t,fi=/###/g,pi=t=>t&&t.indexOf("###")>-1?t.replace(fi,"."):t,gi=t=>!t||ui(t),mi=(t,e,n)=>{const s=ui(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(gi(t))return{};const e=pi(s[r]);!t[e]&&n&&(t[e]=new n),t=Object.prototype.hasOwnProperty.call(t,e)?t[e]:{},++r}return gi(t)?{}:{obj:t,k:pi(s[r])}},_i=(t,e,n)=>{const{obj:s,k:r}=mi(t,e,Object);if(void 0!==s||1===e.length)return s[r]=n,void 0;let i=e[e.length-1],o=e.slice(0,e.length-1),a=mi(t,o,Object);for(;void 0===a.obj&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=mi(t,o,Object),a?.obj&&void 0!==a.obj[`${a.k}.${i}`]&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},yi=(t,e)=>{const{obj:n,k:s}=mi(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},bi=(t,e,n)=>{for(const s in e)"__proto__"!==s&&"constructor"!==s&&(s in t?ui(t[s])||t[s]instanceof String||ui(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):bi(t[s],e[s],n):t[s]=e[s]);return t},vi=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ei=t=>ui(t)?t.replace(/[&<>"'\/]/g,t=>wi[t]):t;const Ri=[" ",",","?","!",";"],Oi=new class xi{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(void 0!==e)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}(20),Ci=(t,e,n=".")=>{if(!t)return;if(t[e]){if(!Object.prototype.hasOwnProperty.call(t,e))return;return t[e]}const s=e.split(n);let r=t;for(let t=0;t<s.length;){if(!r||"object"!=typeof r)return;let e,i="";for(let o=t;o<s.length;++o)if(o!==t&&(i+=n),i+=s[o],e=r[i],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<s.length-1)continue;t+=o-t+1;break}r=e}return r},Si=t=>t?.replace("_","-"),Ti={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){undefined}};class ki{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||Ti,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,s){return s&&!this.debug?null:(ui(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new ki(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new ki(this.logger,t)}}const $i=new ki;class Pi{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(t=>{this.observers[t]||(this.observers[t]=new Map);const n=this.observers[t].get(e)||0;this.observers[t].set(e,n+1)}),this}off(t,e){if(this.observers[t])return e?(this.observers[t].delete(e),void 0):(delete this.observers[t],void 0)}emit(t,...e){if(this.observers[t]){const n=Array.from(this.observers[t].entries());n.forEach(([t,n])=>{for(let s=0;s<n;s++)t(...e)})}if(this.observers["*"]){const n=Array.from(this.observers["*"].entries());n.forEach(([n,s])=>{for(let r=0;r<s;r++)n.apply(n,[t,...e])})}}}class Ai extends Pi{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n,s={}){const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,i=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,e],n&&(Array.isArray(n)?o.push(...n):ui(n)&&r?o.push(...n.split(r)):o.push(n)));const a=yi(this.data,o);return!a&&!e&&!n&&t.indexOf(".")>-1&&(t=o[0],e=o[1],n=o.slice(2).join(".")),!a&&i&&ui(n)?Ci(this.data?.[t]?.[e],n,r):a}addResource(t,e,n,s,r={silent:!1}){const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let o=[t,e];n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split("."),s=e,e=o[1]),this.addNamespaces(e),_i(this.data,o,s),r.silent||this.emit("added",t,e,n,s)}addResources(t,e,n,s={silent:!1}){for(const s in n)(ui(n[s])||Array.isArray(n[s]))&&this.addResource(t,e,s,n[s],{silent:!0});s.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,s,r,i={silent:!1,skipCopy:!1}){let o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),s=n,n=e,e=o[1]),this.addNamespaces(e);let a=yi(this.data,o)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?bi(a,n,r):a={...a,...n},_i(this.data,o,a),i.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return void 0!==this.getResource(t,e)}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t),n=e&&Object.keys(e)||[];return!!n.find(t=>e[t]&&Object.keys(e[t]).length>0)}toJSON(){return this.data}}const Li={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,r){return t.forEach(t=>{e=this.processors[t]?.process(e,n,s,r)??e}),e}},Ni={},Di=t=>!ui(t)&&"boolean"!=typeof t&&"number"!=typeof t;class Ii extends Pi{constructor(t,e={}){super(),((t,e,n)=>{t.forEach(t=>{e[t]&&(n[t]=e[t])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=$i.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const n={...e};if(null==t)return!1;const s=this.resolve(t,n);return void 0!==s?.res}extractFromKey(t,e){let n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const s=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator;let r=e.ns||this.options.defaultNS||[];const i=n&&t.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||((t,e,n)=>{e=e||"",n=n||"";const s=Ri.filter(t=>e.indexOf(t)<0&&n.indexOf(t)<0);if(0===s.length)return!0;const r=Oi.getRegExp(`(${s.map(t=>"?"===t?"\\?":t).join("|")})`);let i=!r.test(t);if(!i){const e=t.indexOf(n);e>0&&!r.test(t.substring(0,e))&&(i=!0)}return i})(t,n,s));if(i&&!o){const e=t.match(this.interpolator.nestingRegexp);if(e&&e.length>0)return{key:t,namespaces:ui(r)?[r]:r};const i=t.split(n);(n!==s||n===s&&this.options.ns.indexOf(i[0])>-1)&&(r=i.shift()),t=i.join(s)}return{key:t,namespaces:ui(r)?[r]:r}}translate(t,e,n){let s="object"==typeof e?{...e}:e;if("object"!=typeof s&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(s={...s}),s||(s={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);const r=void 0!==s.returnDetails?s.returnDetails:this.options.returnDetails,i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],s),c=a[a.length-1];let l=void 0!==s.nsSeparator?s.nsSeparator:this.options.nsSeparator;void 0===l&&(l=":");const u=s.lng||this.language,h=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===u?.toLowerCase())return h?r?{res:`${c}${l}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${l}${o}`:r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:o;const d=this.resolve(t,s);let f=d?.res;const p=d?.usedKey||o,g=d?.exactUsedKey||o,m=void 0!==s.joinArrays?s.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==s.count&&!ui(s.count),b=Ii.hasDefaultValue(s),v=y?this.pluralResolver.getSuffix(u,s.count,s):"",w=s.ordinal&&y?this.pluralResolver.getSuffix(u,s.count,{ordinal:!1}):"",E=y&&!s.ordinal&&0===s.count,R=E&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${v}`]||s[`defaultValue${w}`]||s.defaultValue;let O=f;_&&!f&&b&&(O=R);const x=Di(O),C=Object.prototype.toString.apply(O);if(!(_&&O&&x&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||ui(m)&&Array.isArray(O))if(_&&ui(m)&&Array.isArray(f))f=f.join(m),f&&(f=this.extendTranslation(f,t,s,n));else{let e=!1,r=!1;!this.isValidLookup(f)&&b&&(e=!0,f=R),this.isValidLookup(f)||(r=!0,f=o);const a=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,h=a&&r?void 0:f,p=b&&R!==f&&this.options.updateMissing;if(r||e||p){if(this.logger.log(p?"updateKey":"missingKey",u,c,o,p?R:f),i){const t=this.resolve(o,{...s,keySeparator:!1});t&&t.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let t=[];const e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&e&&e[0])for(let n=0;n<e.length;n++)t.push(e[n]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(s.lng||this.language):t.push(s.lng||this.language);const n=(t,e,n)=>{const r=b&&n!==f?n:h;this.options.missingKeyHandler?this.options.missingKeyHandler(t,c,e,r,p,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(t,c,e,r,p,s),this.emit("missingKey",t,c,e,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?t.forEach(t=>{const e=this.pluralResolver.getSuffixes(t,s);E&&s[`defaultValue${this.options.pluralSeparator}zero`]&&e.indexOf(`${this.options.pluralSeparator}zero`)<0&&e.push(`${this.options.pluralSeparator}zero`),e.forEach(e=>{n([t],o+e,s[`defaultValue${e}`]||R)})}):n(t,o,R))}f=this.extendTranslation(f,t,s,d,n),r&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}${l}${o}`),(r||e)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${l}${o}`:o,e?f:void 0,s))}else{if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const t=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,O,{...s,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(d.res=t,d.usedParams=this.getUsedParamsDetails(s),d):t}if(i){const t=Array.isArray(O),e=t?[]:{},n=t?g:p;for(const t in O)if(Object.prototype.hasOwnProperty.call(O,t)){const r=`${n}${i}${t}`;e[t]=b&&!f?this.translate(r,{...s,defaultValue:Di(R)?R[t]:void 0,joinArrays:!1,ns:a}):this.translate(r,{...s,joinArrays:!1,ns:a}),e[t]===r&&(e[t]=O[t])}f=e}}return r?(d.res=f,d.usedParams=this.getUsedParamsDetails(s),d):f}extendTranslation(t,e,n,s,r){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const i=ui(t)&&(void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(i){const e=t.match(this.interpolator.nestingRegexp);o=e&&e.length}let a=n.replace&&!ui(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),t=this.interpolator.interpolate(t,a,n.lng||this.language||s.usedLng,n),i){const e=t.match(this.interpolator.nestingRegexp),s=e&&e.length;o<s&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),!1!==n.nest&&(t=this.interpolator.nest(t,(...t)=>r?.[0]!==t[0]||n.context?this.translate(...t,e):(this.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${e[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,o=ui(i)?[i]:i;return null!=t&&o?.length&&!1!==n.applyPostProcessor&&(t=Li.handle(o,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,e={}){let n,s,r,i,o;return ui(t)&&(t=[t]),t.forEach(t=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(t,e),c=a.key;s=c;let l=a.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));const u=void 0!==e.count&&!ui(e.count),h=u&&!e.ordinal&&0===e.count,d=void 0!==e.context&&(ui(e.context)||"number"==typeof e.context)&&""!==e.context,f=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);l.forEach(t=>{this.isValidLookup(n)||(o=t,Ni[`${f[0]}-${t}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(o)||(Ni[`${f[0]}-${t}`]=!0,this.logger.warn(`key "${s}" for languages "${f.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(s=>{if(this.isValidLookup(n))return;i=s;const o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,s,t,e);else{let t;u&&(t=this.pluralResolver.getSuffix(s,e.count,e));const n=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(o.push(c+t),e.ordinal&&0===t.indexOf(r)&&o.push(c+t.replace(r,this.options.pluralSeparator)),h&&o.push(c+n)),d){const s=`${c}${this.options.contextSeparator}${e.context}`;o.push(s),u&&(o.push(s+t),e.ordinal&&0===t.indexOf(r)&&o.push(s+t.replace(r,this.options.pluralSeparator)),h&&o.push(s+n))}}let a;for(;a=o.pop();)this.isValidLookup(n)||(r=a,n=this.getResource(s,t,a,e))}))})}),{res:n,usedKey:s,exactUsedKey:r,usedLng:i,usedNS:o}}isValidLookup(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}getResource(t,e,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,e,n,s):this.resourceStore.getResource(t,e,n,s)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ui(t.replace);let s=n?t.replace:t;if(n&&void 0!==t.count&&(s.count=t.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const t of e)delete s[t]}return s}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,12)&&void 0!==t[n])return!0;return!1}}class ji{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$i.create("languageUtils")}getScriptPartFromCode(t){if(t=Si(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}getLanguagePartFromCode(t){if(t=Si(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(ui(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch(t){}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(t=>{if(e)return;const n=this.formatLanguageCode(t);this.options.supportedLngs&&!this.isSupportedCode(n)||(e=n)}),!e&&this.options.supportedLngs&&t.forEach(t=>{if(e)return;const n=this.getScriptPartFromCode(t);if(this.isSupportedCode(n))return e=n;const s=this.getLanguagePartFromCode(t);if(this.isSupportedCode(s))return e=s;e=this.options.supportedLngs.find(t=>t===s?t:t.indexOf("-")<0&&s.indexOf("-")<0?void 0:t.indexOf("-")>0&&s.indexOf("-")<0&&t.substring(0,t.indexOf("-"))===s||0===t.indexOf(s)&&s.length>1?t:void 0)}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),ui(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes((!1===e?[]:e)||this.options.fallbackLng||[],t),s=[],r=t=>{t&&(this.isSupportedCode(t)?s.push(t):this.logger.warn(`rejecting language code not found in supportedLngs: ${t}`))};return ui(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):ui(t)&&r(this.formatLanguageCode(t)),n.forEach(t=>{s.indexOf(t)<0&&r(this.formatLanguageCode(t))}),s}}const Mi={zero:0,one:1,two:2,few:3,many:4,other:5},Vi={select:t=>1===t?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ui{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=$i.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const n=Si("dev"===t?"en":t),s=e.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:s});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let i;try{i=new Intl.PluralRules(n,{type:s})}catch(n){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Vi;if(!t.match(/-|_/))return Vi;const s=this.languageUtils.getLanguagePartFromCode(t);i=this.getRule(s,e)}return this.pluralRulesCache[r]=i,i}needsPlural(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,e,n={}){return this.getSuffixes(t,n).map(t=>`${e}${t}`)}getSuffixes(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?n.resolvedOptions().pluralCategories.sort((t,e)=>Mi[t]-Mi[e]).map(t=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${t}`):[]}getSuffix(t,e,n={}){const s=this.getRule(t,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,n))}}const Fi=(t,e,n,s=".",r=!0)=>{let i=((t,e,n)=>{const s=yi(t,n);return void 0!==s?s:yi(e,n)})(t,e,n);return!i&&r&&ui(n)&&(i=Ci(t,n,s),void 0===i&&(i=Ci(e,n,s))),i},Bi=t=>t.replace(/\$/g,"$$$$");class Hi{constructor(t={}){this.logger=$i.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(t=>t),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:s,prefix:r,prefixEscaped:i,suffix:o,suffixEscaped:a,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:h,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:_}=t.interpolation;this.escape=void 0!==e?e:Ei,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==s&&s,this.prefix=r?vi(r):i||"{{",this.suffix=o?vi(o):a||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=h?vi(h):d||vi("$t("),this.nestingSuffix=f?vi(f):p||vi(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==_&&_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(t,e)=>t?.source===e?(t.lastIndex=0,t):new RegExp(e,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,n,s){let r,i,o;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=t=>{if(t.indexOf(this.formatSeparator)<0){const r=Fi(e,a,t,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...s,...e,interpolationkey:t}):r}const r=t.split(this.formatSeparator),i=r.shift().trim(),o=r.join(this.formatSeparator).trim();return this.format(Fi(e,a,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...s,...e,interpolationkey:i})};this.resetRegExp();const l=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=void 0!==s?.interpolation?.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:t=>Bi(t)},{regex:this.regexp,safeValue:t=>this.escapeValue?Bi(this.escape(t)):Bi(t)}];return h.forEach(e=>{for(o=0;r=e.regex.exec(t);){const n=r[1].trim();if(i=c(n),void 0===i)if("function"==typeof l){const e=l(t,r,s);i=ui(e)?e:""}else if(s&&Object.prototype.hasOwnProperty.call(s,n))i="";else{if(u){i=r[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${t}`),i=""}else ui(i)||this.useRawValueToEscape||(i=di(i));const a=e.safeValue(i);if(t=t.replace(r[0],a),u?(e.regex.lastIndex+=i.length,e.regex.lastIndex-=r[0].length):e.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,e,n={}){let s,r,i;const o=(t,e)=>{const n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;const s=t.split(new RegExp(`${n}[ ]*{`));let r=`{${s[1]}`;t=s[0],r=this.interpolate(r,i);const o=r.match(/'/g),a=r.match(/"/g);((o?.length??0)%2==0&&!a||a.length%2!=0)&&(r=r.replace(/'/g,'"'));try{i=JSON.parse(r),e&&(i={...e,...i})}catch(e){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,e),`${t}${n}${r}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,t};for(;s=this.nestingRegexp.exec(t);){let a=[];i={...n},i=i.replace&&!ui(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let c=!1;if(-1!==s[0].indexOf(this.formatSeparator)&&!/{.*}/.test(s[1])){const t=s[1].split(this.formatSeparator).map(t=>t.trim());s[1]=t.shift(),a=t,c=!0}if(r=e(o.call(this,s[1].trim(),i),i),r&&s[0]===t&&!ui(r))return r;ui(r)||(r=di(r)),r||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${t}`),r=""),c&&(r=a.reduce((t,e)=>this.format(t,e,n.lng,{...n,interpolationkey:s[1].trim()}),r.trim())),t=t.replace(s[0],r),this.regexp.lastIndex=0}return t}}const zi=t=>{const e={};return(n,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const o=s+JSON.stringify(i);let a=e[o];return a||(a=t(Si(s),r),e[o]=a),a(n)}},Ki=t=>(e,n,s)=>t(Si(n),s)(e);class Wi{constructor(t={}){this.logger=$i.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const n=e.cacheInBuiltFormats?zi:Ki;this.formats={number:n((t,e)=>{const n=new Intl.NumberFormat(t,{...e});return t=>n.format(t)}),currency:n((t,e)=>{const n=new Intl.NumberFormat(t,{...e,style:"currency"});return t=>n.format(t)}),datetime:n((t,e)=>{const n=new Intl.DateTimeFormat(t,{...e});return t=>n.format(t)}),relativetime:n((t,e)=>{const n=new Intl.RelativeTimeFormat(t,{...e});return t=>n.format(t,e.range||"day")}),list:n((t,e)=>{const n=new Intl.ListFormat(t,{...e});return t=>n.format(t)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=zi(e)}format(t,e,n,s={}){const r=e.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(t=>t.indexOf(")")>-1)){const t=r.findIndex(t=>t.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,t)].join(this.formatSeparator)}const i=r.reduce((t,e)=>{const{formatName:r,formatOptions:i}=(t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);if("currency"===e&&r.indexOf(":")<0)n.currency||(n.currency=r.trim());else if("relativetime"===e&&r.indexOf(":")<0)n.range||(n.range=r.trim());else{const t=r.split(";");t.forEach(t=>{if(t){const[e,...s]=t.split(":"),r=s.join(":").trim().replace(/^'+|'+$/g,""),i=e.trim();n[i]||(n[i]=r),"false"===r&&(n[i]=!1),"true"===r&&(n[i]=!0),isNaN(r)||(n[i]=parseInt(r,10))}})}}return{formatName:e,formatOptions:n}})(e);if(this.formats[r]){let e=t;try{const o=s?.formatParams?.[s.interpolationkey]||{},a=o.locale||o.lng||s.locale||s.lng||n;e=this.formats[r](t,a,{...i,...s,...o})}catch(t){this.logger.warn(t)}return e}return this.logger.warn(`there was no format function for ${r}`),t},t);return i}}class qi extends Pi{constructor(t,e,n,s={}){super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=$i.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(t,e,n,s){const r={},i={},o={},a={};return t.forEach(t=>{let s=!0;e.forEach(e=>{const o=`${t}|${e}`;!n.reload&&this.store.hasResourceBundle(t,e)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===i[o]&&(i[o]=!0):(this.state[o]=1,s=!1,void 0===i[o]&&(i[o]=!0),void 0===r[o]&&(r[o]=!0),void 0===a[e]&&(a[e]=!0)))}),s||(o[t]=!0)}),(Object.keys(r).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(r),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(t,e,n){const s=t.split("|"),r=s[0],i=s[1];e&&this.emit("failedLoading",r,i,e),!e&&n&&this.store.addResourceBundle(r,i,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const o={};this.queue.forEach(n=>{((t,e,n)=>{const{obj:s,k:r}=mi(t,e,Object);s[r]=s[r]||[],s[r].push(n)})(n.loaded,[r],i),((t,e)=>{void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)})(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(t=>{o[t]||(o[t]={});const e=n.loaded[t];e.length&&e.forEach(e=>{void 0===o[t][e]&&(o[t][e]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(t=>!t.done)}read(t,e,n,s=0,r=this.retryTimeout,i){if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return this.waitingReads.push({lng:t,ns:e,fcName:n,tried:s,wait:r,callback:i}),void 0;this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const t=this.waitingReads.shift();this.read(t.lng,t.ns,t.fcName,t.tried,t.wait,t.callback)}if(o&&a&&s<this.maxRetries)return setTimeout(()=>{this.read.call(this,t,e,n,s+1,2*r,i)},r),void 0;i(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(t,e,o);try{const n=a(t,e);n&&"function"==typeof n.then?n.then(t=>o(null,t)).catch(o):o(null,n)}catch(t){o(t)}}prepareLoading(t,e,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ui(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ui(e)&&(e=[e]);const r=this.queueLoad(t,e,n,s);if(!r.toLoad.length)return r.pending.length||s(),null;r.toLoad.forEach(t=>{this.loadOne(t)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t,e=""){const n=t.split("|"),s=n[0],r=n[1];this.read(s,r,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${e}loading namespace ${r} for language ${s} failed`,n),!n&&i&&this.logger.log(`${e}loaded namespace ${r} for language ${s}`,i),this.loaded(t,n,i)})}saveMissing(t,e,n,s,r,i={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(e))return this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"),void 0;if(null!=n&&""!==n){if(this.backend?.create){const a={...i,isUpdate:r},c=this.backend.create.bind(this.backend);if(c.length<6)try{let r;r=5===c.length?c(t,e,n,s,a):c(t,e,n,s),r&&"function"==typeof r.then?r.then(t=>o(null,t)).catch(o):o(null,r)}catch(t){o(t)}else c(t,e,n,s,o,a)}t&&t[0]&&this.store.addResource(t[0],e,n,s)}}}const Gi=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if("object"==typeof t[1]&&(e=t[1]),ui(t[1])&&(e.defaultValue=t[1]),ui(t[2])&&(e.tDescription=t[2]),"object"==typeof t[2]||"object"==typeof t[3]){const n=t[3]||t[2];Object.keys(n).forEach(t=>{e[t]=n[t]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ji=t=>(ui(t.ns)&&(t.ns=[t.ns]),ui(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ui(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),"boolean"==typeof t.initImmediate&&(t.initAsync=t.initImmediate),t),Yi=()=>{};class Xi extends Pi{constructor(t={},e){if(super(),this.options=Ji(t),this.services={},this.logger=$i,this.modules={external:[]},(t=>{const e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(e=>{"function"==typeof t[e]&&(t[e]=t[e].bind(t))})})(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,"function"==typeof t&&(e=t,t={}),null==t.defaultNS&&t.ns&&(ui(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Gi();this.options={...n,...this.options,...Ji(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=t=>t?"function"==typeof t?new t:t:null;if(!this.options.isClone){let t;this.modules.logger?$i.init(s(this.modules.logger),this.options):$i.init(null,this.options),t=this.modules.formatter?this.modules.formatter:Wi;const e=new ji(this.options);this.store=new Ai(this.options.resources,this.options);const r=this.services;r.logger=$i,r.resourceStore=this.store,r.languageUtils=e,r.pluralResolver=new Ui(e,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(r.formatter=s(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Hi(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new qi(s(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(t,...e)=>{this.emit(t,...e)}),this.modules.languageDetector&&(r.languageDetector=s(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=s(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new Ii(this.services,this.options),this.translator.on("*",(t,...e)=>{this.emit(t,...e)}),this.modules.external.forEach(t=>{t.init&&t.init(this)})}if(this.format=this.options.interpolation.format,e||(e=Yi),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.length>0&&"dev"!==t[0]&&(this.options.lng=t[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=(...e)=>this.store[t](...e)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=(...e)=>(this.store[t](...e),this)});const r=hi(),i=()=>{const t=(t,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(n),e(t,n)};if(this.languages&&!this.isInitialized)return t(null,this.t.bind(this));this.changeLanguage(this.options.lng,t)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),r}loadResources(t,e=Yi){let n=e;const s=ui(t)?t:this.language;if("function"==typeof t&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===s?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const t=[],e=e=>{if(!e)return;if("cimode"===e)return;const n=this.services.languageUtils.toResolveHierarchy(e);n.forEach(e=>{"cimode"!==e&&t.indexOf(e)<0&&t.push(e)})};if(s)e(s);else{const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.forEach(t=>e(t))}this.options.preload?.forEach?.(t=>e(t)),this.services.backendConnector.load(t,this.options.ns,t=>{t||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(t)})}else n(null)}reloadResources(t,e,n){const s=hi();return"function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=Yi),this.services.backendConnector.reload(t,e,t=>{s.resolve(),n(t)}),s}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&Li.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}setResolvedLanguage(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1)){for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const n=hi();this.emit("languageChanging",t);const s=t=>{this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.resolvedLanguage=void 0,this.setResolvedLanguage(t)},r=(r,i)=>{i?this.isLanguageChangingTo===t&&(s(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((...t)=>this.t(...t)),e&&e(r,(...t)=>this.t(...t))},i=e=>{t||e||!this.services.languageDetector||(e=[]);const n=ui(e)?e:e&&e[0],i=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(ui(e)?[e]:e);i&&(this.language||s(i),this.translator.language||this.translator.changeLanguage(i),this.services.languageDetector?.cacheUserLanguage?.(i)),this.loadResources(i,t=>{r(t,i)})};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),n}getFixedT(t,e,n){const s=(t,e,...r)=>{let i;i="object"!=typeof e?this.options.overloadTranslationOptionHandler([t,e].concat(r)):{...e},i.lng=i.lng||s.lng,i.lngs=i.lngs||s.lngs,i.ns=i.ns||s.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||s.keyPrefix);const o=this.options.keySeparator||".";let a;return a=i.keyPrefix&&Array.isArray(t)?t.map(t=>`${i.keyPrefix}${o}${t}`):i.keyPrefix?`${i.keyPrefix}${o}${t}`:t,this.t(a,i)};return ui(t)?s.lng=t:s.lngs=t,s.ns=e,s.keyPrefix=n,s}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(t,e)=>{const n=this.services.backendConnector.state[`${t}|${e}`];return-1===n||0===n||2===n};if(e.precheck){const t=e.precheck(this,i);if(void 0!==t)return t}return!!this.hasResourceBundle(n,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,t)||s&&!i(r,t)))}loadNamespaces(t,e){const n=hi();return this.options.ns?(ui(t)&&(t=[t]),t.forEach(t=>{this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=hi();ui(t)&&(t=[t]);const s=this.options.preload||[],r=t.filter(t=>s.indexOf(t)<0&&this.services.languageUtils.isSupportedCode(t));return r.length?(this.options.preload=s.concat(r),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=this.services?.languageUtils||new ji(Gi());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(e.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){return new Xi(t,e)}cloneInstance(t={},e=Yi){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const s={...this.options,...t,isClone:!0},r=new Xi(s);void 0===t.debug&&void 0===t.prefix||(r.logger=r.logger.clone(t));if(["store","services","language"].forEach(t=>{r[t]=this[t]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const t=Object.keys(this.store.data).reduce((t,e)=>(t[e]={...this.store.data[e]},t[e]=Object.keys(t[e]).reduce((n,s)=>(n[s]={...t[e][s]},n),t[e]),t),{});r.store=new Ai(t,s),r.services.resourceStore=r.store}return r.translator=new Ii(r.services,s),r.translator.on("*",(t,...e)=>{r.emit(t,...e)}),r.init(s,e),r.translator.options=s,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qi=Xi.createInstance();Qi.createInstance=Xi.createInstance,Qi.createInstance,Qi.dir,Qi.init,Qi.loadResources,Qi.reloadResources,Qi.use,Qi.changeLanguage,Qi.getFixedT,Qi.t,Qi.exists,Qi.setDefaultNamespace,Qi.hasLoadedNamespace,Qi.loadNamespaces,Qi.loadLanguages;const Zi=Qi;!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.I18N_DECLARE=9007199254740991]="I18N_DECLARE",void(t[t.ERROR_I18N_CORE_LAYER=CDP_DECLARE.DECLARE_ERROR_CODE(100,41,"i18next error")]="ERROR_I18N_CORE_LAYER")}();const to=st(globalThis.navigator);class eo{type="backend";static type="backend";_services;_options={};_fallbackMap={};init(t,e,n){this._services=t,this._options=Object.assign({loadPath:"res/locales/{{ns}}.{{lng}}.json"},this._options,e),this._fallbackMap=Object.assign(this._fallbackMap,n.fallbackResources)}read(t,e,n){const s=this._fallbackMap[t]||t,r=m(this._options.loadPath)?this._options.loadPath([s],[e]):this._options.loadPath,i=this.resolveUrl(r,{lng:s,ns:e});this.loadUrl(i,n)}resolveUrl(t,e){return _s(this._services.interpolator.interpolate(t,e,void 0,void 0))}loadUrl(t,e){void(async()=>{try{const n=await os.json(t,this._options);e(null,n)}catch(n){const s=ze(n),r=`failed loading: ${t}, ${s.message}`;if($e.ERROR_AJAX_RESPONSE===s.code&&s.cause){const{status:t}=s.cause;if(500<=t&&t<600)return e(r,!0);if(400<=t&&t<500)return e(r,!1)}e(r,!1)}})()}}function no(t,e){const{selectorAttr:n,targetAttr:s,optionsAttr:r,useOptionsAttr:i,parseDefaultValueFromContent:o,customTagName:a}=t,c=(t,e)=>o?{...t,defaultValue:e}:t,l=(t,n,s,r)=>{const i=e.t(s,c(r,n.html()));if(!1===a)n[t](i);else{const e=`<${a}>${i}</${a}>`,s=n.children(a);s.length?s.replaceWith(e):n[t](e)}},u=(t,n,s)=>{let r="text";if(n.startsWith("[")){const t=n.split("]");n=t[1].trim(),r=t[0].substring(1,t[0].length).trim()}if("html"===r)t.html(e.t(n,c(s,t.html())));else if("text"===r)t.text(e.t(n,c(s,t.text())));else if("prepend"===r)l("prepend",t,n,s);else if("append"===r)l("append",t,n,s);else if(r.startsWith("data-")){const i=r.substring(5),o=e.t(n,c(s,t.data(i)));t.data(i,o),t.attr(r,o)}else t.attr(r,e.t(n,c(s,t.attr(r))))},h=(t,e)=>{const o=t.attr(n);if(!o)return;let a=t;const c=t.data(s);c&&(a=t.find(c)),e||!0!==i||(e=t.data(r)),e=e||{};for(const t of o.split(";")){const n=t.trim();""!==n&&u(a,n,e)}if(!0===i){const n={...e};delete n.lng,t.data(r,n)}};Is.fn.localize=function d(t){return this.each((e,s)=>{for(const e of Is.utils.rootify(s)){const s=Is(e);h(s,t);const r=s.find(`[${n}]`);r.each((e,n)=>{h(Is(n),t)})}})}}const so=Zi.t.bind(Zi),ro=t=>{const e=Object.assign({noThrow:!0},t),{namespace:n,resourcePath:s,dom:r,noThrow:i}=e;return e.lng||(e.lng=to.language),n&&(!e.ns&&(e.ns=n),!e.defaultNS&&(e.defaultNS=n)),s&&(e.backend=Object.assign({loadPath:s},e.backend)),e.backend&&Zi.use(eo),Zi.use(function o(t){return{type:"3rdParty",init:no.bind(null,Object.assign({selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0,customTagName:"cdp-i18n"},t))}}(r)),new Promise((t,n)=>{void Zi.init(e,(e,s)=>{if(e){const t=Ke($e.ERROR_I18N_CORE_LAYER,"i18n#init() failed.",e);if(!i)return n(t);void 0}t(s)})})},io=()=>Zi.language||to.language,oo=(t,e)=>{const n=Object.assign({noThrow:!0},e);return new Promise((e,s)=>{void Zi.changeLanguage(t,(t,r)=>{if(t){const e=Ke($e.ERROR_I18N_CORE_LAYER,"i18n#changeLanguate() failed.",t);if(!n.noThrow)return s(e);void 0}e(r)})})},ao=(t,e)=>Is(t).localize(e);class co{_broker=new Yt;_storage;constructor(t){C("instanceOf",Storage,t),this._storage=t}get kind(){const t=localStorage===this._storage?"local-storage":"session-storage";return`web:${t}`}async getItem(t,e){return vt(await In(this._storage[t],e))}async setItem(t,e,n){n=n??{};const s=vt(e,!0),r=vt(await In(this._storage[t],n));$(r,s)||(this._storage.setItem(t,await Dn(s,n)),!n.silent&&this._broker.trigger("@",t,s,r))}async removeItem(t,e){e=e??{},await me(e.cancel);const n=this._storage[t];void 0!==n&&(this._storage.removeItem(t),!e.silent&&this._broker.trigger("@",t,null,await In(n,e)))}async clear(t){t=t??{},await me(t.cancel),0<this._storage.length&&(this._storage.clear(),!t.silent&&this._broker.trigger("@",null,null,null))}async keys(t){return await me(t?.cancel),Object.keys(this._storage)}on(t){return this._broker.on("@",t)}off(t){this._broker.off("@",t)}}const lo=new co(localStorage);!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.MVC_SYNC_DECLARE=9007199254740991]="MVC_SYNC_DECLARE",t[t.ERROR_MVC_INVALID_SYNC_PARAMS=CDP_DECLARE.DECLARE_ERROR_CODE(100,61,"invalid sync params.")]="ERROR_MVC_INVALID_SYNC_PARAMS",t[t.ERROR_MVC_INVALID_SYNC_STORAGE_ENTRY=CDP_DECLARE.DECLARE_ERROR_CODE(100,62,"invalid sync storage entires.")]="ERROR_MVC_INVALID_SYNC_STORAGE_ENTRY",void(t[t.ERROR_MVC_INVALID_SYNC_STORAGE_DATA_NOT_FOUND=CDP_DECLARE.DECLARE_ERROR_CODE(100,63,"data not found.")]="ERROR_MVC_INVALID_SYNC_STORAGE_DATA_NOT_FOUND")}();const uo=new class ho{get kind(){return"null"}async sync(t,e,n){const{cancel:s}=n??{};await me(s);const r=Promise.resolve("read"===t?{}:void 0);return e.trigger("@request",e,r),r}};function fo(t){return tt(t,"url")}const po={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};const go=new class mo{get kind(){return"rest"}sync(t,e,n){const s=Object.assign({dataType:"json"},n),r=s.url??fo(e);if(!r)throw Ke($e.ERROR_MVC_INVALID_SYNC_PARAMS,'A "url" property or function must be specified.');s.method=po[t],null!=s.data||"create"!==t&&"update"!==t&&"patch"!==t||(s.data=e.toJSON());const i=ss(r,s);return e.trigger("@request",e,i),i}};function _o(t,e){const n=function s(t){return!!t.constructor.idAttribute}(t),r=fo(t),i=t.constructor.idAttribute,o=(()=>{const e={};if(n){const n=!!m(t.has)&&t.has(i);e[i]=n?t.id:function s(t){return`${t}:${Date.now().toString(36)}`}(r)}return e})();return{model:n,url:r,key:`${r}${n?`${e}${o[i]}`:""}`,data:o}}class yo{_storage;_separator;constructor(t,e){this._storage=t,this._separator=e?.separator??"::"}getStorage(){return this._storage}setStorage(t){return this._storage=t,this}setIdSeparator(t){const e=this._separator;return this._separator=t,e}get kind(){return"storage"}async sync(t,e,n){const{model:s,key:r,url:i,data:o}=_o(e,this._separator);if(!i)throw Ke($e.ERROR_MVC_INVALID_SYNC_PARAMS,'A "url" property or function must be specified.');let a;switch(t){case"create":{const t=D({data:o},n);a=await this.update(r,e,i,o[Object.keys(o)[0]],t);break}case"update":case"patch":a=await this.update(r,e,i,e.id,n);break;case"delete":a=await this.destroy(r,e,i,n);break;case"read":if(a=await this.find(s,r,i,n),null==a)throw Ke($e.ERROR_MVC_INVALID_SYNC_STORAGE_DATA_NOT_FOUND,`method: ${t}`);break;default:throw Ke($e.ERROR_MVC_INVALID_SYNC_PARAMS,`unknown method: ${t}`)}return e.trigger("@request",e,Promise.resolve(a)),a}async queryEntries(t,e){const n=await this._storage.getItem(t,e);if(null==n)return{ids:!0,items:[]};if(d(n))return{ids:!n.length||a(n[0]),items:n};throw Ke($e.ERROR_MVC_INVALID_SYNC_STORAGE_ENTRY,"entry is not Array type.")}saveEntries(t,e,n){return this._storage.setItem(t,e,n)}async find(t,e,n,s){if(t)return this._storage.getItem(e,s);try{const{ids:t,items:e}=await this.queryEntries(n,s);if(t){const t=[];for(const r of e){const e=await this._storage.getItem(`${n}${this._separator}${r}`,s);e&&t.push(e)}return t}return e}catch(t){const n=ze(t);if($e.ERROR_MVC_INVALID_SYNC_STORAGE_ENTRY===n.code)return this._storage.getItem(e,s);throw t}}async update(t,e,n,s,r){const{data:i}=r??{},o=Object.assign(e.toJSON(),i);if(await this._storage.setItem(t,o,r),t!==n){const{ids:t,items:e}=await this.queryEntries(n,r);t&&s&&!e.includes(s)&&(e.push(s),await this.saveEntries(n,e,r))}return this.find(!0,t,n,r)}async destroy(t,e,n,s){const r=await this._storage.getItem(t,s);if(await this._storage.removeItem(t,s),t!==n){const{ids:t,items:r}=await this.queryEntries(n,s);if(t&&e.id){const t=r.filter(t=>t!==e.id);await this.saveEntries(n,t,s)}}return r}}const bo=(t,e)=>new yo(t,e),vo=bo(lo);let wo=uo;function Eo(t){if(null==t)return wo;{const e=wo;return wo=t,e}}!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.MVC_MODEL_DECLARE=9007199254740991]="MVC_MODEL_DECLARE",void(t[t.ERROR_MVC_INVALID_DATA=CDP_DECLARE.DECLARE_ERROR_CODE(100,66,"invalid data.")]="ERROR_MVC_INVALID_DATA")}();const Ro=Symbol("define"),Oo=Symbol("update"),xo=Symbol("validate"),Co=Symbol("onchange"),So=Symbol("broker"),To=Symbol("properties"),ko=Object.freeze(Ke($e.SUCCESS,"valid attribute."));class $o extends te{static idAttribute="id";[To];constructor(t,e){super();const n=Object.assign({},e),s=n.parse?this.parse(t,n):t,r={attrs:Ce.from(s),baseAttrs:{...s},prevAttrs:{...s},cid:Rt("model:",8),options:n,changeFired:!1};Object.defineProperty(this,To,{value:r});for(const t of Object.keys(s))this[Ro](this,t);this[Co]=()=>{this.trigger("@change",this);const{_prevAttrs:t,_attrs:e}=this,n=Object.keys(Q(t,e));for(const s of n)this.trigger(`@change:${s}`,this,e[s],t[s],s);this[To].changeFired=!0},this[xo]({},n)}[Oo](t,e){if(!$(this._attrs[t],e)){const{attrs:n,changeFired:s}=this[To];s&&(this[To].changeFired=!1,this[To].prevAttrs={...n}),delete this[To].changedAttrs,k(this._prevAttrs,t,n[t]),k(n,t,e)}}[Ro](t,e){const n=t.constructor.prototype;e in n||Object.defineProperty(n,e,{get(){return this._attrs[e]},set(t){this[Oo](e,t)},enumerable:!0,configurable:!0})}get id(){const t=Ao(this,"id"),{cid:e,attrs:n}=this[To];return t in n&&n[t]||e}get _attrs(){return this[To].attrs}get _baseAttrs(){return this[To].baseAttrs}get _prevAttrs(){return this[To].prevAttrs}get _changedAttrs(){return this[To].changedAttrs??=Q(this._baseAttrs,this._attrs),this[To].changedAttrs}get _cid(){return this[To].cid}get _options(){return this[To].options}get $(){return this}get[So](){return this._attrs.getBroker()}hasListener(t,e){return this[So].hasListener(t,e)}channels(){return this[So].channels().filter(t=>"@"!==t)}trigger(t,...e){this[So].trigger(t,...e)}off(t,e){this._attrs.off(t,e)}on(t,e){return this._attrs.on("@",this[Co]),this._attrs.on(t,e)}once(t,e){const n=this.on(t,e),s=this.on(t,()=>{n.unsubscribe(),s.unsubscribe()});return n}get isValid(){return Ie(this.validate({silent:!0}).code)}validate(t){const e=Object.assign({validate:!0,noThrow:!0,extend:!1},t);return this[xo]({},e)}validateAttributes(t,e){return ko}[xo](t,e){const{validate:n,silent:s,noThrow:r}=e??{};if(n){const n={...this._attrs,...t},i=this.validateAttributes(n,e);if(De(i.code)&&(s||this.trigger("@invalid",this,n,i),!r))throw i;return i}return ko}has(t){return null!=this._attrs[t]}escape(t){return mt(this._attrs[t])}setAttributes(t,e){const{silent:n,extend:s}=e??{};try{n&&this._attrs.suspend(!0);const r=this[xo](t,e);if(De(r.code))return this;for(const e of Object.keys(t))e in this._attrs?this[Oo](e,t[e]):s&&(this[Ro](this,e),this[Oo](e,t[e]))}finally{n&&this._attrs.resume()}return this}clear(t){const e={};for(const t of Object.keys(this._baseAttrs))e[t]=void 0;return this.setAttributes(e,t)}toJSON(){return I({...this._attrs})}clone(){const{constructor:t,_attrs:e,_options:n}=this;return new t(e,n)}hasChanged(t){return null==t?!g(this._changedAttrs):t in this._changedAttrs}changed(t){if(t){const e=Q(this._attrs,t);return g(e)?void 0:e}return this.hasChanged()?{...this._changedAttrs}:void 0}previous(t){return this._prevAttrs[t]}isNew(){const t=Ao(this,"id");return!this.has(t)}parse(t,e){return t}sync(t,e,n){return Eo().sync(t,e,n)}async fetch(t){const e=Object.assign({parse:!0},t,{syncMethod:"read"});try{const t=await this.sync("read",this,e);return this.setAttributes(e.parse?this.parse(t,e):t,e),this.trigger("@sync",this,t,e),t}catch(t){throw this.trigger("@error",this,t,e),t}}async save(...t){const{attrs:e,options:n}=function s(...t){let e,[n,s,r]=t;return null==n||f(n)?(e=n,r=s):k(e={},n,s),r?.data&&(e=Object.assign(e??{},r.data)),{attrs:e,options:r}}(...t),r=Object.assign({validate:!0,parse:!0,wait:!0,extend:!0},n);try{const{wait:t}=r,n=r.syncMethod=this.isNew()?"create":r.patch?"patch":"update";e&&(t?this[xo](e,r):(this.setAttributes(e,r),this[To].baseAttrs={...this._attrs}),r.data="patch"===n?e:Object.assign(this.toJSON(),e));const s=await this.sync(n,this,r);let i=r.parse?this.parse(s,r):s;return e&&t&&(i=Object.assign({},e,i)),f(i)&&!g(i)&&(this.setAttributes(i,r),this[To].baseAttrs={...this._attrs}),this.trigger("@sync",this,s,r),s}catch(t){throw this.trigger("@error",this,t,r),t}}async destroy(t){const e=Object.assign({wait:!0},t,{syncMethod:"delete"});try{const{wait:t,cancel:n}=e,s=!this.isNew(),r=()=>{this.stopListening(),this.trigger("@destroy",this,e)};let i;return!t&&r(),s?i=await this.sync("delete",this,e):await me(n),t&&r(),s&&this.trigger("@sync",this,i,e),i}catch(t){throw this.trigger("@error",this,t,e),t}}}function Po(t){return t instanceof $o}function Ao(t,e=""){return f(t)?t.constructor.idAttribute??e:e}G($o,"instanceOf",null),function(){let t=CDP_DECLARE.RESULT_CODE;t[t.MVC_COLLECTION_DECLARE=9007199254740991]="MVC_COLLECTION_DECLARE",t[t.ERROR_MVC_INVALID_ACCESS=CDP_DECLARE.DECLARE_ERROR_CODE(100,71,"invalid access.")]="ERROR_MVC_INVALID_ACCESS",t[t.ERROR_MVC_INVALID_COMPARATORS=CDP_DECLARE.DECLARE_ERROR_CODE(100,72,"invalid comparators.")]="ERROR_MVC_INVALID_COMPARATORS",void(t[t.ERROR_MVC_EDIT_PERMISSION_DENIED=CDP_DECLARE.DECLARE_ERROR_CODE(100,73,"editing permission denied.")]="ERROR_MVC_EDIT_PERMISSION_DENIED")}();let Lo=()=>new Intl.Collator(io(),{sensitivity:"base",numeric:!0});function No(t,e){return(n,s)=>{const r=null!=n[t]?n[t]:"",i=null!=s[t]?s[t]:"";return e*Lo().compare(r,i)}}function Do(t,e){return(n,s)=>{const r=n[t],i=s[t];if(r===i)return 0;if(null==r)return-1*e;if(null==i)return 1*e;{const t=Object(r).valueOf(),n=Object(i).valueOf();return t===n?0:t<n?-1*e:1*e}}}function Io(t,e){return(n,s)=>n[t]===s[t]?0:null==n[t]?-1*e:null==s[t]?1*e:n[t]<s[t]?-1*e:1*e}const jo=Io,Mo=Io;function Vo(t){const{name:e,type:n,order:s}=t;switch(n){case"string":return No(e,s);case"boolean":return jo(e,s);case"number":return Mo(e,s);case"date":return Do(e,s);default:return Io(e,s)}}function Uo(t){const e=[];for(const n of t)e.push(Vo(n));return e}const{trunc:Fo}=Math;function Bo(t,e){return new Promise(n=>{const s=r=>{t.off(s),e&&(e.length=0,e.push(...t)),n(r)};t.on(s)})}async function Ho(t,e){if(t instanceof ke)return await me(e),{editor:t,promise:Bo(t)};if(Array.isArray(t)){const n=ke.from(t);return await me(e),{editor:n,promise:Bo(n,t)}}throw Ke($e.NOT_SUPPORTED,"target is not Array or ObservableArray.")}function zo(t,e){if(null==e||e.length<=0)return!1;for(const n of e)if(n<0||t<=n||Fo(n)!==n)throw Ke($e.NOT_SUPPORTED,`orders[] index is invalid. index: ${n}`);return!0}async function Ko(t,e){if(t.length<=0)return[];const{editor:n,promise:s}=await Ho(t,e);return n.splice(0,t.length),s}async function Wo(t,e,n){if(null==e||e.length<=0)return[];const{editor:s,promise:r}=await Ho(t,n);return s.push(...e),r}async function qo(t,e,n,s){if(e<0||t.length<e||Fo(e)!==e)throw Ke($e.NOT_SUPPORTED,`insertArray(), index is invalid. index: ${e}`);if(null==n||n.length<=0)return[];const{editor:r,promise:i}=await Ho(t,s);return r.splice(e,0,...n),i}async function Go(t,e,n,s){if(e<0||t.length<e||Fo(e)!==e)throw Ke($e.NOT_SUPPORTED,`reorderArray(), index is invalid. index: ${e}`);if(!zo(t.length,n))return[];const{editor:r,promise:i}=await Ho(t,s);let o=Array.from(r);{const t=[];for(const e of Nt(n))t.push(r[e]),o[e]=null;o.splice(e,0,...t),o=o.filter(t=>null!=t)}for(const t of o.keys())r[t]=o[t];return i}async function Jo(t,e,n){if(!zo(t.length,e))return[];const{editor:s,promise:r}=await Ho(t,n);e.sort((t,e)=>t<e?1:-1);for(const t of Nt(e))s.splice(t,1);return r}function Yo(t,e){return n=>n[t]===e}function Xo(t,e){return n=>n[t]!==e}function Qo(t,e){return n=>n[t]>e}function Zo(t,e){return n=>n[t]<e}function ta(t,e){return n=>n[t]>=e}function ea(t,e){return n=>n[t]<=e}function na(t,e){return n=>String(n[t]).toLocaleLowerCase().includes(e.toLocaleLowerCase())}function sa(t,e){return n=>!String(n[t]).toLocaleLowerCase().includes(e.toLocaleLowerCase())}function ra(t,e,n){return s=>{const r=Ut(new Date,-1*e,n);return r<=s[t]}}function ia(t,e,n){return s=>{const r=Ut(new Date,-1*e,n);return!(r<=s[t])}}function oa(t,e,n){return aa(0,ta(t,e),ea(t,n))}function aa(t,e,n){return n?s=>{switch(t){case 0:return e(s)&&n(s);case 1:return e(s)||n(s);default:return void 0,e(s)&&n(s)}}:e}class ca{_operators;_combination;_sumKeys;_limit;_random;_sortKeys;constructor(t={operators:[]}){const{operators:e,combination:n,sumKeys:s,limit:r,random:i,sortKeys:o}=t;this._operators=e,this._combination=n??0,this._sumKeys=s??[],this._limit=r,this._random=!!i,this._sortKeys=o??[]}get operators(){return this._operators}set operators(t){this._operators=t}get sumKeys(){return this._sumKeys}set sumKeys(t){this._sumKeys=t}get combination(){return this._combination}set combination(t){this._combination=t}get limit(){return this._limit}set limit(t){this._limit=t}get random(){return this._random}set random(t){this._random=t}get sortKeys(){return this._sortKeys}set sortKeys(t){this._sortKeys=t}get comparators(){return Uo(this._sortKeys)}get filter(){let t;for(const e of this._operators){const{operator:n,prop:s,value:r}=e;switch(n){case 0:t=aa(this._combination,Yo(s,r),t);break;case 1:t=aa(this._combination,Xo(s,r),t);break;case 2:t=aa(this._combination,Qo(s,r),t);break;case 3:t=aa(this._combination,Zo(s,r),t);break;case 4:t=aa(this._combination,ta(s,r),t);break;case 5:t=aa(this._combination,ea(s,r),t);break;case 6:t=aa(this._combination,na(s,r),t);break;case 7:t=aa(this._combination,sa(s,r),t);break;case 8:t=aa(this._combination,ra(s,r,e.unit),t);break;case 9:t=aa(this._combination,ia(s,r,e.unit),t);break;case 10:t=aa(this._combination,oa(s,r,e.range),t)}}return t??(()=>!0)}}const{trunc:la}=Math;function ua(t,e,...n){let s=m(e)?t.filter(e):t.slice();for(const t of n)m(t)&&(s=Lt(s,t));return s}const ha={0:null,1:{coeff:1},2:{coeff:1e3},3:{coeff:6e4},4:{coeff:36e5},5:{coeff:864e5},6:{coeff:1024},7:{coeff:1048576},8:{coeff:1073741824},9:{coeff:1099511627776}};function da(t,e){const{random:n,limit:s,sumKeys:r}=e;if(n&&At(t,!0),s){const{unit:e,value:n,prop:r}=s,i=[],o=ha[e],a=n,c=!!s.excess;let l=0;for(const e of t){if(o){if(null==e[r]){void 0;continue}l+=Number(e[r])/o.coeff}else l++;if(a<l){c&&i.push(e);break}i.push(e)}t=i}const i={total:t.length,items:t};if(0<r.length)for(const e of t)for(const t of r)t in i||(i[t]=0),i[t]+=Number(e[t]);return i}async function fa(t,e){const{filter:n,comparators:s,index:r,limit:i,cancel:o,progress:a,auto:c,noSearch:l}=e;if(!t.length)return{total:0,items:[],options:e};const u=l?t.slice():ua(t,n,...s),h=[];let d=r??0;for(;;){if(await me(o),d<0||u.length<=d||la(d)!==d)throw Ke($e.ERROR_MVC_INVALID_ACCESS,`invalid index: ${d}`);if(null!=i&&(i<=0||la(i)!==i))throw Ke($e.ERROR_MVC_INVALID_ACCESS,`invalid limit: ${i}`);const t=Object.assign(e,{index:d}),n=u.slice(d,null!=i?d+i:void 0);h.push(...n);const s={total:u.length,items:n,options:{...t}};if(m(a)&&a({...s}),c&&null!=i){if(!(u.length<=d+i)){d+=n.length;continue}s.items=h}return s}}function pa(t,e,n){const{noCache:s,noSearch:r}=n,i=!s&&!r&&e.total&&e.total===e.items.length;i&&(t.cache={...e},delete t.cache.options)}async function ga(t,e,n){const s=function r(t){const e=Object.assign({sortKeys:[]},t),{noSearch:n,sortKeys:s}=e;return n||e.comparators&&!(e.comparators.length<=0)||(e.comparators=Uo(s)),e}(n),{sortKeys:i,comparators:o,filter:a}=s;return Object.assign(t,{sortKeys:i,comparators:o,filter:a}),t.cache?(await fa(t.cache.items,s)).items:(await async function c(t,e,n){const{index:s,limit:r,cancel:i,progress:o,auto:a}=n,c=[],l=t=>{const e=!!t.options?.condition;return e||t.total===t.items.length};let u=s??0;for(;;){if(await me(i),u<0||la(u)!==u)throw Ke($e.ERROR_MVC_INVALID_ACCESS,`invalid index: ${u}`);if(null!=r&&(r<=0||la(r)!==r))throw Ke($e.ERROR_MVC_INVALID_ACCESS,`invalid limit: ${r}`);const s=Object.assign(n,{index:u});let h=await e(s);const d=Object.assign({},s,h.options);if(l(h)){pa(t,h,d);const{noSearch:e,condition:n}=d;if(n){const e=new ca(n);h=da(ua(h.items,e.filter,...e.comparators),e),t.cache&&(Object.assign(t.cache,h),delete t.cache.options)}return fa(h.items,Object.assign(s,{noSearch:e}))}{c.push(...h.items);const e={total:h.total,items:h.items,options:d};if(m(o)&&o({...e}),a&&null!=r){if(!(h.total<=u+r)){u+=h.items.length;continue}e.items=c}return pa(t,e,d),e}}}(t,e,s)).items}const ma=Symbol("properties"),_a=Symbol("create-iterable-iterator"),ya=Symbol("prepare-model"),ba=Symbol("remove-models"),va=Symbol("add-reference"),wa=Symbol("remove-reference"),Ea=Symbol("model-event-handler"),Ra=t=>{const{sortKeys:e,comparators:n}=t;return{sortKeys:e??[],comparators:n??Uo(e??[])}},Oa=t=>t?.idAttribute??"id",xa=(t,e)=>t[Oa(e)],Ca=t=>t.constructor.model,Sa=(t,e)=>{const n=Ca(e);return!!m(n)&&t instanceof n},Ta=(t,e,n)=>{n=Math.min(Math.max(n,0),t.length),t.splice(n,0,...e)};const ka={add:!0,remove:!0,merge:!0},$a={add:!0,remove:!1};class Pa extends ne{static model;[ma];constructor(t,e){super();const n=Object.assign({modelOptions:{},queryOptions:{}},e),{modelOptions:s,queryOptions:r}=n;this[ma]={constructOptions:n,provider:n.provider??this.sync.bind(this),cid:Rt("collection:",8),queryOptions:r,queryInfo:{},modelOptions:s,byId:new Map,store:[]},this.initQueryInfo(),this[Ea]=(t,e,n,s)=>{if(a(t)&&t.startsWith("@")&&e){if(("@add"===t||"@remove"===t)&&n!==this)return;if("@destroy"===t&&(s=n,n=this,this.remove(e,s)),t.startsWith("@change")&&(s={},n=this,"@change"===t)){const t=((t,e)=>{const n=t,s=Oa(e),r=n[s];if(a(r))return{id:n[s],prevId:m(n.previous)?n.previous(s):void 0}})(e,Ca(this));if(t){const{id:n,prevId:s}=t;if(s!==n){const{byId:t}=this[ma];t.set(n,e),null!=s&&t.delete(s)}}}this.trigger.call(this,t,e,n,s)}},t&&this.reset(t,Object.assign({silent:!0},n))}initQueryInfo(){const{sortKeys:t,comparators:e}=Ra(this._defaultQueryOptions);this._queryInfo={sortKeys:t,comparators:e}}release(t){return this[ma].afterFilter=void 0,this[ma].store=[],this.initQueryInfo(),this.stopListening()}clearCache(){delete this._queryInfo.cache}get id(){return this[ma].cid}get models(){const{_queryFilter:t,_afterFilter:e}=this,{store:n}=this[ma];return e&&e!==t?n.filter(e):n}get length(){return this.models.length}get filtered(){return!!this[ma].afterFilter}get _queryInfo(){return this[ma].queryInfo}set _queryInfo(t){this[ma].queryInfo=t}get _options(){return this[ma].constructOptions}get _provider(){return this[ma].provider}get _defaultParse(){return this._options.parse}get _defaultQueryOptions(){return this[ma].queryOptions}get _lastQueryOptions(){const{sortKeys:t,comparators:e,filter:n}=this[ma].queryInfo,s={};return t.length&&(s.sortKeys=t),e.length&&(s.comparators=e),n&&(s.filter=n),s}get _comparators(){return this[ma].queryInfo.comparators}get _queryFilter(){return this[ma].queryInfo.filter}get _afterFilter(){return this[ma].afterFilter}get(t){if(null==t)return;const{byId:e}=this[ma];if(a(t)&&e.has(t))return e.get(t);const n=xa(Po(t)?t.toJSON():t,Ca(this)),s=t._cid;return e.get(n)??(s&&e.get(s))}has(t){return null!=this.get(t)}toJSON(){return this.models.map(t=>Po(t)?t.toJSON():t)}clone(){const{constructor:t,_options:e}=this;return new t(this[ma].store,e)}sort(t){const e=t??{},{noThrow:n,silent:s}=e,{sortKeys:r,comparators:i}=Ra(e),o=0<i.length?i:this._comparators;if(o.length<=0){if(n)return this;throw Ke($e.ERROR_MVC_INVALID_COMPARATORS,"Cannot sort a set without a comparator.")}return this[ma].store=ua(this[ma].store,this._afterFilter,...o),this[ma].queryInfo.comparators=o,0<r.length&&(this[ma].queryInfo.sortKeys=r),s||this.trigger("@sort",this,e),this}filter(...t){const e=function n(...t){const[e,n]=t;return null==e?{}:m(e)?Object.assign({},n,{filter:e}):e}(...t),{filter:s,silent:r}=e;return s!==this[ma].afterFilter&&(this[ma].afterFilter=s,r||this.trigger("@filter",this,e)),this}at(t){return Dt(this.models,t)}first(t){const e=this.models;return null==t?e[0]:e.slice(0,t)}last(t){const e=this.models;return null==t?e[e.length-1]:e.slice(-1*t)}parse(t,e){return t}async sync(t){const e=await Eo().sync("read",this,t);return{total:e.length,items:e,options:t}}async fetch(t){const e=Object.assign({progress:ut,parse:this._defaultParse},this._defaultQueryOptions,t);try{const{progress:t,limit:n,reset:s,noCache:r}=e,{_queryInfo:i,_provider:o}=this,a=null==n;e.progress=n=>{t(n),!a&&this.add(n.items,e)},r&&this.clearCache(),!a&&s&&this.reset(void 0,{silent:!0});const c=await ga(i,o,e);return a&&(s?this.reset(c,e):this.add(c,e)),this.trigger("@sync",this,c,e),c}catch(t){throw this.trigger("@error",void 0,this,t,e),t}}requery(t){const e=Object.assign({},this._lastQueryOptions,t,{reset:!0});return this.fetch(e)}set(t,e){if(o(t))return;const n=Object.assign({parse:this._defaultParse},ka,e);n.parse&&!Sa(t,this)&&(t=this.parse(t,e)??[]);const s=!d(t),r=s?[t]:t.slice(),{store:i}=this[ma],a=(t=>{if(null!=t)return t>i.length?i.length:t<0?(t+=i.length,t<0?0:t):t})(n.at),c=[],l=[],u=[],h=[],f=new Set,{add:p,merge:g,remove:_,parse:y,silent:b}=n;let v=!1;const w=this._comparators.length&&null==a&&!1!==n.sort;for(const[t,e]of r.entries()){const s=this.get(e);if(s){if(g&&e!==s){let t=Po(e)?e.toJSON():e;y&&m(s.parse)&&(t=s.parse(t,n)),m(s.setAttributes)?s.setAttributes(t,n):Object.assign(s,t),u.push(s),w&&!v&&(v=!m(s.hasChanged)||s.hasChanged())}f.has(s)||(f.add(s),c.push(s)),r[t]=s}else if(p){const s=r[t]=this[ya](e,n);s&&(l.push(s),this[va](s),f.add(s),c.push(s))}}if(_){for(const t of i)f.has(t)||h.push(t);h.length&&this[ba](h,n)}let E=!1;const R=!w&&p&&_;if(c.length&&R?(E=i.length!==c.length||i.some((t,e)=>t!==c[e]),i.length=0,Ta(i,c,0)):l.length&&(w&&(v=!0),Ta(i,l,a??i.length)),v&&this.sort({silent:!0}),!b){for(const[t,e]of l.entries())null!=a&&(n.index=a+t),Po(e)||e instanceof Yt?e.trigger("@add",e,this,n):this.trigger("@add",e,this,n);(v||E)&&this.trigger("@sort",this,n),(l.length||h.length||u.length)&&(n.changes={added:l,removed:h,merged:u},this.trigger("@update",this,n))}const O=r.filter(t=>null!=t);return s?O[0]:O.length?O:void 0}reset(t,e){const n=Object.assign({},e),{store:s}=this[ma];for(const t of s)this[wa](t);n.previous=s.slice(),(t=>{t.byId.clear(),t.store.length=0})(this[ma]);const r=t?this.add(t,Object.assign({silent:!0},n)):[];return n.silent||this.trigger("@reset",this,n),r}add(t,e){return this.set(t,Object.assign({merge:!1},e,$a))}remove(t,e){const n=Object.assign({},e),s=!d(t),r=s?[t]:t.slice(),i=this[ba](r,n);return!n.silent&&i.length&&(n.changes={added:[],merged:[],removed:i},this.trigger("@update",this,n)),s?i[0]:i}push(t,e){const{store:n}=this[ma];return this.add(t,Object.assign({at:n.length},e))}pop(t){const{store:e}=this[ma];return this.remove(e[e.length-1],t)}unshift(t,e){return this.add(t,Object.assign({at:0},e))}shift(t){const{store:e}=this[ma];return this.remove(e[0],t)}create(t,e){const{wait:n}=e??{},s=this[ya](t,e);if(!s)return;const r=Po(s)?s:void 0;return n&&r||this.add(s,e),r&&(async()=>{try{await r.save(void 0,e),n&&this.add(s,e)}catch(t){this.trigger("@error",r,this,t,e)}})(),s}[ya](t,e){if(Sa(t,this))return t;const n=Ca(this),{modelOptions:s}=this[ma];if(n){const r=Object.assign({},s,e),i=new n(t,r);if(m(i.validate)){const e=i.validate();if(De(e.code))return this.trigger("@invalid",t,this,e,r),void 0}return i}return t}[ba](t,e){const n=Object.assign({},e),s=[];for(const e of t){const t=this.get(e);if(!t)continue;const{store:r}=this[ma],i=r.indexOf(t);r.splice(i,1),this[wa](t,!0),n.silent||(n.index=i,Po(t)||t instanceof Yt?t.trigger("@remove",t,this,n):this.trigger("@remove",t,this,n)),s.push(t),this[wa](t,!1)}return s}[va](t){const{byId:e}=this[ma],{_cid:n,id:s}=t;null!=n&&e.set(n,t),null!=s&&e.set(s,t),(Po(t)||t instanceof Jt)&&this.listenTo(t,"*",this[Ea])}[wa](t,e=!1){const{byId:n}=this[ma],{_cid:s,id:r}=t;null!=s&&n.delete(s),null!=r&&n.delete(r),!e&&(Po(t)||t instanceof Jt)&&this.stopListening(t,"*",this[Ea])}[Symbol.iterator](){const t={base:this.models,pointer:0,next(){return this.pointer<this.base.length?{done:!1,value:this.base[this.pointer++]}:{done:!0,value:void 0}}};return t}entries(){return this[_a]((t,e)=>[t,e])}keys(){return this[_a](t=>t)}values(){return this[_a]((t,e)=>e)}[_a](t){const e={base:this.models,pointer:0},n=t=>xa(e.base[t],Ca(this))||String(t),s={next(){const s=e.pointer;return s<e.base.length?(e.pointer++,{done:!1,value:t(n(s),e.base[s])}):{done:!0,value:void 0}},[Symbol.iterator](){return this}};return s}}async function Aa(t,e,n){const s=function r(t){if(t.filtered)throw Ke($e.ERROR_MVC_EDIT_PERMISSION_DENIED,"collection is applied after-filter.");return t.models.slice()}(t),i=await n(s,e?.cancel);return t.set(s,e),i}function La(t){return t.reduce((t,e)=>Math.min(t,e))}function Na(t,e,n,s,r){const i=!!e.length;return{type:t,list:e,range:i?{from:n,to:s}:void 0,insertedTo:i?r:void 0}}G(Pa,"instanceOf",null);const Da=st(globalThis.document),Ia=Symbol("init-internal"),ja=Symbol("properties"),Ma=Symbol("ensure-element");class Va{[ja];constructor(t){!1!==t&&this[Ia](t)}release(){return this.undelegateEvents(),this}remove(){return this.release(),this.$el.remove(),this}get id(){const{cid:t,id:e}=this[ja];return e??t}get el(){return this[ja].$el[0]}get $el(){return this[ja].$el}get _cid(){return this[ja].cid}get _tagName(){return this[ja].tagName}get _attrs(){const{attributes:t,id:e,className:n}=this[ja];return Object.assign(Z({id:e,class:n}),t)}setElement(t){return this.undelegateEvents(),this[ja].$el=Is(t),this.delegateEvents(),this}delegateEvents(t){const e=t??this.events();if(g(e))return this;this.undelegateEvents();for(const t of Object.keys(e)){let n=e[t];if(m(n)||(n=this[n]),!n)continue;const s=/^(\S+)\s*(.*)$/.exec(t);this.delegate(s[1],s[2],n.bind(this))}return this}undelegateEvents(){return this.$el?.off(`.${this._cid}`),this}delegate(t,...e){return this.$el.on(`${t}.${this._cid}`,...e),this}undelegate(t,...e){return this.$el.off(`${t}.${this._cid}`,...e),this}$(t){return this.$el.find(t)}events(){return Object.assign({},this[ja].events)}[Ia](t){const{el:e,tagName:n,id:s,attributes:r,className:i,events:o}=t??{};this[ja]={cid:Rt("view:",8),events:o,id:s,className:i,attributes:r,tagName:n??"div"},this[Ma](e)}[Ma](t){if(t)this.setElement(t);else{const{_attrs:t,_tagName:e}=this;this.setElement(Da.createElement(e)),this.$el.attr(t)}}}class Ua extends(J(ne,Va)){constructor(t){super(),this.super(Va,!1),this[Ia](t)}release(){return super.release(),this.stopListening(),this.off(),this}}const Fa=Ua,Ba=globalThis,Ha=t=>t,za=Ba.trustedTypes,Ka=za?za.createPolicy("lit-html",{createHTML:t=>t}):void 0,Wa="$lit$",qa=`lit$${Math.random().toFixed(9).slice(2)}$`,Ga="?"+qa,Ja=`<${Ga}>`,Ya=document,Xa=()=>Ya.createComment(""),Qa=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Za=Array.isArray,tc=t=>Za(t)||"function"==typeof t?.[Symbol.iterator],ec="[ \t\n\f\r]",nc=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,sc=/-->/g,rc=/>/g,ic=new RegExp(`>|${ec}(?:([^\\s"'>=/]+)(${ec}*=${ec}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),oc=/'/g,ac=/"/g,cc=/^(?:script|style|textarea|title)$/i,lc=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),uc=lc(1),hc=lc(2),dc=Symbol.for("lit-noChange"),fc=Symbol.for("lit-nothing"),pc=new WeakMap,gc=Ya.createTreeWalker(Ya,129);function mc(t,e){if(!Za(t)||!t.hasOwnProperty("raw")){let t="invalid template strings array";throw new Error(t)}return void 0!==Ka?Ka.createHTML(e):e}const _c=(t,e)=>{const n=t.length-1,s=[];let r,i=2===e?"<svg>":3===e?"<math>":"",o=nc;for(let e=0;e<n;e++){const n=t[e];let a,c,l=-1,u=0;for(;u<n.length&&(o.lastIndex=u,c=o.exec(n),null!==c);)u=o.lastIndex,o===nc?"!--"===c[1]?o=sc:void 0!==c[1]?o=rc:void 0!==c[2]?(cc.test(c[2])&&(r=new RegExp(`</${c[2]}`,"g")),o=ic):void 0!==c[3]&&(o=ic):o===ic?">"===c[0]?(o=r??nc,l=-1):void 0===c[1]?l=-2:(l=o.lastIndex-c[2].length,a=c[1],o=void 0===c[3]?ic:'"'===c[3]?ac:oc):o===ac||o===oc?o=ic:o===sc||o===rc?o=nc:(o=ic,r=void 0);const h=o===ic&&t[e+1].startsWith("/>")?" ":"";i+=o===nc?n+Ja:l>=0?(s.push(a),n.slice(0,l)+Wa+n.slice(l)+qa+h):n+qa+(-2===l?e:h)}const a=i+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"");return[mc(t,a),s]};class yc{constructor({strings:t,_$litType$:e},n){let s;this.parts=[];let r=0,i=0;const o=t.length-1,a=this.parts,[c,l]=_c(t,e);if(this.el=yc.createElement(c,n),gc.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=gc.nextNode())&&a.length<o;){if(1===s.nodeType){if(s.hasAttributes())for(const t of s.getAttributeNames())if(t.endsWith(Wa)){const e=l[i++],n=s.getAttribute(t),o=n.split(qa),c=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:c[2],strings:o,ctor:"."===c[1]?Rc:"?"===c[1]?Oc:"@"===c[1]?xc:Ec}),s.removeAttribute(t)}else t.startsWith(qa)&&(a.push({type:6,index:r}),s.removeAttribute(t));if(cc.test(s.tagName)){const t=s.textContent.split(qa),e=t.length-1;if(e>0){s.textContent=za?za.emptyScript:"";for(let n=0;n<e;n++)s.append(t[n],Xa()),gc.nextNode(),a.push({type:2,index:++r});s.append(t[e],Xa())}}}else if(8===s.nodeType){const t=s.data;if(t===Ga)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(qa,t+1));)a.push({type:7,index:r}),t+=qa.length-1}}r++}}static createElement(t,e){const n=Ya.createElement("template");return n.innerHTML=t,n}}function bc(t,e,n=t,s){if(e===dc)return e;let r=void 0!==s?n.__directives?.[s]:n.__directive;const i=Qa(e)?void 0:e._$litDirective$;return r?.constructor!==i&&(r?._$notifyDirectiveConnectionChanged?.(!1),void 0===i?r=void 0:(r=new i(t),r._$initialize(t,n,s)),void 0!==s?(n.__directives??=[])[s]=r:n.__directive=r),void 0!==r&&(e=bc(t,r._$resolve(t,e.values),r,s)),e}class vc{constructor(t,e){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=t,this._$parent=e}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(t){const{el:{content:e},parts:n}=this._$template,s=(t?.creationScope??Ya).importNode(e,!0);gc.currentNode=s;let r=gc.nextNode(),i=0,o=0,a=n[0];for(;void 0!==a;){if(i===a.index){let e;2===a.type?e=new wc(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new Cc(r,this,t)),this._$parts.push(e),a=n[++o]}i!==a?.index&&(r=gc.nextNode(),i++)}return gc.currentNode=Ya,s}_update(t){let e=0;for(const n of this._$parts)void 0!==n&&(void 0!==n.strings?(n._$setValue(t,n,e),e+=n.strings.length-2):n._$setValue(t[e])),e++}}let wc=class t{get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}constructor(t,e,n,s){this.type=2,this._$committedValue=fc,this._$disconnectableChildren=void 0,this._$startNode=t,this._$endNode=e,this._$parent=n,this.options=s,this.__isConnected=s?.isConnected??!0}get parentNode(){let t=this._$startNode.parentNode;const e=this._$parent;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(t,e=this){t=bc(this,t,e),Qa(t)?t===fc||null==t||""===t?(this._$committedValue!==fc&&this._$clear(),this._$committedValue=fc):t!==this._$committedValue&&t!==dc&&this._commitText(t):void 0!==t._$litType$?this._commitTemplateResult(t):void 0!==t.nodeType?this._commitNode(t):tc(t)?this._commitIterable(t):this._commitText(t)}_insert(t){return this._$startNode.parentNode.insertBefore(t,this._$endNode)}_commitNode(t){this._$committedValue!==t&&(this._$clear(),this._$committedValue=this._insert(t))}_commitText(t){if(this._$committedValue!==fc&&Qa(this._$committedValue)){const e=this._$startNode.nextSibling;e.data=t}else this._commitNode(Ya.createTextNode(t));this._$committedValue=t}_commitTemplateResult(t){const{values:e,_$litType$:n}=t,s="number"==typeof n?this._$getTemplate(t):(void 0===n.el&&(n.el=yc.createElement(mc(n.h,n.h[0]),this.options)),n);if(this._$committedValue?._$template===s)this._$committedValue._update(e);else{const t=new vc(s,this),n=t._clone(this.options);t._update(e),this._commitNode(n),this._$committedValue=t}}_$getTemplate(t){let e=pc.get(t.strings);return void 0===e&&pc.set(t.strings,e=new yc(t)),e}_commitIterable(e){Za(this._$committedValue)||(this._$committedValue=[],this._$clear());const n=this._$committedValue;let s,r=0;for(const i of e)r===n.length?n.push(s=new t(this._insert(Xa()),this._insert(Xa()),this,this.options)):s=n[r],s._$setValue(i),r++;r<n.length&&(this._$clear(s&&s._$endNode.nextSibling,r),n.length=r)}_$clear(t=this._$startNode.nextSibling,e){for(this._$notifyConnectionChanged?.(!1,!0,e);t&&t!==this._$endNode;){const e=Ha(t).nextSibling;Ha(t).remove(),t=e}}setConnected(t){void 0===this._$parent&&(this.__isConnected=t,this._$notifyConnectionChanged?.(t))}},Ec=class t{get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(t,e,n,s,r){this.type=1,this._$committedValue=fc,this._$disconnectableChildren=void 0,this.element=t,this.name=e,this._$parent=s,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$committedValue=new Array(n.length-1).fill(new String),this.strings=n):this._$committedValue=fc}_$setValue(t,e=this,n,s){const r=this.strings;let i=!1;if(void 0===r)t=bc(this,t,e,0),i=!Qa(t)||t!==this._$committedValue&&t!==dc,i&&(this._$committedValue=t);else{const s=t;let o,a;for(t=r[0],o=0;o<r.length-1;o++)a=bc(this,s[n+o],e,o),a===dc&&(a=this._$committedValue[o]),i||=!Qa(a)||a!==this._$committedValue[o],a===fc?t=fc:t!==fc&&(t+=(a??"")+r[o+1]),this._$committedValue[o]=a}i&&!s&&this._commitValue(t)}_commitValue(t){t===fc?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},Rc=class t extends Ec{constructor(){super(...arguments),this.type=3}_commitValue(t){this.element[this.name]=t===fc?void 0:t}},Oc=class t extends Ec{constructor(){super(...arguments),this.type=4}_commitValue(t){this.element.toggleAttribute(this.name,!!t&&t!==fc)}},xc=class t extends Ec{constructor(t,e,n,s,r){super(t,e,n,s,r),this.type=5}_$setValue(t,e=this){if(t=bc(this,t,e,0)??fc,t===dc)return;const n=this._$committedValue,s=t===fc&&n!==fc||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==fc&&(n===fc||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$committedValue=t}handleEvent(t){"function"==typeof this._$committedValue?this._$committedValue.call(this.options?.host??this.element,t):this._$committedValue.handleEvent(t)}};class Cc{constructor(t,e,n){this.element=t,this.type=6,this._$disconnectableChildren=void 0,this._$parent=e,this.options=n}get _$isConnected(){return this._$parent._$isConnected}_$setValue(t){bc(this,t)}}const Sc={_boundAttributeSuffix:Wa,_marker:qa,_markerMatch:Ga,_HTML_RESULT:1,_getTemplateHtml:_c,_TemplateInstance:vc,_isIterable:tc,_resolveDirective:bc,_ChildPart:wc,_AttributePart:Ec,_BooleanAttributePart:Oc,_EventPart:xc,_PropertyPart:Rc,_ElementPart:Cc},Tc=Ba.litHtmlPolyfillSupport;Tc?.(yc,wc),(Ba.litHtmlVersions??=[]).push("3.3.0");const kc=(t,e,n)=>{const s=n?.renderBefore??e;let r=s._$litPart$;if(void 0===r){const t=n?.renderBefore??null;s._$litPart$=r=new wc(e.insertBefore(Xa(),t),t,void 0,n??{})}return r._$setValue(t),r};let $c=null;const Pc={boundAttributeSuffix:Sc._boundAttributeSuffix,marker:Sc._marker,markerMatch:Sc._markerMatch,HTML_RESULT:Sc._HTML_RESULT,getTemplateHtml:Sc._getTemplateHtml,overrideDirectiveResolve:(t,e)=>class extends t{_$resolve(t,n){return e(this,n)}},patchDirectiveResolve:(t,e)=>{if(t.prototype._$resolve!==e){$c??=t.prototype._$resolve.name;for(let n=t.prototype;n!==Object.prototype;n=Object.getPrototypeOf(n))if(n.hasOwnProperty($c))return n[$c]=e,void 0;throw new Error("Internal error: It is possible that both dev mode and production mode Lit was mixed together during SSR. Please comment on the issue: https://github.com/lit/lit/issues/4527")}},setDirectiveClass(t,e){t._$litDirective$=e},getAttributePartCommittedValue:(t,e,n)=>{let s=dc;return t._commitValue=t=>s=t,t._$setValue(e,t,n),s},connectedDisconnectable:t=>({...t,_$isConnected:!0}),resolveDirective:Sc._resolveDirective,AttributePart:Sc._AttributePart,PropertyPart:Sc._PropertyPart,BooleanAttributePart:Sc._BooleanAttributePart,EventPart:Sc._EventPart,ElementPart:Sc._ElementPart,TemplateInstance:Sc._TemplateInstance,isIterable:Sc._isIterable,ChildPart:Sc._ChildPart},Ac={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Lc=t=>(...e)=>({_$litDirective$:t,values:e});class Nc{constructor(t){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(t,e,n){this.__part=t,this._$parent=e,this.__attributeIndex=n}_$resolve(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const{_ChildPart:Dc}=Sc,Ic=t=>t,jc=(t,e)=>void 0!==t?._$litType$,Mc=t=>void 0===t.strings,Vc=()=>document.createComment(""),Uc=(t,e,n)=>{const s=t._$startNode.parentNode,r=void 0===e?t._$endNode:e._$startNode;if(void 0===n){const e=s.insertBefore(Vc(),r),i=s.insertBefore(Vc(),r);n=new Dc(e,i,t,t.options)}else{const e=n._$endNode.nextSibling,i=n._$parent,o=i!==t;if(o){let e;n._$reparentDisconnectables?.(t),n._$parent=t,void 0!==n._$notifyConnectionChanged&&(e=t._$isConnected)!==i._$isConnected&&n._$notifyConnectionChanged(e)}if(e!==r||o){let t=n._$startNode;for(;t!==e;){const e=Ic(t).nextSibling;Ic(s).insertBefore(t,r),t=e}}}return n},Fc=(t,e,n=t)=>(t._$setValue(e,n),t),Bc={},Hc=(t,e=Bc)=>t._$committedValue=e,zc=t=>t._$committedValue,Kc=t=>{t._$notifyConnectionChanged?.(!1,!0);let e=t._$startNode;const n=t._$endNode.nextSibling;for(;e!==n;){const t=Ic(e).nextSibling;Ic(e).remove(),e=t}},Wc=t=>{t._$clear()},qc=(t,e)=>{const n=t._$disconnectableChildren;if(void 0===n)return!1;for(const t of n)t._$notifyDirectiveConnectionChanged?.(e,!1),qc(t,e);return!0},Gc=t=>{let e,n;do{if(void 0===(e=t._$parent))break;n=e._$disconnectableChildren,n.delete(t),t=e}while(0===n?.size)},Jc=t=>{for(let e;e=t._$parent;t=e){let n=e._$disconnectableChildren;if(void 0===n)e._$disconnectableChildren=n=new Set;else if(n.has(t))break;n.add(t),Qc(e)}};function Yc(t){void 0!==this._$disconnectableChildren?(Gc(this),this._$parent=t,Jc(this)):this._$parent=t}function Xc(t,e=!1,n=0){const s=this._$committedValue,r=this._$disconnectableChildren;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(s))for(let t=n;t<s.length;t++)qc(s[t],!1),Gc(s[t]);else null!=s&&(qc(s,!1),Gc(s));else qc(this,t)}const Qc=t=>{t.type==Ac.CHILD&&(t._$notifyConnectionChanged??=Xc,t._$reparentDisconnectables??=Yc)};class Zc extends Nc{constructor(){super(...arguments),this._$disconnectableChildren=void 0}_$initialize(t,e,n){super._$initialize(t,e,n),Jc(this),this.isConnected=t._$isConnected}_$notifyDirectiveConnectionChanged(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(qc(this,t),Gc(this))}setValue(t){if(Mc(this.__part))this.__part._$setValue(t,this);else{const e=[...this.__part._$committedValue];e[this.__attributeIndex]=t,this.__part._$setValue(e,this,0)}}disconnected(){}reconnected(){}}class tl{}const el=new WeakMap;const nl=Lc(class sl extends Zc{render(t){return fc}update(t,[e]){const n=e!==this._ref;return n&&void 0!==this._ref&&this._updateRefValue(void 0),(n||this._lastElementForRef!==this._element)&&(this._ref=e,this._context=t.options?.host,this._updateRefValue(this._element=t.element)),fc}_updateRefValue(t){if(this.isConnected||(t=void 0),"function"==typeof this._ref){const e=this._context??globalThis;let n=el.get(e);void 0===n&&(n=new WeakMap,el.set(e,n)),void 0!==n.get(this._ref)&&this._ref.call(this._context,void 0),n.set(this._ref,t),void 0!==t&&this._ref.call(this._context,t)}else this._ref.value=t}get _lastElementForRef(){return"function"==typeof this._ref?el.get(this._context??globalThis)?.get(this._ref):this._ref?.value}disconnected(){this._lastElementForRef===this._element&&this._updateRefValue(void 0)}reconnected(){this._updateRefValue(this._element)}});class rl{constructor(t){this._ref=t}disconnect(){this._ref=void 0}reconnect(t){this._ref=t}deref(){return this._ref}}class il{constructor(){this._promise=void 0,this._resolve=void 0}get(){return this._promise}pause(){this._promise??=new Promise(t=>this._resolve=t)}resume(){this._resolve?.(),this._promise=this._resolve=void 0}}class ol extends Zc{constructor(){super(...arguments),this.__weakThis=new rl(this),this.__pauser=new il}render(t,e){return dc}update(t,[e,n]){if(this.isConnected||this.disconnected(),e===this.__value)return dc;this.__value=e;let s=0;const{__weakThis:r,__pauser:i}=this;return(async(t,e)=>{for await(const n of t)if(!1===await e(n))return})(e,async t=>{for(;i.get();)await i.get();const o=r.deref();if(void 0!==o){if(o.__value!==e)return!1;void 0!==n&&(t=n(t,s)),o.commitValue(t,s),s++}return!0}),dc}commitValue(t,e){this.setValue(t)}disconnected(){this.__weakThis.disconnect(),this.__pauser.pause()}reconnected(){this.__weakThis.reconnect(this),this.__pauser.resume()}}const al=Lc(ol);const cl=Lc(class ll extends ol{constructor(t){if(super(t),t.type!==Ac.CHILD)throw new Error("asyncAppend can only be used in child expressions")}update(t,e){return this.__childPart=t,super.update(t,e)}commitValue(t,e){0===e&&Wc(this.__childPart);const n=Uc(this.__childPart);Fc(n,t)}}),ul=t=>{return e=t,null!=e?._$litType$?.h?t._$litType$.h:t.strings;var e};const hl=Lc(class dl extends Nc{constructor(t){super(t),this._templateCache=new WeakMap}render(t){return[t]}update(t,[e]){const n=jc(this._value)?ul(this._value):null,s=jc(e)?ul(e):null;if(null!==n&&(null===s||n!==s)){const e=zc(t),s=e.pop();let r=this._templateCache.get(n);if(void 0===r){const t=document.createDocumentFragment();r=kc(fc,t),r.setConnected(!1),this._templateCache.set(n,r)}Hc(r,[s]),Uc(r,void 0,s)}if(null!==s){if(null===n||n!==s){const e=this._templateCache.get(s);if(void 0!==e){const n=zc(e),s=n.pop();Wc(t),Uc(t,void 0,s),Hc(t,[s])}}this._value=e}else this._value=void 0;return this.render(e)}});const fl=Lc(class pl extends Nc{constructor(t){if(super(t),t.type!==Ac.ATTRIBUTE||"class"!==t.name||t.strings?.length>2)throw new Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(void 0===this._previousClasses){this._previousClasses=new Set,void 0!==t.strings&&(this._staticClasses=new Set(t.strings.join(" ").split(/\s/).filter(t=>""!==t)));for(const t in e)e[t]&&!this._staticClasses?.has(t)&&this._previousClasses.add(t);return this.render(e)}const n=t.element.classList;for(const t of this._previousClasses)t in e||(n.remove(t),this._previousClasses.delete(t));for(const t in e){const s=!!e[t];s===this._previousClasses.has(t)||this._staticClasses?.has(t)||(s?(n.add(t),this._previousClasses.add(t)):(n.remove(t),this._previousClasses.delete(t)))}return dc}}),gl={};const ml=Lc(class _l extends Nc{constructor(){super(...arguments),this._previousValue=gl}render(t,e){return e()}update(t,[e,n]){if(Array.isArray(e)){if(Array.isArray(this._previousValue)&&this._previousValue.length===e.length&&e.every((t,e)=>t===this._previousValue[e]))return dc}else if(this._previousValue===e)return dc;this._previousValue=Array.isArray(e)?Array.from(e):e;const s=this.render(e,n);return s}});const yl=Lc(class bl extends Nc{constructor(){super(...arguments),this.key=fc}render(t,e){return this.key=t,e}update(t,[e,n]){return e!==this.key&&(Hc(t),this.key=e),n}});const vl=Lc(class wl extends Nc{constructor(t){if(super(t),t.type!==Ac.PROPERTY&&t.type!==Ac.ATTRIBUTE&&t.type!==Ac.BOOLEAN_ATTRIBUTE)throw new Error("The `live` directive is not allowed on child or event bindings");if(!Mc(t))throw new Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===dc||e===fc)return e;const n=t.element,s=t.name;if(t.type===Ac.PROPERTY){if(e===n[s])return dc}else if(t.type===Ac.BOOLEAN_ATTRIBUTE){if(!!e===n.hasAttribute(s))return dc}else if(t.type===Ac.ATTRIBUTE&&n.getAttribute(s)===String(e))return dc;return Hc(t),e}});const El=(t,e,n)=>{const s=new Map;for(let r=e;r<=n;r++)s.set(t[r],r);return s};const Rl=Lc(class Ol extends Nc{constructor(t){if(super(t),t.type!==Ac.CHILD)throw new Error("repeat() can only be used in text expressions")}_getValuesAndKeys(t,e,n){let s;void 0===n?n=e:void 0!==e&&(s=e);const r=[],i=[];let o=0;for(const e of t)r[o]=s?s(e,o):o,i[o]=n(e,o),o++;return{values:i,keys:r}}render(t,e,n){return this._getValuesAndKeys(t,e,n).values}update(t,[e,n,s]){const r=zc(t),{values:i,keys:o}=this._getValuesAndKeys(e,n,s);if(!Array.isArray(r))return this._itemKeys=o,i;const a=this._itemKeys??=[],c=[];let l,u,h=0,d=r.length-1,f=0,p=i.length-1;for(;h<=d&&f<=p;)if(null===r[h])h++;else if(null===r[d])d--;else if(a[h]===o[f])c[f]=Fc(r[h],i[f]),h++,f++;else if(a[d]===o[p])c[p]=Fc(r[d],i[p]),d--,p--;else if(a[h]===o[p])c[p]=Fc(r[h],i[p]),Uc(t,c[p+1],r[h]),h++,p--;else if(a[d]===o[f])c[f]=Fc(r[d],i[f]),Uc(t,r[h],r[d]),d--,f++;else if(void 0===l&&(l=El(o,f,p),u=El(a,h,d)),l.has(a[h]))if(l.has(a[d])){const e=u.get(o[f]),n=void 0!==e?r[e]:null;if(null===n){const e=Uc(t,r[h]);Fc(e,i[f]),c[f]=e}else c[f]=Fc(n,i[f]),Uc(t,r[h],n),r[e]=null;f++}else Kc(r[d]),d--;else Kc(r[h]),h++;for(;f<=p;){const e=Uc(t,c[p+1]);Fc(e,i[f]),c[f++]=e}for(;h<=d;){const t=r[h++];null!==t&&Kc(t)}return this._itemKeys=o,Hc(t,c),dc}}),xl="important",Cl=" !"+xl;const Sl=Lc(class Tl extends Nc{constructor(t){if(super(t),t.type!==Ac.ATTRIBUTE||"style"!==t.name||t.strings?.length>2)throw new Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const s=t[n];return null==s?e:(n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase(),e+`${n}:${s};`)},"")}update(t,[e]){const{style:n}=t.element;if(void 0===this._previousStyleProperties)return this._previousStyleProperties=new Set(Object.keys(e)),this.render(e);for(const t of this._previousStyleProperties)null==e[t]&&(this._previousStyleProperties.delete(t),t.includes("-")?n.removeProperty(t):n[t]=null);for(const t in e){const s=e[t];if(null!=s){this._previousStyleProperties.add(t);const e="string"==typeof s&&s.endsWith(Cl);t.includes("-")||e?n.setProperty(t,e?s.slice(0,-11):s,e?xl:""):n[t]=s}}return dc}});const kl=Lc(class $l extends Nc{constructor(t){if(super(t),t.type!==Ac.CHILD)throw new Error("templateContent can only be used in child bindings")}render(t){return this._previousTemplate===t?dc:(this._previousTemplate=t,document.importNode(t.content,!0))}});class Pl extends Nc{constructor(t){if(super(t),this._value=fc,t.type!==Ac.CHILD)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(t){if(t===fc||null==t)return this._templateResult=void 0,this._value=t;if(t===dc)return t;if("string"!=typeof t)throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(t===this._value)return this._templateResult;this._value=t;const e=[t];return e.raw=e,this._templateResult={_$litType$:this.constructor.resultType,strings:e,values:[]}}}Pl.directiveName="unsafeHTML",Pl.resultType=1;const Al=Lc(Pl);class Ll extends Pl{}Ll.directiveName="unsafeSVG",Ll.resultType=2;const Nl=Lc(Ll),Dl=t=>{return!(e=t,null===e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t.then);var e},Il=1073741823;const jl=Lc(class Ml extends Zc{constructor(){super(...arguments),this.__lastRenderedIndex=Il,this.__values=[],this.__weakThis=new rl(this),this.__pauser=new il}render(...t){return t.find(t=>!Dl(t))??dc}update(t,e){const n=this.__values;let s=n.length;this.__values=e;const r=this.__weakThis,i=this.__pauser;this.isConnected||this.disconnected();for(let t=0;t<e.length&&!(t>this.__lastRenderedIndex);t++){const o=e[t];if(!Dl(o))return this.__lastRenderedIndex=t,o;t<s&&o===n[t]||(this.__lastRenderedIndex=Il,s=0,Promise.resolve(o).then(async t=>{for(;i.get();)await i.get();const e=r.deref();if(void 0!==e){const n=e.__values.indexOf(o);n>-1&&n<e.__lastRenderedIndex&&(e.__lastRenderedIndex=n,e.setValue(t))}}))}return dc}disconnected(){this.__weakThis.disconnect(),this.__pauser.pause()}reconnected(){this.__weakThis.reconnect(this),this.__pauser.resume()}});const Vl={asyncAppend:cl,asyncReplace:al,cache:hl,choose:(t,e,n)=>{for(const n of e){const e=n[0];if(e===t){const t=n[1];return t()}}return n?.()},classMap:fl,guard:ml,ifDefined:t=>t??fc,join:function*Ul(t,e){const n="function"==typeof e;if(void 0!==t){let s=-1;for(const r of t)s>-1&&(yield n?e(s):e),s++,yield r}},keyed:yl,live:vl,map:function*Fl(t,e){if(void 0!==t){let n=0;for(const s of t)yield e(s,n++)}},range:function*Bl(t,e,n=1){const s=void 0===e?0:t;e??=t;for(let t=s;n>0?t<e:e<t;t+=n)yield t},ref:nl,repeat:Rl,styleMap:Sl,templateContent:kl,unsafeHTML:Al,unsafeSVG:Nl,until:jl,when:function Hl(t,e,n){return t?e(t):n?.(t)}},zl=t=>{const e=Array.isArray(t)?t:[t];return Object.prototype.hasOwnProperty.call(e,"raw")||Object.defineProperty(e,"raw",{value:e}),e},Kl=t=>e=>Wl(e,t);function Wl(t,e){const n=[],s=[];let r=t,i=r.indexOf(e.delimiter.start);for(;i>=0;){if(r.indexOf(e.delimiter.end,i)<0)throw new Error(`missing end delimiter at: '${r}'`);n.push(r.substring(0,i));const t=ql(r.substring(i+e.delimiter.start.length),e);if(t.insertionPoint)r=t.remainingTmplStr,s.push(t.insertionPoint),i=r.indexOf(e.delimiter.start);else{const s=n.pop();r=s+t.remainingTmplStr,i=r.indexOf(e.delimiter.start,s.length)}}return n.push(r),t=>e.html(n,...s.map(e=>e(t)))}function ql(t,e){const n=Object.values(e.transformers).find(n=>n.test(t,e)),s=n?n.transform:e.transformVariable;return s(t,e)}function Gl(t,e){if("."===e)return t;let n=t;for(let t of e.split(".")){if(!n.hasOwnProperty(t))return"";n=n[t]}return n}function Jl(t,e){return function n(t){return null==t?"":""+t}(Gl(t,e))}const Yl=(t,{delimiter:e})=>{const n=t.indexOf(e.end),s=t.substring(0,n);return{remainingTmplStr:t.substring(n+e.end.length),insertionPoint:t=>Jl(t,s)}},Xl=t=>({test:t=>"{"===t[0],transform:(e,{delimiter:n})=>{const s=e.indexOf("}"+n.end);if(s<0)throw new Error(`missing end delimiter at: '${n.start}${e}'`);const r=e.substring(1,s);return{remainingTmplStr:e.substring(s+1+n.end.length),insertionPoint:e=>t(Jl(e,r))}}});function Ql(t){return[null,void 0,!1,0,NaN,""].some(e=>e===t)||t.length&&0===t.length}function Zl(t,e){const n=t.indexOf(e.end),s=t.substring(1,n),r=`${e.start}/${s}${e.end}`,i=t.indexOf(r);if(i<0)throw new Error(`missing end delimiter at: '${e.start}${t}'`);return{dataKey:s,innerTmpl:t.substring(n+e.start.length,i),remainingTmplStr:t.substring(i+r.length)}}const tu=()=>({test:t=>"#"===t[0],transform:(t,e)=>{const n=Zl(t,e.delimiter),s=Wl(n.innerTmpl,e);return{remainingTmplStr:n.remainingTmplStr,insertionPoint:t=>{const e=Gl(t,n.dataKey);return Ql(e)?"":e.map?e.map(t=>s(t)):s(t)}}}}),eu=()=>({test:t=>"^"===t[0],transform:(t,e)=>{const n=Zl(t,e.delimiter),s=Wl(n.innerTmpl,e);return{remainingTmplStr:n.remainingTmplStr,insertionPoint:t=>{const e=Gl(t,n.dataKey);return Ql(e)?e.map?e.map(t=>s(t)):s(t):""}}}}),nu=()=>({test:t=>"!"===t[0],transform:(t,{delimiter:e})=>({remainingTmplStr:t.substring(t.indexOf(e.end)+e.end.length),insertionPoint:void 0})}),su=()=>({test:t=>"="===t[0],transform:(t,e)=>{const n=e.delimiter.end.length,s=t.indexOf("="+e.delimiter.end);if(s<0)throw new Error(`missing end delimiter at: '${t}'`);const[r,i]=t.substring(1,s).split(" ");return e.delimiter.start=r,e.delimiter.end=i,{remainingTmplStr:t.substring(s+1+n),insertionPoint:void 0}}}),ru=t=>(e,...n)=>t(zl(e),...n);function iu(t,e){const n={start:"{{",end:"}}"};let s;if("function"==typeof t)s=((t,e)=>Kl({html:t,delimiter:{start:"{{",end:"}}"},transformVariable:Yl,transformers:{unsafeVariable:Xl(e),section:tu(),invertedSection:eu(),comment:{test:t=>"!"===t[0],transform:(t,{delimiter:e})=>({remainingTmplStr:t.substring(t.indexOf(e.end)+e.end.length),insertionPoint:void 0})},customDelimiterTransformer:su()}}))(ru(t),e),s.delimiter=n;else{const{html:e}=t,r=Object.assign({delimiter:n,transformers:{}},t,{html:ru(e)});s=Kl(r),s.delimiter=r.delimiter}return r=s,t=>{const{start:e,end:n}=r.delimiter,s=new RegExp(`\x3c!--\\s*${e}`,"g"),i=new RegExp(`${n}\\s*--\x3e`,"g"),o=new RegExp(`(${e}[#^/]?)\\s*([\\w\\.]+)\\s*(${n})`,"g"),a=(t instanceof HTMLTemplateElement?t.innerHTML:t).replace(s,e).replace(i,n).replace(o,"$1$2$3");return r(a)};var r}const ou={variable:Yl,unsafeVariable:Xl,section:tu,invertedSection:eu,comment:nu,customDelimiter:su},au=["this"],cu=["+","-","!"],lu=["=","+","-","*","/","%","^","==","!=",">","<",">=","<=","||","&&","??","&","===","!==","|","|>"],uu={"!":0,":":0,",":0,")":0,"]":0,"}":0,"|>":1,"?":2,"??":3,"||":4,"&&":5,"|":6,"^":7,"&":8,"!=":9,"==":9,"!==":9,"===":9,">=":10,">":10,"<=":10,"<":10,"+":11,"-":11,"%":12,"/":12,"*":12,"(":13,"[":13,".":13,"{":13},hu=["==","!=","<=",">=","||","&&","??","|>"],du=["===","!=="];var fu;!function(t){t[t.STRING=1]="STRING",t[t.IDENTIFIER=2]="IDENTIFIER",t[t.DOT=3]="DOT",t[t.COMMA=4]="COMMA",t[t.COLON=5]="COLON",t[t.INTEGER=6]="INTEGER",t[t.DECIMAL=7]="DECIMAL",t[t.OPERATOR=8]="OPERATOR",t[t.GROUPER=9]="GROUPER",t[t.KEYWORD=10]="KEYWORD",t[t.ARROW=11]="ARROW"}(fu||(fu={}));const pu=(t,e,n=0)=>({kind:t,value:e,precedence:n}),gu=t=>9===t||10===t||13===t||32===t,mu=t=>95===t||36===t||(t&=-33,65<=t&&t<=90),_u=t=>mu(t)||yu(t),yu=t=>48<=t&&t<=57;class bu{_input;_index=-1;_tokenStart=0;_next;constructor(t){this._input=t,this._advance()}nextToken(){for(;gu(this._next);)this._advance(!0);if(t=this._next,34===t||39===t)return this._tokenizeString();var t;if(mu(this._next))return this._tokenizeIdentOrKeyword();if(yu(this._next))return this._tokenizeNumber();if(46===this._next)return this._tokenizeDot();if(44===this._next)return this._tokenizeComma();if(58===this._next)return this._tokenizeColon();if((t=>43===t||45===t||42===t||47===t||33===t||38===t||37===t||60===t||61===t||62===t||63===t||94===t||124===t)(this._next))return this._tokenizeOperator();if((t=>40===t||41===t||91===t||93===t||123===t||125===t)(this._next))return this._tokenizeGrouper();if(this._advance(),void 0!==this._next)throw new Error(`Expected end of input, got ${this._next}`)}_advance(t){this._index++,this._index<this._input.length?(this._next=this._input.charCodeAt(this._index),!0===t&&(this._tokenStart=this._index)):this._next=void 0}_getValue(t=0){const e=this._input.substring(this._tokenStart,this._index+t);return 0===t&&this._clearValue(),e}_clearValue(){this._tokenStart=this._index}_tokenizeString(){const t="unterminated string",e=this._next;for(this._advance(!0);this._next!==e;){if(void 0===this._next)throw new Error(t);if(92===this._next&&(this._advance(),void 0===this._next))throw new Error(t);this._advance()}const n=pu(fu.STRING,(s=this._getValue(),s.replace(/\\(.)/g,(t,e)=>{switch(e){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"f":return"\f";default:return e}})));var s;return this._advance(),n}_tokenizeIdentOrKeyword(){do{this._advance()}while(_u(this._next));const t=this._getValue(),e=(n=t,-1!==au.indexOf(n)?fu.KEYWORD:fu.IDENTIFIER);var n;return pu(e,t)}_tokenizeNumber(){do{this._advance()}while(yu(this._next));return 46===this._next?this._tokenizeDot():pu(fu.INTEGER,this._getValue())}_tokenizeDot(){return this._advance(),yu(this._next)?this._tokenizeFraction():(this._clearValue(),pu(fu.DOT,".",13))}_tokenizeComma(){return this._advance(!0),pu(fu.COMMA,",")}_tokenizeColon(){return this._advance(!0),pu(fu.COLON,":")}_tokenizeFraction(){do{this._advance()}while(yu(this._next));return pu(fu.DECIMAL,this._getValue())}_tokenizeOperator(){this._advance();let t=this._getValue(2);if(-1!==du.indexOf(t))this._advance(),this._advance();else{if(t=this._getValue(1),"=>"===t)return this._advance(),pu(fu.ARROW,t);-1!==hu.indexOf(t)&&this._advance()}return t=this._getValue(),pu(fu.OPERATOR,t,uu[t])}_tokenizeGrouper(){const t=String.fromCharCode(this._next),e=pu(fu.GROUPER,t,uu[t]);return this._advance(!0),e}}const vu=(t,e)=>new wu(t,e).parse();class wu{_kind;_tokenizer;_ast;_token;_value;constructor(t,e){this._tokenizer=new bu(t),this._ast=e}parse(){return this._advance(),this._parseExpression()}_advance(t,e){if(!this._matches(t,e))throw new Error(`Expected kind ${t} (${e}), was ${this._token?.kind} (${this._token?.value})`);const n=this._tokenizer.nextToken();this._token=n,this._kind=n?.kind,this._value=n?.value}_matches(t,e){return!(t&&this._kind!==t||e&&this._value!==e)}_parseExpression(){if(!this._token)return this._ast.empty();const t=this._parseUnary();return void 0===t?void 0:this._parsePrecedence(t,0)}_parsePrecedence(t,e){if(void 0===t)throw new Error("Expected left to be defined.");for(;this._token;)if(this._matches(fu.GROUPER,"(")){const e=this._parseArguments();t=this._ast.invoke(t,void 0,e)}else if(this._matches(fu.GROUPER,"[")){const e=this._parseIndex();t=this._ast.index(t,e)}else if(this._matches(fu.DOT)){this._advance();const e=this._parseUnary();t=this._makeInvokeOrGetter(t,e)}else{if(this._matches(fu.KEYWORD))break;if(!(this._matches(fu.OPERATOR)&&this._token.precedence>=e))break;t="?"===this._value?this._parseTernary(t):this._parseBinary(t,this._token)}return t}_makeInvokeOrGetter(t,e){if(void 0===e)throw new Error("expected identifier");if("ID"===e.type)return this._ast.getter(t,e.value);if("Invoke"===e.type&&"ID"===e.receiver.type){const n=e.receiver;return this._ast.invoke(t,n.value,e.arguments)}throw new Error(`expected identifier: ${e}`)}_parseBinary(t,e){if(-1===lu.indexOf(e.value))throw new Error(`unknown operator: ${e.value}`);this._advance();let n=this._parseUnary();for(;(this._kind===fu.OPERATOR||this._kind===fu.DOT||this._kind===fu.GROUPER)&&this._token.precedence>e.precedence;)n=this._parsePrecedence(n,this._token.precedence);return this._ast.binary(t,e.value,n)}_parseUnary(){if(this._matches(fu.OPERATOR)){const t=this._value;if(this._advance(),"+"===t||"-"===t){if(this._matches(fu.INTEGER))return this._parseInteger(t);if(this._matches(fu.DECIMAL))return this._parseDecimal(t)}if(-1===cu.indexOf(t))throw new Error(`unexpected token: ${t}`);const e=this._parsePrecedence(this._parsePrimary(),13);return this._ast.unary(t,e)}return this._parsePrimary()}_parseTernary(t){this._advance(fu.OPERATOR,"?");const e=this._parseExpression();this._advance(fu.COLON);const n=this._parseExpression();return this._ast.ternary(t,e,n)}_parsePrimary(){switch(this._kind){case fu.KEYWORD:const t=this._value;if("this"===t)return this._advance(),this._ast.id(t);if(-1!==au.indexOf(t))throw new Error(`unexpected keyword: ${t}`);throw new Error(`unrecognized keyword: ${t}`);case fu.IDENTIFIER:return this._parseInvokeOrIdentifier();case fu.STRING:return this._parseString();case fu.INTEGER:return this._parseInteger();case fu.DECIMAL:return this._parseDecimal();case fu.GROUPER:return"("===this._value?this._parseParenOrFunction():"{"===this._value?this._parseMap():"["===this._value?this._parseList():void 0;case fu.COLON:throw new Error('unexpected token ":"');default:return}}_parseList(){const t=[];do{if(this._advance(),this._matches(fu.GROUPER,"]"))break;t.push(this._parseExpression())}while(this._matches(fu.COMMA));return this._advance(fu.GROUPER,"]"),this._ast.list(t)}_parseMap(){const t={};do{if(this._advance(),this._matches(fu.GROUPER,"}"))break;const e=this._value;(this._matches(fu.STRING)||this._matches(fu.IDENTIFIER))&&this._advance(),this._advance(fu.COLON),t[e]=this._parseExpression()}while(this._matches(fu.COMMA));return this._advance(fu.GROUPER,"}"),this._ast.map(t)}_parseInvokeOrIdentifier(){const t=this._value;if("true"===t)return this._advance(),this._ast.literal(!0);if("false"===t)return this._advance(),this._ast.literal(!1);if("null"===t)return this._advance(),this._ast.literal(null);if("undefined"===t)return this._advance(),this._ast.literal(void 0);const e=this._parseIdentifier(),n=this._parseArguments();return n?this._ast.invoke(e,void 0,n):e}_parseIdentifier(){if(!this._matches(fu.IDENTIFIER))throw new Error(`expected identifier: ${this._value}`);const t=this._value;return this._advance(),this._ast.id(t)}_parseArguments(){if(!this._matches(fu.GROUPER,"("))return;const t=[];do{if(this._advance(),this._matches(fu.GROUPER,")"))break;const e=this._parseExpression();t.push(e)}while(this._matches(fu.COMMA));return this._advance(fu.GROUPER,")"),t}_parseIndex(){this._advance();const t=this._parseExpression();return this._advance(fu.GROUPER,"]"),t}_parseParenOrFunction(){const t=this._parseArguments();if(this._matches(fu.ARROW)){this._advance();const e=this._parseExpression(),n=t?.map(t=>t.value)??[];return this._ast.arrowFunction(n,e)}return this._ast.paren(t[0])}_parseString(){const t=this._ast.literal(this._value);return this._advance(),t}_parseInteger(t=""){const e=this._ast.literal(parseInt(`${t}${this._value}`,10));return this._advance(),e}_parseDecimal(t=""){const e=this._ast.literal(parseFloat(`${t}${this._value}`));return this._advance(),e}}const Eu={"+":(t,e)=>t+e,"-":(t,e)=>t-e,"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,"||":(t,e)=>t||e,"&&":(t,e)=>t&&e,"??":(t,e)=>t??e,"|":(t,e)=>e(t),"|>":(t,e)=>e(t)},Ru={"+":t=>t,"-":t=>-t,"!":t=>!t};const{AttributePart:Ou,PropertyPart:xu,BooleanAttributePart:Cu,EventPart:Su}=Pc,Tu=new class ku{empty(){return{type:"Empty",evaluate:t=>t,getIds:t=>t}}literal(t){return{type:"Literal",value:t,evaluate(t){return this.value},getIds:t=>t}}id(t){return{type:"ID",value:t,evaluate(t){return"this"===this.value?t:t?.[this.value]},getIds(t){return t.push(this.value),t}}}unary(t,e){const n=Ru[t];return{type:"Unary",operator:t,child:e,evaluate(t){return n(this.child.evaluate(t))},getIds(t){return this.child.getIds(t)}}}binary(t,e,n){const s=Eu[e];return{type:"Binary",operator:e,left:t,right:n,evaluate(t){if("="===this.operator){if("ID"!==this.left.type&&"Getter"!==this.left.type&&"Index"!==this.left.type)throw new Error(`Invalid assignment target: ${this.left}`);const e=this.right.evaluate(t);let n,s;return"Getter"===this.left.type?(n=this.left.receiver.evaluate(t),s=this.left.name):"Index"===this.left.type?(n=this.left.receiver.evaluate(t),s=this.left.argument.evaluate(t)):"ID"===this.left.type&&(n=t,s=this.left.value),void 0===n?void 0:n[s]=e}return s(this.left.evaluate(t),this.right.evaluate(t))},getIds(t){return this.left.getIds(t),this.right.getIds(t),t}}}getter(t,e){return{type:"Getter",receiver:t,name:e,evaluate(t){return this.receiver.evaluate(t)?.[this.name]},getIds(t){return this.receiver.getIds(t),t}}}invoke(t,e,n){if(null!=e&&"string"!=typeof e)throw new Error("method not a string");return{type:"Invoke",receiver:t,method:e,arguments:n,evaluate(t){const n=this.receiver.evaluate(t),s=this.method?n:t?.this??t,r=this.method?n?.[e]:n,i=this.arguments??[],o=i.map(e=>e?.evaluate(t));return r?.apply?.(s,o)},getIds(t){return this.receiver.getIds(t),this.arguments?.forEach(e=>e?.getIds(t)),t}}}paren(t){return t}index(t,e){return{type:"Index",receiver:t,argument:e,evaluate(t){return this.receiver.evaluate(t)?.[this.argument.evaluate(t)]},getIds(t){return this.receiver.getIds(t),t}}}ternary(t,e,n){return{type:"Ternary",condition:t,trueExpr:e,falseExpr:n,evaluate(t){const e=this.condition.evaluate(t);return e?this.trueExpr.evaluate(t):this.falseExpr.evaluate(t)},getIds(t){return this.condition.getIds(t),this.trueExpr.getIds(t),this.falseExpr.getIds(t),t}}}map(t){return{type:"Map",entries:t,evaluate(e){const n={};if(t&&this.entries)for(const s in t){const t=this.entries[s];t&&(n[s]=t.evaluate(e))}return n},getIds(e){if(t&&this.entries)for(const n in t){const t=this.entries[n];t&&t.getIds(e)}return e}}}list(t){return{type:"List",items:t,evaluate(t){return this.items?.map(e=>e?.evaluate(t))},getIds(t){return this.items?.forEach(e=>e?.getIds(t)),t}}}arrowFunction(t,e){return{type:"ArrowFunction",params:t,body:e,evaluate(t){const e=this.params,n=this.body;return function(...s){const r=Object.fromEntries(e.map((t,e)=>[t,s[e]])),i=new Proxy(t??{},{set:(t,e,n)=>(r.hasOwnProperty(e)&&(r[e]=n),t[e]=n),get:(t,e)=>r.hasOwnProperty(e)?r[e]:t[e]});return n.evaluate(i)}},getIds(t){return this.body.getIds(t).filter(t=>!this.params.includes(t))}}}},$u=new Map,Pu=t=>t.replace(/-(-|\w)/g,(t,e)=>e.toUpperCase()),Au=(t,e)=>{let n=$u.get(t);if(void 0===n){if($u.has(t))return;if(t=t.trim(),t.startsWith("{{")&&t.endsWith("}}")){const e=t.substring(2,t.length-2).trim();n=new wu(e,Tu).parse(),$u.set(t,n)}}return n?.evaluate(e)},Lu=/(?<!\\){{(.*?)(?:(?<!\\)}})/g,Nu=t=>/(?:\\{{)|(?:\\}})/g.test(t),Du=t=>t.replaceAll(/\\{{/g,"{{").replace(/\\}}/g,"}}"),Iu={if:(t,e,n,s)=>{const r=t.getAttribute("if");if(null!==r&&Au(r,e))return Mu(t,e,n,s)},repeat:(t,e,n,s)=>{const r=t.getAttribute("repeat");if(null!==r){const i=Au(r,e);if(!i[Symbol.iterator])return fc;const o=Uu(t);let a=-1;const c=[];for(const t of i){a++;const r=Object.create(e);r.item=t,r.index=a,r.this=e.this??e;const i=[];for(const t of o.parts){const e=t.update(r,n,s);1===t.type?i.push(...e):i.push(e)}const l={_$litType$:o,values:i};c.push(l)}return c}}},ju=(t,e=Iu,n={},s)=>{const r=Uu(t),i=r.renderers;if(s){const e=Uu(s),r=e.renderers,o=i.super;void 0!==o?n={...i,...n,super:(t,e,n)=>(n={...r,...n,super:(t,e,n)=>Mu(s,t,e,n)},o(t,e,n))}:(n={...r,...i,...n},t=s)}else n={...i,...n};return s=>Mu(t,s,e,n)},Mu=(t,e,n=Iu,s={})=>{const r=Uu(t),i=[];for(const t of r.parts){const r=t.update(e,n,s);1===t.type?i.push(...r):i.push(r)}const o={_$litType$:r,values:i};return o},Vu=new Map,Uu=t=>{let e=Vu.get(t);return void 0===e&&Vu.set(t,e=Fu(t)),e},Fu=t=>{const e={h:void 0,el:t.cloneNode(!0),parts:[],renderers:{}},n=document.createTreeWalker(e.el.content,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT);let s=n.currentNode,r=-1;const i=[];for(;null!==(s=n.nextNode());)if(s.nodeType===Node.ELEMENT_NODE){r++;const t=s;if("TEMPLATE"===t.tagName){const n=t.getAttribute("type"),s=t.getAttribute("name"),o=t.getAttribute("call");if(null!==o||null!==n||null!==s){let a;if(t.parentNode.insertBefore(document.createComment(""),t),i.push(t),null!==o){const e=o.trim(),n=e.startsWith("{{")&&e.endsWith("}}");a=(s,r,i)=>{const a=t.getAttribute("data"),c=null===a?void 0:Au(a,s),l=n?Au(e,s):i[o];return l?.(c,r,i)}}else null!==n?a=(e,s,r)=>{const i=s[n];return i?.(t,e,s,r)}:("super"===s?e.renderers.super=(e,n,s)=>{const r=s.super,i=Uu(t);return s={...s,...i.renderers},r(e,n,s)}:e.renderers[s]=(e,n,s)=>Mu(t,e,n,s),a=(t,e,n)=>{const r=n[s];return r?.(t,e,n)});e.parts.push({type:2,index:r,update:a});continue}}const n=t.getAttributeNames();for(const s of n){const n=t.getAttribute(s),i=n.split(Lu);if(1===i.length){Nu(n)&&t.setAttribute(s,Du(n));continue}t.removeAttribute(s);let o=s,a=Ou;const c=s[0];"."===c?(o=Pu(s.substring(1)),a=xu):"?"===c?(o=s.substring(1),a=Cu):"@"===c&&(o=Pu(s.substring(1)),a=Su);const l=[Du(i[0])],u=[];for(let t=1;t<i.length;t+=2){const e=i[t];u.push(vu(e,Tu)),l.push(Du(i[t+1]))}e.parts.push({type:1,index:r,name:o,strings:l,ctor:a,update:(t,e,n)=>u.map(e=>e.evaluate(t))})}}else if(s.nodeType===Node.TEXT_NODE){let t=s;const i=t.textContent,o=i.split(Lu);o.length>1?t.textContent=Du(o[0]):Nu(i)&&(t.textContent=Du(i));for(let s=1;s<o.length;s+=2){const i=o[s],a=vu(i,Tu);e.parts.push({type:2,index:++r,update:(t,e)=>a.evaluate(t)});const c=new Text(o[s+1].replace("\\{{","{{"));t.parentNode.insertBefore(c,t.nextSibling),t.parentNode.insertBefore(document.createComment(""),t.nextSibling),t=c,n.currentNode=c}}for(const t of i)t.remove();return e};function Bu(t){const{handlers:e,renderers:n,superTemplate:s}=t??{};return t=>ju(function r(t){if(t instanceof HTMLTemplateElement)return t;if("string"==typeof t){const e=document.createElement("template");return e.innerHTML=t,e}throw new TypeError(`Type of template is not a valid. [typeof: ${typeof t}]`)}(t),e,n,s)}const Hu={mustache:iu(uc,Vl.unsafeHTML),stampino:Bu()};class zu{static _transformer=Hu.mustache;static compile(t,e){const{transformer:n}=Object.assign({transformer:zu._transformer},e),s=n(t),r=t=>s(t);return r.source=t instanceof HTMLTemplateElement?t.innerHTML:t,r}static setTransformer(t){const e=zu._transformer;return zu._transformer=t,e}static get builtins(){return Object.keys(Hu)}static getBuitinTransformer(t){return Hu[t]}}let Ku,Wu=0;const qu=t=>{Ku=t},Gu=()=>{Ku=null,Wu=0},Ju=Symbol("hook"),Yu=Symbol("effects"),Xu=Symbol("layoutEffects");class Qu{update;host;virtual;[Ju];[Yu];[Xu];constructor(t,e){this.update=t,this.host=e,this[Ju]=new Map,this[Yu]=[],this[Xu]=[]}run(t){qu(this);const e=t();return Gu(),e}_runEffects(t){const e=this[t];qu(this);for(const t of e)t.call(this);Gu()}runEffects(){this._runEffects(Yu)}runLayoutEffects(){this._runEffects(Xu)}teardown(){const t=this[Ju];for(const[,e]of t)"function"==typeof e.teardown&&e.teardown(),delete e.teardown}}const Zu=ft();const th=Lc(class eh extends Zc{_state;_renderer;_args;_elObserved;_disconnectedHandler;constructor(t){super(t),this._state=new Qu(()=>this.redraw(),this),this._renderer=ut,this._args=[]}render(t,e,...n){return this._renderer=e,this._args=n,this.observe(t),this.redraw(),dc}disconnected(){this._elObserved&&Is.utils.undetectify(this._elObserved),this._elObserved=void 0,this._state.teardown()}redraw(){this._state.run(()=>{const t=this._renderer(...this._args);this.setValue(t)}),this._state.runLayoutEffects(),Zu(()=>this._state.runEffects())}observe(t){if(this._disconnectedHandler)return;const{_$parent:e}=this;this._elObserved=e?.parentNode,this._elObserved&&(Is.utils.detectify(this._elObserved,t),this._elObserved.addEventListener("disconnected",this._disconnectedHandler=this.disconnected.bind(this)))}});class nh{id;state;constructor(t,e){this.id=t,this.state=e}}const sh=(t,...e)=>{const n=Wu++,s=Ku[Ju];let r=s.get(n);return r||(r=new t(n,Ku,...e),s.set(n,r)),r.update(...e)},rh=t=>sh.bind(null,t),ih=rh(class extends nh{args;constructor(t,e,n){super(t,e),this.updater=this.updater.bind(this),"function"==typeof n&&(n=n()),this.makeArgs(n)}update(){return this.args}updater(t){const[e]=this.args;if("function"==typeof t){const n=t;t=n(e)}$(e,t)||(this.makeArgs(t),this.state.update())}makeArgs(t){this.args=Object.freeze([t,this.updater])}}),oh=t=>rh(class extends nh{callback;lastValues;values;_teardown;constructor(e,n,s,r){super(e,n),t(n,this)}update(t,e){this.callback=t,this.values=e}call(){this.values&&!this.hasChanged()||this.run(),this.lastValues=this.values}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(){"function"==typeof this._teardown&&this._teardown()}hasChanged(){return!this.lastValues||this.values.some((t,e)=>!$(this.lastValues[e],t))}}),ah=(t,e)=>{t[Yu].push(e)},ch=oh(ah),lh=oh((t,e)=>{t[Xu].push(e)}),uh=rh(class extends nh{value;values;constructor(t,e,n,s){super(t,e),this.value=n(),this.values=s}update(t,e){return this.hasChanged(e)&&(this.values=e,this.value=t()),this.value}hasChanged(t=[]){return t.some((t,e)=>this.values[e]!==t)}}),hh=rh(class extends nh{reducer;currentState;constructor(t,e,n,s,r){super(t,e),this.dispatch=this.dispatch.bind(this),this.currentState=void 0!==r?r(s):s}update(t){return this.reducer=t,[this.currentState,this.dispatch]}dispatch(t){this.currentState=this.reducer(this.currentState,t),this.state.update()}});class dh{defaultValue;_value;constructor(t){this.provide=this.provide.bind(this),this.consume=this.consume.bind(this),this.defaultValue=t,this._value=t}provide(t,e){return this._value=t,m(e)?e(t):dc}consume(t){return t(this._value)}}const fh=rh(class extends nh{_ranEffect;constructor(t,e,n){super(t,e),this._ranEffect=!1,ah(e,this)}update(t){let e;return t.consume(t=>{e=t}),e}call(){this._ranEffect||(this._ranEffect=!0,this.state.update())}}),ph=th.bind(null,null);ph.with=th,ph.useState=ih,ph.useEffect=ch,ph.useLayoutEffect=lh,ph.useMemo=uh,ph.useRef=t=>uh(()=>({current:t}),[]),ph.useCallback=(t,e)=>uh(()=>t,e),ph.useReducer=hh,ph.createContext=t=>new dh(t),ph.useContext=fh;var gh,mh={};var _h=function yh(){if(gh)return mh;gh=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.TokenData=void 0,mh.parse=d,mh.compile=function t(e,n={}){const{encode:r=encodeURIComponent,delimiter:i=s}=n,o=e instanceof h?e:d(e,n),a=f(o.tokens,i,r);return function t(e={}){const[t,...n]=a(e);if(n.length)throw new TypeError(`Missing parameters: ${n.join(", ")}`);return t}},mh.match=function e(t,n={}){const{decode:i=decodeURIComponent,delimiter:o=s}=n,{regexp:a,keys:c}=p(t,n),l=c.map(t=>!1===i?r:"param"===t.type?i:t=>t.split(o).map(i));return function t(e){const n=a.exec(e);if(!n)return!1;const s=n[0],r=Object.create(null);for(let t=1;t<n.length;t++){if(void 0===n[t])continue;const e=c[t-1],s=l[t-1];r[e.name]=s(n[t])}return{path:s,params:r}}},mh.pathToRegexp=p,mh.stringify=function n(t){return t.tokens.map(function t(e,n,s){if("text"===e.type)return function r(t){return t.replace(/[{}()\[\]+?!:*]/g,"\\$&")}(e.value);if("group"===e.type)return`{${e.tokens.map(t).join("")}}`;const a=function c(t){const[e,...n]=t;return!!i.test(e)&&n.every(t=>o.test(t))}(e.name)&&function l(t){return"text"!==(null==t?void 0:t.type)||!o.test(t.value[0])}(s[n+1]),u=a?e.name:JSON.stringify(e.name);if("param"===e.type)return`:${u}`;if("wildcard"===e.type)return`*${u}`;throw new TypeError(`Unexpected token: ${e}`)}).join("")};const s="/",r=t=>t,i=/^[$_\p{ID_Start}]$/u,o=/^[$\u200c\u200d\p{ID_Continue}]$/u,a="https://git.new/pathToRegexpError",c={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function l(t){return t.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}class u{constructor(t){this.tokens=t}peek(){if(!this._peek){const t=this.tokens.next();this._peek=t.value}return this._peek}tryConsume(t){const e=this.peek();if(e.type===t)return this._peek=void 0,e.value}consume(t){const e=this.tryConsume(t);if(void 0!==e)return e;const{type:n,index:s}=this.peek();throw new TypeError(`Unexpected ${n} at ${s}, expected ${t}: ${a}`)}text(){let t,e="";for(;t=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)e+=t;return e}}class h{constructor(t){this.tokens=t}}function d(t,e={}){const{encodePath:n=r}=e,s=new u(function*l(t){const e=[...t];let n=0;function s(){let t="";if(i.test(e[++n]))for(t+=e[n];o.test(e[++n]);)t+=e[n];else if('"'===e[n]){let s=n;for(;n<e.length;){if('"'===e[++n]){n++,s=0;break}t+="\\"===e[n]?e[++n]:e[n]}if(s)throw new TypeError(`Unterminated quote at ${s}: ${a}`)}if(!t)throw new TypeError(`Missing parameter name at ${n}: ${a}`);return t}for(;n<e.length;){const t=e[n],r=c[t];if(r)yield{type:r,index:n++,value:t};else if("\\"===t)yield{type:"ESCAPED",index:n++,value:e[n++]};else if(":"===t){const t=s();yield{type:"PARAM",index:n,value:t}}else if("*"===t){const t=s();yield{type:"WILDCARD",index:n,value:t}}else yield{type:"CHAR",index:n,value:e[n++]}}return{type:"END",index:n,value:""}}(t));const d=function t(e){const r=[];for(;;){const i=s.text();i&&r.push({type:"text",value:n(i)});const o=s.tryConsume("PARAM");if(o){r.push({type:"param",name:o});continue}const a=s.tryConsume("WILDCARD");if(a){r.push({type:"wildcard",name:a});continue}const c=s.tryConsume("{");if(!c)return s.consume(e),r;r.push({type:"group",tokens:t("}")})}}("END");return new h(d)}function f(t,e,n){const s=t.map(t=>function s(t,e,n){if("text"===t.type)return()=>[t.value];if("group"===t.type){const s=f(t.tokens,e,n);return t=>{const[e,...n]=s(t);return n.length?[""]:[e]}}const s=n||r;if("wildcard"===t.type&&!1!==n)return n=>{const r=n[t.name];if(null==r)return["",t.name];if(!Array.isArray(r)||0===r.length)throw new TypeError(`Expected "${t.name}" to be a non-empty array`);return[r.map((e,n)=>{if("string"!=typeof e)throw new TypeError(`Expected "${t.name}/${n}" to be a string`);return s(e)}).join(e)]};return e=>{const n=e[t.name];if(null==n)return["",t.name];if("string"!=typeof n)throw new TypeError(`Expected "${t.name}" to be a string`);return[s(n)]}}(t,e,n));return t=>{const e=[""];for(const n of s){const[s,...r]=n(t);e[0]+=s,e.push(...r)}return e}}function p(t,e={}){const{delimiter:n=s,end:r=!0,sensitive:i=!1,trailing:o=!0}=e,a=[],c=[],u=i?"":"i",f=Array.isArray(t)?t:[t],p=f.map(t=>t instanceof h?t:d(t,e));for(const{tokens:t}of p)for(const e of g(t,0,[])){const t=m(e,n,a);c.push(t)}let _=`^(?:${c.join("|")})`;o&&(_+=`(?:${l(n)}$)?`),_+=r?"$":`(?=${l(n)}|$)`;const y=new RegExp(_,u);return{regexp:y,keys:a}}function*g(t,e,n){if(e===t.length)return yield n;const s=t[e];if("group"===s.type){const r=n.slice();for(const n of g(s.tokens,0,r))yield*g(t,e+1,n)}else n.push(s);yield*g(t,e+1,n)}function m(t,e,n){let s="",r="",i=!0;for(let o=0;o<t.length;o++){const c=t[o];if("text"!==c.type)if("param"!==c.type&&"wildcard"!==c.type);else{if(!i&&!r)throw new TypeError(`Missing text after "${c.name}": ${a}`);"param"===c.type?s+=`(${_(e,i?"":r)}+)`:s+="([\\s\\S]+)",n.push(c),r="",i=!1}else s+=l(c.value),r+=c.value,i||(i=c.value.includes(e))}return s}function _(t,e){return e.length<2?t.length<2?`[^${l(t+e)}]`:`(?:(?!${l(t)})[^${l(e)}])`:t.length<2?`(?:(?!${l(e)})[^${l(t)}])`:`(?:(?!${l(e)}|${l(t)})[\\s\\S])`}return mh.TokenData=h,mh}();const bh={TokenData:_h.TokenData,parse:_h.parse,compile:_h.compile,match:_h.match,stringify:_h.stringify,pathToRegexp:_h.pathToRegexp};!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.MVC_ROUTER_DECLARE=9007199254740991]="MVC_ROUTER_DECLARE",t[t.ERROR_MVC_ROUTER_ELEMENT_NOT_FOUND=CDP_DECLARE.DECLARE_ERROR_CODE(100,76,"router element not found.")]="ERROR_MVC_ROUTER_ELEMENT_NOT_FOUND",t[t.ERROR_MVC_ROUTER_ROUTE_CANNOT_BE_RESOLVED=CDP_DECLARE.DECLARE_ERROR_CODE(100,77,"Route cannot be resolved.")]="ERROR_MVC_ROUTER_ROUTE_CANNOT_BE_RESOLVED",t[t.ERROR_MVC_ROUTER_NAVIGATE_FAILED=CDP_DECLARE.DECLARE_ERROR_CODE(100,78,"Route navigate failed.")]="ERROR_MVC_ROUTER_NAVIGATE_FAILED",t[t.ERROR_MVC_ROUTER_INVALID_SUBFLOW_BASE_URL=CDP_DECLARE.DECLARE_ERROR_CODE(100,79,"Invalid sub-flow base url.")]="ERROR_MVC_ROUTER_INVALID_SUBFLOW_BASE_URL",void(t[t.ERROR_MVC_ROUTER_BUSY=CDP_DECLARE.DECLARE_ERROR_CODE(100,80,"In changing page process now.")]="ERROR_MVC_ROUTER_BUSY")}();const vh=st(globalThis.window),wh=st(globalThis.URL),Eh=t=>t.replace(/^(#\/)|^[#/]|\s+$/,"").replace(/^\s+$|(\/$)/,""),Rh=(t,e)=>Object.assign({"@id":Eh(t)},e),Oh=t=>{const e=new ye;return e.reject=()=>{void 0,e.resolve()},e},xh=(t,e)=>{const n=e.direct(t["@id"])?.state?.el;!t.el&&n&&(t.el=n)};class Ch{_stack=[];_index=0;get length(){return this._stack.length}get state(){return this.distance(0)}get id(){return this.state["@id"]}get index(){return this._index}set index(t){this._index=Math.trunc(t)}get array(){return this._stack.slice()}get isFirst(){return 0===this._index}get isLast(){return this._index===this._stack.length-1}at(t){return Dt(this._stack,t)}clearForward(){this._stack=this._stack.slice(0,this._index+1)}closest(t){t=Eh(t);const{_index:e}=this,n=this._stack.map((t,n)=>({index:n,distance:Math.abs(e-n),...t})).filter(e=>e["@id"]===t);return Lt(n,(t,e)=>t.distance>e.distance?1:-1,!0),n[0]?.index}direct(t,e){const n=this.closest(t),s=null==e?this._index:this.closest(e);if(null==s||null==n)return{direction:"missing"};{const t=n-s,e=0===t?"none":t<0?"back":"forward";return{direction:e,delta:t,index:n,state:this._stack[n]}}}distance(t){const e=this._index+t;if(e<0)throw new RangeError(`invalid array index. [length: ${this.length}, given: ${e}]`);return this.at(e)}noopStack=ut;pushStack(t){this._stack[++this._index]=t}replaceStack(t){this._stack[this._index]=t}seekStack(t){const e=this.closest(t["@id"]);null==e?this.pushStack(t):this._index=e}dispose(){this._stack.length=0,this._index=NaN}}const Sh=t=>{if(wh.canParse(t)){const{hash:e}=new wh(t);return Eh(e||t.substring(ms.length))}return Eh(t)},Th=t=>`/${Sh(t)}`,kh=Symbol("SessionHistory#signature");class $h extends Jt{_window;_mode;_popStateHandler;_stack=new Ch;_dfGo;constructor(t,e,n,s){super(),this[kh]=!0,this._window=t,this._mode=e,this._popStateHandler=this.onPopState.bind(this),this._window.addEventListener("popstate",this._popStateHandler),this.replace(n??Sh(this._window.location.href),s,{silent:!0})}dispose(){this._window.removeEventListener("popstate",this._popStateHandler),this._stack.dispose(),this.off(),delete this[kh]}async reset(t){if(Number.isNaN(this.index)||this._stack.length<=1)return;const{silent:e}=t??{},{location:n}=this._window,s=this._stack.state,r=n.href;this.setIndex(0),await this.clearForward();const i=n.href;if(!e){const t={df:Oh(),newId:Sh(i),oldId:Sh(r),postproc:"noop",prevState:s};await this.dispatchChangeInfo(this.state,t)}}get length(){return this._stack.length}get state(){return this._stack.state}get id(){return this._stack.id}get index(){return this._stack.index}get stack(){return this._stack.array}get canBack(){return!this._stack.isFirst}get canForward(){return!this._stack.isLast}at(t){return this._stack.at(t)}back(){return this.go(-1)}forward(){return this.go(1)}async go(t){if(this._dfGo)return this.index;if(!t)return await this.triggerEventAndWait("refresh",this.state,void 0),this.index;const e=this.index;try{this._dfGo=new ye,this._stack.distance(t),this._window.history.go(t),await this._dfGo}catch(t){void 0,this.setIndex(e)}finally{this._dfGo=void 0}return this.index}traverseTo(t){const{direction:e,delta:n}=this.direct(t);return"missing"===e?(void 0,Promise.resolve(this.index)):this.go(n)}push(t,e,n){return this.updateState("push",t,e,n??{})}replace(t,e,n){return this.updateState("replace",t,e,n??{})}clearForward(){return this._stack.clearForward(),this.clearForwardHistory()}closest(t){return this._stack.closest(t)}direct(t,e){return this._stack.direct(t,e)}setIndex(t){this._stack.index=t}toUrl(t){return"hash"===this._mode?`#/${t}`:_s(t)}async triggerEventAndWait(t,e,n){const s=[];this.publish(t,e,n,s),await Promise.all(s)}async updateState(t,e,n,s){const{silent:r,cancel:i}=s,{location:o,history:a}=this._window,c=Rh(e,n);e=c["@id"],"replace"===t&&0===this.index&&(c["@origin"]=!0);const l=o.href;a[`${t}State`](c,"",this.toUrl(e));const u=o.href;if(xh(c,this._stack),r)this._stack[`${t}Stack`](c);else{const e={df:new ye(i),newId:Sh(u),oldId:Sh(l),postproc:t,nextState:c};await this.dispatchChangeInfo(c,e)}return this.index}async dispatchChangeInfo(t,e){const n=((t,e)=>(t[O]=e,t))(t,e);this._window.dispatchEvent(new PopStateEvent("popstate",{state:n})),await e.df}async suppressEventListenerScope(t){try{this._window.removeEventListener("popstate",this._popStateHandler);const e=()=>new Promise(t=>{this._window.addEventListener("popstate",e=>{t(e.state)})});await t(e)}finally{this._window.addEventListener("popstate",this._popStateHandler)}}async rollbackHistory(t,e){const{history:n}=this._window;switch(t){case"replace":n.replaceState(this.state,"",this.toUrl(this.id));break;case"push":await this.suppressEventListenerScope(async t=>{const e=t();n.go(-1),await e});break;default:await this.suppressEventListenerScope(async t=>{const s=this.index-this.closest(e);if(0!==s){const e=t();s&&n.go(s),await e}})}}async clearForwardHistory(){await this.suppressEventListenerScope(async t=>{const e=t=>t?.["@origin"],{history:n}=this._window;let s=n.state;for(;!e(s);){const e=t();n.back(),s=await e}const r=t=>{const e={...t};return delete e.router,delete e["@params"],JSON.parse(JSON.stringify(e))};for(let t=1,e=this._stack.length;t<e;t++){const e=this._stack.at(t);n.pushState(r(e),"",this.toUrl(e["@id"]))}})}async onPopState(t){const{location:e}=this._window,[n,s]=(t=>{if(f(t)&&t[O]){const e=t[O];return delete t[O],[t,e]}return[t]})(t.state),r=s?.newId??Sh(e.href),i=s?.postproc??"seek",o=s?.df??this._dfGo??new ye,a=s?.prevState??this.state,c=s?.nextState??this.direct(r).state??Rh(r,n),{cancel:l,token:u}=ce.source();try{if(o.catch(ut),await this.triggerEventAndWait("changing",c,l),u.requested)throw u.reason;this._stack[`${i}Stack`](c),await this.triggerEventAndWait("refresh",c,a),o.resolve()}catch(t){await this.rollbackHistory(i,r),this.publish("error",t),o.reject(t)}}}function Ph(t,e,n){const{context:s,mode:r}=Object.assign({mode:"hash"},n);return new $h(s??vh,r,t,e)}const Ah=Symbol("MemoryHistory#signature");class Lh extends Jt{_stack=new Ch;constructor(t,e){super(),this[Ah]=!0,this.replace(t,e,{silent:!0})}dispose(){this._stack.dispose(),this.off(),delete this[Ah]}async reset(t){if(Number.isNaN(this.index)||this._stack.length<=1)return;const{silent:e}=t??{},n=this.state;this.setIndex(0),await this.clearForward();const s=this.state;if(!e){const t=Oh();void lt(()=>{void this.onChangeState("noop",t,s,n)}),await t}}get length(){return this._stack.length}get state(){return this._stack.state}get id(){return this._stack.id}get index(){return this._stack.index}get stack(){return this._stack.array}get canBack(){return!this._stack.isFirst}get canForward(){return!this._stack.isLast}at(t){return this._stack.at(t)}back(){return this.go(-1)}forward(){return this.go(1)}async go(t){const e=this.index;try{const e=t?this.state:void 0,n=this._stack.distance(t??0),s=new ye;void lt(()=>{void this.onChangeState("seek",s,n,e)}),await s}catch(t){void 0,this.setIndex(e)}return this.index}traverseTo(t){const{direction:e,delta:n}=this.direct(t);return"missing"===e?(void 0,Promise.resolve(this.index)):this.go(n)}push(t,e,n){return this.updateState("push",t,e,n??{})}replace(t,e,n){return this.updateState("replace",t,e,n??{})}async clearForward(){this._stack.clearForward()}closest(t){return this._stack.closest(t)}direct(t,e){return this._stack.direct(t,e)}setIndex(t){this._stack.index=t}async triggerEventAndWait(t,e,n){const s=[];this.publish(t,e,n,s),await Promise.all(s)}async updateState(t,e,n,s){const{silent:r,cancel:i}=s,o=Rh(e,n);if("replace"===t&&0===this.index&&(o["@origin"]=!0),xh(o,this._stack),r)this._stack[`${t}Stack`](o);else{const e=new ye(i);void lt(()=>{void this.onChangeState(t,e,o,this.state)}),await e}return this.index}async onChangeState(t,e,n,s){const{cancel:r,token:i}=ce.source();try{if(await this.triggerEventAndWait("changing",n,r),i.requested)throw i.reason;this._stack[`${t}Stack`](n),await this.triggerEventAndWait("refresh",n,s),e.resolve()}catch(t){this.publish("error",t),e.reject(t)}}}function Nh(t,e){return new Lh(t,e)}const Dh=(t,e,n,s)=>{const r=!!s,i=Object.assign({url:t,router:r?void 0:e},s,{query:{},params:{},path:n.path,"@params":r?void 0:n});return r?(o=i,JSON.parse(JSON.stringify(o))):i;var o},Ih=(t,e)=>{try{t=`/${Eh(t)}`;const{query:n,params:s}=e;let r=bh.compile(t)((t=>{const e={};if(t)for(const n of Object.keys(t))e[n]=String(t[n]);return e})(s));return n&&(r+=`?${Wn(n)}`),r}catch(e){throw Ke($e.ERROR_MVC_ROUTER_NAVIGATE_FAILED,`Construct route destination failed. [path: ${t}, detail: ${e.toString()}]`,e)}},jh=async t=>{const{"@params":e}=t;if(e.page)return!1;const{component:n,componentOptions:s}=e;if(m(n))try{e.page=new n(t,s)}catch{e.page=await n(t,s)}else f(n)?e.page=Object.assign({"@route":t,"@options":s},n):e.page={"@route":t,"@options":s};return!0},Mh=async t=>{if(t.$template)return!1;const e=t=>t instanceof HTMLTemplateElement?Is([...t.content.children]):Is(t),{content:n}=t;if(null==n)t.$template=Is();else if(a(n.selector)){const{selector:s,url:r}=n,i=Es(await ws(s,{url:r&&_s(r)}));if(!i)throw Error(`template load failed. [selector: ${s}, url: ${r}]`);t.$template=e(i)}else m(n)?t.$template=e(Is(await n())[0]):t.$template=e(Is(n)[0]);return!0},Vh=t=>{if(t.reverse)switch(t.direction){case"back":return"forward";case"forward":return"back"}return t.direction},Uh=(t,e)=>{try{return parseFloat(getComputedStyle(t[0])[`${e}Duration`])}catch{return 0}},Fh=(t,e,n)=>Promise.race([new Promise(n=>t[`${e}End`](n)),ht(1e3*n+100)]),Bh=async(t,e,n,s)=>{t.removeClass(e),t.addClass(s);const r=[];for(const e of["animation","transition"]){const n=Uh(t,e);n&&r.push(Fh(t,e,n))}await Promise.all(r),t.removeClass([n,s])};class Hh{_promises=[];register(t){this._promises.push(t)}get promises(){return this._promises}async complete(){await Promise.all(this._promises),this._promises.length=0}}class zh extends Jt{_routes={};_history;_$el;_raf;_historyChangingHandler;_historyRefreshHandler;_errorHandler;_cssPrefix;_transitionSettings;_navigationSettings;_lastRoute;_prevRoute;_subflowTransitionParams;_inChangingPage=!1;constructor(t,e){super();const{routes:n,start:s,el:r,window:i,history:o,initialPath:c,additionalStacks:l,cssPrefix:u,transition:h,navigation:d}=e;if(this._raf=i?.requestAnimationFrame??vh.requestAnimationFrame,this._$el=Is(t,r),!this._$el.length)throw Ke($e.ERROR_MVC_ROUTER_ELEMENT_NOT_FOUND,`Router element not found. [selector: ${t}]`);this._history=((t="hash",e,n)=>a(t)?"memory"===t?Nh(e??""):Ph(e,void 0,{mode:t,context:n}):t)(o,c,i),this._historyChangingHandler=this.onHistoryChanging.bind(this),this._historyRefreshHandler=this.onHistoryRefresh.bind(this),this._errorHandler=this.onHandleError.bind(this),this._history.on("changing",this._historyChangingHandler),this._history.on("refresh",this._historyRefreshHandler),this._history.on("error",this._errorHandler),this._$el.on("click","[href]",this.onAnchorClicked.bind(this)),this._cssPrefix=u??"cdp",this._transitionSettings=Object.assign({default:"none",reload:"none"},h),this._navigationSettings=Object.assign({method:"push"},d),((t,e)=>{const n=`\n    .${e}-transition-running {\n        pointer-events: none;\n    }\n    .${e}-hidden {\n        visibility: hidden;\n        pointer-events: none;\n    }\n    `,s=new t.CSSStyleSheet;s.replaceSync(n);const{document:r}=t,i=r.adoptedStyleSheets;r.adoptedStyleSheets=[...i,s]})(i??vh,this._cssPrefix),(async()=>{await this.register(n,!1),l?.length&&await this.pushPageStack(l,{noNavigate:!0}),s&&await this.refresh()})()}get el(){return this._$el[0]}get currentRoute(){return this._history.state}get isInSubFlow(){return!!this.findSubFlowParams(!1)}get canBack(){return this._history.canBack}get canForward(){return this._history.canForward}async register(t,e=!1){const n=[];for(const e of(t=>{const e=(t,n)=>{const s=[];for(const r of n)r.path=`${t.replace(/\/$/,"")}/${Eh(r.path)}`,s.push(r),r.routes&&s.push(...e(r.path,r.routes));return s};return e("",d(t)?t:t?[t]:[]).map(t=>{try{const{regexp:e,keys:n}=bh.pathToRegexp(t.path);t.regexp=e,t.paramKeys=n.filter(t=>a(t.name)).map(t=>t.name)}catch(t){void 0}return t})})(t)){this._routes[e.path]=e;const{content:t,prefetch:s}=e;t&&s&&n.push(e)}return n.length&&await this.setPrefetchContents(n),e&&await this.refresh(),this}async navigate(t,e){try{const n=this.findRouteContextParams(t);if(!n)throw Ke($e.ERROR_MVC_ROUTER_NAVIGATE_FAILED,`Route not found. [to: ${t}]`);const s=Object.assign({intent:void 0},e),r=Ih(t,s),i=Dh(r,this,n,s),o=s.method??this._navigationSettings.method;try{await this._history[o](r,i)}catch{}}catch(t){this.onHandleError(t)}return this}async pushPageStack(t,e){try{const{noNavigate:n,traverseTo:s}=e??{},r=d(t)?t:[t],i=r.filter(t=>!!t.route).map(t=>t.route);await this.register(i,!1),await this.suppressEventListenerScope(async()=>{for(const t of r){const{path:e,transition:n,reverse:s}=t,r=Th(e),i=this.findRouteContextParams(r);if(null==i)throw Ke($e.ERROR_MVC_ROUTER_ROUTE_CANNOT_BE_RESOLVED,`Route cannot be resolved. [path: ${e}]`,t);const o=Dh(r,this,i,{intent:void 0});o.transition=n,o.reverse=s,this._history.push(r,o,{silent:!0})}await this.waitFrame(),s&&await this._history.traverseTo(Th(s))}),n||await this.refresh()}catch(t){this.onHandleError(t)}return this}back(){return this.go(-1)}forward(){return this.go(1)}async go(t){return await this._history.go(t),this}async traverseTo(t){return await this._history.traverseTo(Th(t)),this}async beginSubFlow(t,e,n){try{const{transition:s,reverse:r}=n??{},i=Object.assign({transition:this._transitionSettings.default,reverse:!1,origin:this.currentRoute.url},e,{transition:s,reverse:r});this.evaluateSubFlowParams(i),this.currentRoute.subflow=i,await this.navigate(t,n)}catch(t){this.onHandleError(t)}return this}async commitSubFlow(t){const e=this.findSubFlowParams(!0);if(!e)return this;const{transition:n,reverse:s}=e.params;this._subflowTransitionParams=Object.assign({transition:n,reverse:s},t);const{additionalDistance:r,additionalStacks:i}=e.params,o=e.distance+r;return i?.length?(await this.suppressEventListenerScope(()=>this.go(-1*o)),await this.pushPageStack(i)):await this.go(-1*o),await this._history.clearForward(),this}async cancelSubFlow(t){const e=this.findSubFlowParams(!0);if(!e)return this;const{transition:n,reverse:s}=e.params;return this._subflowTransitionParams=Object.assign({transition:n,reverse:s},t),await this.go(-1*e.distance),await this._history.clearForward(),this}transitionSettings(t){const e={...this._transitionSettings};return t&&Object.assign(this._transitionSettings,t),e}navigationSettings(t){const e={...this._navigationSettings};return t&&Object.assign(this._navigationSettings,t),e}async refresh(t=1){switch(t){case 1:return this.go();case 2:return this.releaseCacheContents(void 0),this._prevRoute&&(this._prevRoute.el=null),this.go();default:return void 0,this}}evaluateSubFlowParams(t){let e=0;if(t.base){const n=Eh(t.base);let s=!1;const{index:r,stack:i}=this._history;for(let t=r;t>=0;t--,e++)if(i[t]["@id"]===n){s=!0;break}if(!s)throw Ke($e.ERROR_MVC_ROUTER_INVALID_SUBFLOW_BASE_URL,`Invalid sub-flow base url. [url: ${t.base}]`)}else t.base=this.currentRoute.url;Object.assign(t,{additionalDistance:e})}findSubFlowParams(t){const e=this._history.stack;for(let n=e.length-1,s=0;n>=0;n--,s++)if(e[n].subflow){const r=e[n].subflow;return t&&delete e[n].subflow,{distance:s,params:r}}}makeRouteChangeInfo(t,e){const n=t.intent;delete t.intent;const s=e??this._lastRoute,r=this._history.direct(t["@id"],s?.["@id"]).direction,i=new Hh,o=!s||t.url===s.url,{transition:a,reverse:c}=this._subflowTransitionParams??(o?{transition:this._transitionSettings.reload,reverse:!1}:"back"!==r?t:s);return{router:this,from:s,to:t,direction:r,asyncProcess:i,reload:o,transition:a,reverse:c,intent:n}}findRouteContextParams(t){const e=`/${Eh(t.split("?")[0])}`;for(const t of Object.keys(this._routes)){const{regexp:n}=this._routes[t];if(n.test(e))return this._routes[t]}}triggerPageCallback(t,e,n){const s=kt(`page-${t}`);if(m(e?.[s])){const t=e[s](n);t instanceof le&&n.asyncProcess&&n.asyncProcess.register(t)}}waitFrame(){return ys(1,this._raf)}async changePage(t,e){try{this._inChangingPage=!0,(t=>{const{url:e}=t;t.query=e.includes("?")?Jn(Eh(e)):{},t.params={};const{regexp:n,paramKeys:s}=t["@params"];if(s.length){const r=n.exec(e)?.map((t,e)=>({value:t,key:s[e-1]}));for(const e of r)null!=e.key&&null!=e.value&&k(t.params,e.key,Gn(e.value))}})(t);const n=this.makeRouteChangeInfo(t,e);this._subflowTransitionParams=void 0;const[s,r,i,o]=await this.prepareChangeContext(n),a=await this.transitionPage(s,r,i,o,n);this.updateChangeContext(r,o,n,a),t.url===this.findSubFlowParams(!1)?.params.origin&&(this.findSubFlowParams(!0),await this._history.clearForward()),await this.treatPrefetchContents(),this.publish("changed",n)}finally{this._inChangingPage=!1}}async prepareChangeContext(t){const e=t.to,n=t.from,{"@params":s}=e,{"@params":r}=n??{};await jh(e),await Mh(s),t.samePageInstance=r?.page&&r.page===s.page;const{reload:i,samePageInstance:o,asyncProcess:a}=t;!i&&o?await this.cloneContent(e,s,n,t,a):e.el||await this.loadContent(e,s,t,a);const c=Is(e.el),l=s.page;return c.isConnected||await this.mountContent(c,l,t,a),[l,c,i&&{}||(r?.page??{}),i&&Is(null)||Is(n?.el)]}async cloneContent(t,e,n,s,r){t.el=n.el,n.el=t.el?.cloneNode(!0),Is(n.el).removeAttr("id").insertBefore(t.el),Is(t.el).addClass(`${this._cssPrefix}-hidden`).removeClass([`${this._cssPrefix}-page-current`,`${this._cssPrefix}-page-previous`]),this.publish("cloned",s),this.triggerPageCallback("cloned",e.page,s),await r.complete()}async loadContent(t,e,n,s){let r=!0;if(!t.el){const n=this._routes[t.path]["@route"]?.el;r=!n,n?t.el=n:e.$template?.isConnected?(t.el=e.$template[0],e.$template=e.$template.clone()):t.el=e.$template.clone()[0]}t!==this._routes[t.path]["@route"]&&(this._routes[t.path]["@route"]=t),r&&(this.publish("loaded",n),await s.complete(),this.triggerPageCallback("init",e.page,n),await s.complete())}async mountContent(t,e,n,s){t.addClass(`${this._cssPrefix}-hidden`),this._$el.append(t),this.publish("mounted",n),this.triggerPageCallback("mounted",e,n),await s.complete()}unmountContent(t){const e=Is(t.el),n=t["@params"].page;e.isConnected&&(e.detach(),this.publish("unmounted",t),this.triggerPageCallback("unmounted",n,t)),t.el&&(t.el=null,this.publish("unloaded",t),this.triggerPageCallback("removed",n,t))}async transitionPage(t,e,n,s,r){const i=r.transition??this._transitionSettings.default,{"enter-from-class":o,"enter-active-class":a,"enter-to-class":c,"leave-from-class":l,"leave-active-class":u,"leave-to-class":h}=this._transitionSettings,d=o??`${i}-enter-from`,f=a??`${i}-enter-active`,p=c??`${i}-enter-to`,g=l??`${i}-leave-from`,m=u??`${i}-leave-active`,_=h??`${i}-leave-to`;return await this.beginTransition(t,e,d,f,n,s,g,m,r),await this.waitFrame(),await Promise.all([Bh(e,d,f,p),Bh(s,g,m,_)]),await this.waitFrame(),await this.endTransition(t,e,n,s,r),i}async beginTransition(t,e,n,s,r,i,o,a,c){this._$el.addClass([`${this._cssPrefix}-transition-running`,`${this._cssPrefix}-transition-direction-${Vh(c)}`]),e.addClass([n,`${this._cssPrefix}-transition-running`]).removeClass(`${this._cssPrefix}-hidden`).reflow().addClass(s),i.addClass([o,a,`${this._cssPrefix}-transition-running`]),this.publish("before-transition",c),this.triggerPageCallback("before-leave",r,c),this.triggerPageCallback("before-enter",t,c),await c.asyncProcess.complete()}async endTransition(t,e,n,s,r){e[0]!==s[0]&&s.addClass(`${this._cssPrefix}-hidden`),e.removeClass([`${this._cssPrefix}-transition-running`]),s.removeClass([`${this._cssPrefix}-transition-running`]),this._$el.removeClass([`${this._cssPrefix}-transition-running`,`${this._cssPrefix}-transition-direction-${Vh(r)}`]),this.triggerPageCallback("after-leave",n,r),this.triggerPageCallback("after-enter",t,r),this.publish("after-transition",r),await r.asyncProcess.complete()}updateChangeContext(t,e,n,s){const{from:r,reload:i,samePageInstance:o,direction:a,to:c}=n,l=r,u=c,h=!i;t[0]!==e[0]&&(e.removeClass(`${this._cssPrefix}-page-current`).addClass(`${this._cssPrefix}-page-previous`),t.addClass(`${this._cssPrefix}-page-current`),h&&this._prevRoute&&(this._prevRoute.el?.classList.remove(`${this._cssPrefix}-page-previous`),this.treatDomCacheContents(u,this._prevRoute))),h&&(this._prevRoute=l,o&&(e.detach(),t.addClass(`${this._cssPrefix}-page-previous`),this._prevRoute&&(this._prevRoute.el=null))),this._lastRoute=this.currentRoute,"forward"===a&&s&&(this._lastRoute.transition=s)}releaseCacheContents(t){for(const e of Object.keys(this._routes)){const n=this._routes[e]["@route"];n&&(null==t?this.unmountContent(n):n.el===t&&(n.el=null))}for(const e of this._history.stack)(null==t&&e.el||e.el===t)&&(e.el=null)}treatDomCacheContents(t,e){if(e.el&&e.el!==this.currentRoute.el){const n=Is(e.el),s=n.data("dom-cache");if("connect"!==s){const r=e["@params"].page;n.detach();const i=e["@params"].page!==t["@params"].page;i&&(this.publish("unmounted",e),this.triggerPageCallback("unmounted",r,e)),"memory"!==s&&(this.releaseCacheContents(e.el),e.el=null,i&&(this.publish("unloaded",e),this.triggerPageCallback("removed",r,e)))}}}async setPrefetchContents(t){const e=(t,e)=>{const n=Dh(t.prefetch,this,t);return n.el=e,n},n=t=>({router:this,to:t,direction:"none",asyncProcess:new Hh,reload:!1});for(const s of t){const t=s["@route"]?.el;if(!t||this.currentRoute.el!==t&&this._lastRoute?.el!==t&&this._prevRoute?.el!==t){await Mh(s);const t=s.$template[0];if(!t.isConnected){const r=e(s,t);await jh(r);const i=n(r),{asyncProcess:o}=i;await this.loadContent(r,s,i,o),await this.mountContent(Is(t),s.page,i,o)}}}}async treatPrefetchContents(){const t=[],e=this.currentRoute.el?.querySelectorAll("[data-prefetch]")??[];for(const n of e){const e=Is(n);if(!1!==e.data("prefetch")){const n=e.attr("href"),s=this.findRouteContextParams(n);s&&(s.prefetch=n,t.push(s))}}await this.setPrefetchContents(t)}onHistoryChanging(t,e,n){if(this._inChangingPage)return e(Ke($e.ERROR_MVC_ROUTER_BUSY)),void 0;const s=this.makeRouteChangeInfo(t,void 0);this.publish("will-change",s,e),n.push(...s.asyncProcess.promises)}onHistoryRefresh(t,e,n){const s=t=>{const e=`/${t["@id"]}`,n=this.findRouteContextParams(e);if(null==n)throw Ke($e.ERROR_MVC_ROUTER_ROUTE_CANNOT_BE_RESOLVED,`Route cannot be resolved. [path: ${e}]`,t);return null==t["@params"]&&Object.assign(t,Dh(e,this,n)),t.el??=this._history.direct(t["@id"])?.state?.el,t};try{n.push(this.changePage(s(t),e))}catch(t){this.onHandleError(t)}}onHandleError(t){this.publish("error",He(t)?t:Ke($e.ERROR_MVC_ROUTER_NAVIGATE_FAILED,"Route navigate failed.",t))}onAnchorClicked(t){const e=Is(t.target).closest("[href]");if(e.data("prevent-router"))return;t.preventDefault();const n=e.attr("href"),s=e.data("transition"),r=e.data("navigate-method"),i="push"===r||"replace"===r?{method:r}:{};"#"===n?void this.back():void this.navigate(n,{transition:s,...i})}async suppressEventListenerScope(t){try{return this._history.off("changing",this._historyChangingHandler),this._history.off("refresh",this._historyRefreshHandler),this._history.off("error",this._errorHandler),await t()}finally{this._history.on("changing",this._historyChangingHandler),this._history.on("refresh",this._historyRefreshHandler),this._history.on("error",this._errorHandler)}}}function Kh(t,e){return new zh(t,Object.assign({start:!0},e))}!function(){let t=CDP_DECLARE.RESULT_CODE;t[t.APP_DECLARE=9007199254740991]="APP_DECLARE",void(t[t.ERROR_APP_CONTEXT_NEED_TO_BE_INITIALIZED=CDP_DECLARE.DECLARE_ERROR_CODE(100,81,"AppContext need to be initialized with options at least once.")]="ERROR_APP_CONTEXT_NEED_TO_BE_INITIALIZED")}();const Wh=st(globalThis.window),qh=async(t,e)=>{null!=e&&await new Promise(n=>{t.addEventListener(e,n,{once:!0})})},Gh=[];class Jh extends Jt{_window;_router;_ready=new ye;_extension;constructor(t){super();const{main:e,window:n,routes:s}=t,r=Object.assign({},t,{routes:s.concat(...Gh),start:!1});this._window=n??Wh,this._router=Kh(e,r),this.initialize(t)}get router(){return this._router}get ready(){return this._ready}get activePage(){return this._router.currentRoute["@params"]?.page||{}}get orientation(){const t=Is(this._window);return t.width()<t.height()?"portrait":"landscape"}get extension(){return this._extension}set extension(t){this._extension=t}async changeLanguage(t,e){const n=await oo(t,e);return await this._router.refresh(2),this.publish("languagechange",io(),n),n}isCurrentPath(t){const e=Th(t),n=Th(this._router.currentRoute["@id"]);return e===n}async initialize(t){const{splash:e,i18n:n,waitForReady:s,documentEventReady:r,documentEventBackButton:i,start:o}=t,{_window:a}=this;a.addEventListener("error",this.onGlobalError.bind(this)),a.addEventListener("unhandledrejection",this.onGlobalUnhandledRejection.bind(this)),await(async t=>{"loading"===t.readyState&&await new Promise(e=>{t.addEventListener("DOMContentLoaded",e,{once:!0})})})(a.document),await Promise.all([ro(n),m(s)?s(this):s,qh(a.document,r)]),a.document.addEventListener(i,this.onHandleBackKey.bind(this)),a.addEventListener("orientationchange",this.onHandleOrientationChanged.bind(this)),this._router.on("loaded",this.onPageLoaded.bind(this)),o&&await this._router.refresh(),Is(e,a.document).remove(),this._ready.resolve(),this.publish("ready",this)}onPageLoaded(t){ao(t.to.el)}onGlobalError(t){void 0}onGlobalUnhandledRejection(t){void 0}onHandleBackKey(t){this.publish("backbutton",t)}async onHandleOrientationChanged(){const{requestAnimationFrame:t,screen:e}=this._window;await ys(1,t),this.publish("orientationchange",this.orientation,e.orientation.angle)}}let Yh;const Xh=Symbol("page-view:properties");t.$cdp=O,t.ASSIGN_RESULT_CODE=Le,t.AppContext=t=>{const e=(n=Object.assign({main:"#app",start:!0,routes:[],documentEventBackButton:"backbutton"},t),Object.assign({},r(),s("Config"),n));var n;if(null==t&&null==Yh)throw Ke($e.ERROR_APP_CONTEXT_NEED_TO_BE_INITIALIZED,"AppContext should be initialized with options at least once.");return e.reset&&(Yh=void 0,(()=>{const t=Zi;delete t.options,delete t.language,delete t.languages,delete t.isInitialized})()),Yh??=new Jh(e),Yh},t.ArrayCursor=class Qh{_array;_bof;_eof;_index;constructor(t,e=0){this._array=t,this._index=e,this.valid()?this._bof=this._eof=!1:(this._index=-1,this._bof=!0,this._eof=!1)}reset(t=[],e=-1){return this._array=t,this._index=e,this.valid()?this._bof=this._eof=!1:(this._index=-1,this._bof=!0,this._eof=!1),this}get current(){return this._array[this._index]}get index(){return this._index}get length(){return this._array.length}get isBOF(){return this._bof}get isEOF(){return this._eof}get array(){return this._array}moveFirst(){return this._index=0,this._bof=this._eof=!1,this.valid()||(this._index=-1,this._bof=!0),this}moveLast(){return this._index=this._array.length-1,this._bof=this._eof=!1,this.valid()||(this._eof=!0),this}moveNext(){return this._bof?(this._bof=!1,this._index=0):this._index++,this.valid()||(this._index=-1,this._eof=!0),this}movePrevious(){return this._eof?(this._eof=!1,this._index=this.length-1):this._index--,this.valid()||(this._index=-1,this._bof=!0),this}seek(t){return this._index="number"==typeof t?t:this._array.findIndex(t),this.valid()||(this._index=-1,this._bof=!1,this._eof=!0),this}valid(){return 0<=this._index&&this._index<this._array.length}},t.AsyncDirective=Zc,t.Base64=hn,t.BlobURL=class Zh{static create(...t){for(const e of t){const t=jn.get(e);if(t)continue;const n=ln.createObjectURL(e);jn.set(e,n),Mn.add(n)}}static clear(){for(const t of Mn)ln.revokeObjectURL(t);Mn.clear()}static get(t){const e=jn.get(t);if(e)return e;const n=ln.createObjectURL(t);return jn.set(t,n),Mn.add(n),n}static has(t){return jn.has(t)}static revoke(...t){for(const e of t){const t=jn.get(e);t&&(ln.revokeObjectURL(t),jn.delete(e),Mn.delete(t))}}},t.CancelToken=ce,t.CancelablePromise=fe,t.Collection=Pa,t.DECLARE_ERROR_CODE=Ae,t.DECLARE_SUCCESS_CODE=Pe,t.Deferred=ye,t.Directive=Nc,t.DynamicCondition=ca,t.EventBroker=Yt,t.EventPublisher=Jt,t.EventReceiver=te,t.EventSource=ne,t.FAILED=De,t.Hook=nh,t.InlineWorker=us,t.MemoryStorage=We,t.Model=$o,t.NativePromise=le,t.ObservableArray=ke,t.ObservableObject=Ce,t.PageView=class td extends Fa{[Xh];constructor(t,e){super(e),this[Xh]={route:t}}get active(){return((t,e)=>{for(const n of t.classList)if(n.includes(e))return!0;return!1})(this.el,"page-current")}get"@route"(){return this[Xh].route}get _route(){return this["@route"]}get _router(){return this[Xh].route?.router}render(...t){}onPageInit(t){}onPageMounted(t){}onPageCloned(t,e){}onPageBeforeEnter(t,e,n,s){}onPageAfterEnter(t,e,n,s){}onPageBeforeLeave(t,e,n,s){}onPageAfterLeave(t,e,n,s){}onPageUnmounted(t){}onPageRemoved(t){}pageInit(t){const{to:e}=t;this[Xh].route=e;const{el:n}=e;return n!==this.el&&this.setElement(n),this.onPageInit(e)}pageMounted(t){const{to:e}=t;return this[Xh].route=e,this.onPageMounted(e)}pageCloned(t){const{to:e,from:n}=t;return this[Xh].route=e,this.onPageCloned(e,n)}pageBeforeEnter(t){const{to:e,from:n,direction:s,intent:r}=t;return this[Xh].route=e,this.onPageBeforeEnter(e,n,s,r)}pageAfterEnter(t){const{to:e,from:n,direction:s,intent:r}=t;return this[Xh].route=e,this.onPageAfterEnter(e,n,s,r)}pageBeforeLeave(t){const{to:e,from:n,direction:s,intent:r}=t;return this[Xh].route=n,this.onPageBeforeLeave(n,e,s,r)}pageAfterLeave(t){const{to:e,from:n,direction:s,intent:r}=t;return this[Xh].route=n,this.onPageAfterLeave(n,e,s,r)}pageUnmounted(t){this.onPageUnmounted(t)}pageRemoved(t){this.release(),this[Xh].route=void 0,this.onPageRemoved(t)}},t.PartType=Ac,t.Promise=fe,t.PromiseManager=class ed{_pool=new Map;add(t,e){this._pool.set(t,e?.cancel);const n=()=>{this._pool.delete(t),e&&e.close()};return t.then(n,n),t}release(){this._pool.clear()}promises(){return[...this._pool.keys()]}all(){return Promise.all(this.promises())}race(){return Promise.race(this.promises())}wait(){return ge(this.promises())}allSettled(){return Promise.allSettled(this.promises())}any(){return Promise.any(this.promises())}abort(t){for(const e of this._pool.values())e&&e(t??new Error("abort"));return ge(this.promises())}},t.RESULT_CODE=$e,t.RESULT_VALID_ATTRS=ko,t.Registry=class nd extends Jt{_storage;_rootKey;_defaultOptions;_store={};constructor(t,e,n){super(),this._storage=t,this._rootKey=e,this._defaultOptions={jsonSpace:n}}get rootKey(){return this._rootKey}get storage(){return this._storage}async load(t){t=t??{},this._store=await this._storage.getItem(this._rootKey,t)||{},t.silent||lt(()=>this.publish("change","*"))}async save(t){const e={...this._defaultOptions,...t};e.silent||this.publish("will-save"),await this._storage.setItem(this._rootKey,this._store,e)}read(t,e){const{field:n}=e??{},s=String(t).split("/"),r=s.pop();let i,o=this.targetRoot(n);for(;i=s.shift();){if(!(i in o))return null;o=o[i]}return null!=o[r]?I(o[r]):null}write(t,e,n){const{field:s,noSave:r,silent:i}=n??{},o=null==e,a=String(t).split("/"),c=a.pop();let l,u=this.targetRoot(s);for(;l=a.shift();)if(l in u)u=u[l];else{if(o)return;u=u[l]={}}const h=o?null:e,d=vt(u[c]);$(d,h)||(o?delete u[c]:u[c]=I(h),r||this._storage.setItem(this._rootKey,this._store,{...this._defaultOptions,...n}),i||lt(()=>this.publish("change",t,h,d)))}delete(t,e){this.write(t,null,e)}clear(t){t=t??{},this._store={},this._storage.removeItem(this._rootKey,t),t.silent||this.publish("change",null,null,null)}targetRoot(t){return t?(this._store[t]=this._store[t]||{},this._store[t]):this._store}},t.Result=Fe,t.SUCCEEDED=Ie,t.TemplateBridge=zu,t.TemplateEngine=sn,t.View=Fa,t.ViewCore=Va,t.WebStorage=co,t._$LH=Pc,t.ajax=ss,t.appendArray=Wo,t.appendCollection=async function sd(t,e,n){const s=t.length,r=await Aa(t,n,(t,n)=>Wo(t,e,n));return Na("add",r,s,t.length-1,s)},t.assignValue=k,t.at=Dt,t.base64ToBinary=Sn,t.base64ToBlob=Cn,t.base64ToBuffer=function rd(t){return Sn(t).buffer},t.base64ToDataURL=function id(t,e="application/octet-stream"){return`data:${e};base64,${t}`},t.base64ToText=function od(t){return hn.decode(t)},t.binaryToBase64=On,t.binaryToBlob=En,t.binaryToBuffer=function ad(t){return t.buffer},t.binaryToDataURL=Rn,t.binaryToText=xn,t.blobToBase64=async function cd(t,e){return mn(await pn(t,e)).data},t.blobToBinary=async function ld(t,e){return new Uint8Array(await fn(t,e))},t.blobToBuffer=function ud(t,e){return fn(t,e)},t.blobToDataURL=vn,t.blobToText=function hd(t,e){const n=e??{},{encoding:s}=n;return gn(t,s,n)},t.bufferToBase64=function dd(t){return On(new Uint8Array(t))},t.bufferToBinary=function fd(t){return new Uint8Array(t)},t.bufferToBlob=function pd(t,e="application/octet-stream"){return new an([t],{type:e})},t.bufferToDataURL=wn,t.bufferToText=function gd(t){return xn(new Uint8Array(t))},t.camelize=kt,t.capitalize=St,t.changeLanguage=oo,t.checkCanceled=me,t.checkStatus=_e,t.className=E,t.classify=$t,t.clearArray=Ko,t.clearCollection=async function md(t,e){const n=t.length-1,s=await Aa(t,e,(t,e)=>Ko(t,e));return Na("remove",s,0,n)},t.clearInterval=ct,t.clearTemplateCache=function _d(){bs={},vs={}},t.clearTimeout=ot,t.combination=jt,t.computeDate=Ut,t.conditionalFix=da,t.convertSortKeys=Uo,t.convertUrlParamType=Gn,t.createEscaper=pt,t.createMemoryHistory=Nh,t.createMustacheTransformer=iu,t.createRef=()=>new tl,t.createRouter=Kh,t.createSessionHistory=Ph,t.createStampinoTransformer=Bu,t.createStorageDataSync=bo,t.dasherize=Pt,t.dataSyncNULL=uo,t.dataSyncREST=go,t.dataSyncSTORAGE=vo,t.dataURLToBase64=Nn,t.dataURLToBinary=Ln,t.dataURLToBlob=Pn,t.dataURLToBuffer=An,t.dataURLToText=function yd(t){return hn.decode(Nn(t))},t.debounce=dt,t.decapitalize=Tt,t.deepCopy=I,t.deepEqual=$,t.deepMerge=D,t.defaultCollatorProvider=function bd(t){if(null==t)return Lo;{const e=Lo;return Lo=t,e}},t.defaultSync=Eo,t.deserialize=In,t.diff=Q,t.difference=It,t.directive=Lc,t.directives=Vl,t.disposeMemoryHistory=function vd(t){t[Ah]&&t.dispose()},t.disposeSessionHistory=function wd(t){t[kh]&&t.dispose()},t.dom=Is,t.drop=Z,t.dropUndefined=vt,t.ensureObject=n,t.escapeHTML=mt,t.evaluateTemplate=Mu,t.every=async function Ed(t,e,n){for(const[s,r]of t.entries())if(!await e.call(n??this,r,s,t))return!1;return!0},t.exists=i,t.extendPromise=pe,t.filter=async function Rd(t,e,n){const s=await Mt(t,(t,s,r)=>e.call(n??this,t,s,r));return t.filter(()=>s.shift())},t.find=async function Od(t,e,n){for(const[s,r]of t.entries())if(await e.call(n??this,r,s,t))return r},t.findIndex=async function xd(t,e,n){for(const[s,r]of t.entries())if(await e.call(n??this,r,s,t))return s;return-1},t.fromBinaryString=bn,t.fromHexString=function Cd(t){const e=t.match(/.{1,2}/g);return new Uint8Array(null!=e?e.map(t=>parseInt(t,16)):[])},t.fromTypedData=bt,t.getBooleanComparator=jo,t.getConfig=r,t.getDateComparator=Do,t.getGenericComparator=Io,t.getGlobal=e,t.getGlobalNamespace=s,t.getLanguage=io,t.getLanguageList=()=>Zi.languages||[to.language],t.getNumberComparator=Mo,t.getStringComparator=No,t.getTemplate=async function Sd(t,e){const{type:n,url:s,noCache:r,callback:i}=Object.assign({type:"engine",noCache:!1},e);let o=await ws(t,{url:s,noCache:r});if(!o)throw new URIError(`cannot specified template resource. { selector: ${t},  url: ${s} }`);switch(m(i)&&(o=await i(o)),n){case"engine":return sn.compile(o instanceof HTMLTemplateElement?_t(o.innerHTML):o,e);case"bridge":return zu.compile(o,e);default:throw new TypeError(`[type: ${n}] is unknown.`)}},t.getWebDirectory=gs,t.groupBy=function Td(t,e){const{keys:n,sumKeys:s,groupKey:r}=e,i=r??"items",o=s??[];o.push(i);const a=t.reduce((t,e)=>{const s=n.reduce((t,n)=>t+String(e[n]),"");if(!(s in t)){const r=n.reduce((t,n)=>(k(t,n,e[n]),t),{});t[s]=o.reduce((t,e)=>(t[e]=0,t),r)}const r=t[s];for(const t of o)i===t?(r[t]=r[t]||[],r[t].push(e)):r[t]+=e[t];return t},{});return Object.values(a)},t.has=Y,t.hooks=ph,t.html=uc,t.i18n=Zi,t.idAttribute=Ao,t.indices=function kd(t,...e){const n=[...t.keys()],s=t.length,r=[...new Set(e)].sort((t,e)=>t<e?1:-1);for(const t of r)0<=t&&t<s&&n.splice(t,1);return n},t.initializeI18N=ro,t.insertArray=qo,t.insertCollection=async function $d(t,e,n,s){const r=await Aa(t,s,(t,s)=>qo(t,e,n,s));return Na("add",r,e,t.length-1,e)},t.instanceOf=function Pd(t,e){return"function"==typeof t&&e instanceof t},t.intersection=function Ad(...t){return t.reduce((t,e)=>t.filter(t=>e.includes(t)))},t.invert=X,t.isArray=d,t.isBigInt=function Ld(t){return"bigint"==typeof t},t.isBoolean=l,t.isCancelLikeError=Ct,t.isDOMClass=Qr,t.isEmptyObject=g,t.isFunction=m,t.isIterable=y,t.isModel=Po,t.isNullish=o,t.isNumber=c,t.isNumeric=_,t.isObject=f,t.isObservable=function Nd(t){return Boolean(t&&t[ve])},t.isPlainObject=p,t.isPrimitive=h,t.isResult=He,t.isStatusIn=function Dd(t){return!!Ft[t]},t.isString=a,t.isSymbol=u,t.isTypedArray=v,t.loadTemplateSource=ws,t.localize=ao,t.luid=Rt,t.makeCanceledResult=function Id(t,e){return new Fe($e.ABORT,t,{cause:e})},t.makeHook=rh,t.makeResult=Ke,t.map=Mt,t.memoryStorage=qe,t.mixins=J,t.noChange=dc,t.noop=ut,t.nothing=fc,t.omit=function jd(t,...e){C("typeOf","object",t);const n={};for(const s of Object.keys(t))!e.includes(s)&&k(n,s,t[s]);return n},t.once=function Md(t){let e;return function(...n){return t&&(e=t.call(this,...n),t=null),e}},t.ownInstanceOf=w,t.parseUrlQuery=Jn,t.path2regexp=bh,t.permutation=function t(e,n){const s=[];if(e.length<n)return[];if(1===n)for(const[t,n]of e.entries())s[t]=[n];else for(let r=0,i=e.length;r<i;r++){const i=e.slice(0);i.splice(r,1);const o=t(i,n-1);for(let t=0,n=o.length;t<n;t++)s.push([e[r]].concat(o[t]))}return s},t.pick=function Vd(t,...e){return C("typeOf","object",t),e.reduce((e,n)=>(n in t&&k(e,n,t[n]),e),{})},t.platform=li,t.post=lt,t.prepareTemplate=ju,t.queryItems=ga,t.queryPlatform=ci,t.randomInt=Ot,t.readAsArrayBuffer=fn,t.readAsDataURL=pn,t.readAsText=gn,t.reduce=async function Ud(t,e,n){if(t.length<=0&&void 0===n)throw TypeError("Reduce of empty array with no initial value");const s=void 0!==n;let r=s?n:t[0];for(const[n,i]of t.entries())(s||0!==n)&&(r=await e(r,i,n,t));return r},t.registerPage=t=>{Gh.push(t)},t.removeArray=Jo,t.removeCollection=async function Fd(t,e,n){const s=La(e),r=t.length-1,i=await Aa(t,n,(t,n)=>Jo(t,e,n));return Na("remove",i,s,r)},t.render=kc,t.reorderArray=Go,t.reorderCollection=async function Bd(t,e,n,s){const r=La([e,...n]),i=await Aa(t,s,(t,s)=>Go(t,e,n,s));return Na("reorder",i,r,t.length-1,e)},t.request=os,t.resetMemoryHistory=async function Hd(t,e){t[Ah]&&await t.reset(e)},t.resetSessionHistory=async function zd(t,e){t[kh]&&await t.reset(e)},t.restoreNullish=wt,t.result=tt,t.safe=st,t.sameClass=R,t.sameType=function Kd(t,e){return typeof t==typeof e},t.sample=function Wd(t,e){if(null==e)return t[Ot(t.length-1)];const n=t.slice(),s=n.length;e=Math.max(Math.min(e,s),0);const r=s-1;for(let t=0;t<e;t++){const e=Ot(t,r),s=n[t];n[t]=n[e],n[e]=s}return n.slice(0,e)},t.scheduler=ft,t.searchItems=ua,t.serialize=Dn,t.setInterval=at,t.setMixClassAttribute=G,t.setTimeout=it,t.setupHeaders=ns,t.shuffle=At,t.sleep=ht,t.some=async function qd(t,e,n){for(const[s,r]of t.entries())if(await e.call(n??this,r,s,t))return!0;return!1},t.sort=Lt,t.statusAddRef=Bt,t.statusRelease=Ht,t.statusScope=async function Gd(t,e){try{return Bt(t),await e()}finally{Ht(t)}},t.svg=hc,t.t=so,t.textToBase64=$n,t.textToBinary=kn,t.textToBlob=Tn,t.textToBuffer=function Jd(t){return kn(t).buffer},t.textToDataURL=function Yd(t,e="text/plain"){const n=$n(t);return`data:${e};base64,${n}`},t.thread=function Xd(t,e){const{cancel:n,args:s}=Object.assign({args:[]},e);if(n?.requested)throw n.reason;const r=`(self => {\n        self.addEventListener('message', async ({ data }) => {\n            try {\n                const result = await (${t.toString()})(...data);\n                self.postMessage(result);\n            } catch (e) {\n                setTimeout(function() { throw e; });\n            }\n        });\n    })(self);`,i=new us(r,e);n?.register(()=>i.terminate());const{token:o}=ce.source(n),a=new Promise((t,e)=>{i.onerror=t=>{t.preventDefault(),e(t),i.terminate()},i.onmessage=e=>{t(e.data),i.terminate()}},o);return i.postMessage(s),a},t.throttle=function Qd(t,e,n){const{leading:s,trailing:r}=Object.assign({leading:!0,trailing:!0},n);return dt(t,e,{leading:s,trailing:r,maxWait:e})},t.toAjaxDataStream=Qn,t.toAjaxParams=qn,t.toBinaryString=yn,t.toComparator=Vo,t.toHelpString=Me,t.toHexString=function Zd(t){return t.reduce((t,e)=>t+e.toString(16).toUpperCase().padStart(2,"0"),"")},t.toNameString=je,t.toQueryStrings=Wn,t.toResult=ze,t.toRouterPath=Th,t.toRouterStackId=Sh,t.toTemplateElement=Es,t.toTemplateString=function tf(t){return t instanceof HTMLTemplateElement?t.innerHTML:t},t.toTemplateStringsArray=zl,t.toTypedData=yt,t.toUrl=_s,t.transformer=ou,t.typeOf=function ef(t,e){return typeof e===t},t.underscored=function nf(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},t.unescapeHTML=_t,t.union=function sf(...t){return Nt(t.flat())},t.unique=Nt,t.verify=C,t.wait=ge,t.waitFrame=ys,t.waitIdle=function rf(t){return new Promise(e=>ps(()=>e(),t))},t.webRoot=ms,t.webStorage=lo,t.without=function of(t,...e){return It(t,e)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=runtime.min.map