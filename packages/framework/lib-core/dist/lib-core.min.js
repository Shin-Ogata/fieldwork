/*!
 * @cdp/lib-core 0.9.17
 *   core library collection
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t="undefined"!=typeof globalThis?globalThis:t||self,e(t.CDP=t.CDP||{}))}(this,(function(t){"use strict";function e(){return"object"==typeof globalThis?globalThis:Function("return this")()}function n(t,...n){let r=t??e();for(const t of n)r[t]=r[t]||{},r=r[t];return r}function r(t){return n(null,t)}function s(t="CDP",e="Config"){return n(r(t),e)}function o(t){return null!=t}function i(t){return null==t}function c(t){return"string"==typeof t}function a(t){return"number"==typeof t}function u(t){return"boolean"==typeof t}function l(t){return"symbol"==typeof t}function f(t){return!t||"function"!=typeof t&&"object"!=typeof t}const h=Array.isArray;function p(t){return Boolean(t)&&"object"==typeof t}function g(t){return!!p(t)&&(!Object.getPrototypeOf(t)||O(Object,t))}function d(t){if(!g(t))return!1;for(const e in t)return!1;return!0}function b(t){return"function"==typeof t}function y(t){return Symbol.iterator in Object(t)}const w={Int8Array:!0,Uint8Array:!0,Uint8ClampedArray:!0,Int16Array:!0,Uint16Array:!0,Int32Array:!0,Uint32Array:!0,Float32Array:!0,Float64Array:!0};function m(t){return!!w[E(t)]}function O(t,e){return null!=e&&"function"==typeof t&&Object.getPrototypeOf(e)===Object(t.prototype)}function E(t){if(null!=t){const e=t[Symbol.toStringTag];if(c(e))return e;if(b(t)&&t.prototype&&null!=t.name)return t.name;{const e=t.constructor;if(b(e)&&e===Object(e.prototype).constructor)return e.name}}return Object.prototype.toString.call(t).slice(8,-1)}function _(t,e){return null==t&&null==e?E(t)===E(e):null!=t&&null!=e&&Object.getPrototypeOf(t)===Object.getPrototypeOf(e)}const S=Symbol("@cdp"),v={notNullish:(t,e)=>{if(null==t)throw o(e)||(e=`${E(t)} is not a valid value.`),new TypeError(e)},typeOf:(t,e,n)=>{if(typeof e!==t)throw o(n)||(n=`Type of ${E(e)} is not ${t}.`),new TypeError(n)},array:(t,e)=>{if(!h(t))throw o(e)||(e=`${E(t)} is not an Array.`),new TypeError(e)},iterable:(t,e)=>{if(!(Symbol.iterator in Object(t)))throw o(e)||(e=`${E(t)} is not an iterable object.`),new TypeError(e)},instanceOf:(t,e,n)=>{if(!(e instanceof t))throw o(n)||(n=`${E(e)} is not an instance of ${t.name}.`),new TypeError(n)},ownInstanceOf:(t,e,n)=>{if(null==e||Object.getPrototypeOf(e)!==Object(t.prototype))throw o(n)||(n=`The object is not own instance of ${t.name}.`),new TypeError(n)},notOwnInstanceOf:(t,e,n)=>{if(null!=e&&Object.getPrototypeOf(e)===Object(t.prototype))throw o(n)||(n=`The object is own instance of ${t.name}.`),new TypeError(n)},hasProperty:(t,e,n)=>{if(null==t||!(e in t))throw o(n)||(n=`The object does not have property ${String(e)}.`),new TypeError(n)},hasOwnProperty:(t,e,n)=>{if(null==t||!Object.prototype.hasOwnProperty.call(t,e))throw o(n)||(n=`The object does not have own property ${String(e)}.`),new TypeError(n)}};function C(t,...e){v[t](...e)}function P(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(!k(t[r],e[r]))return!1;return!0}function T(t,e){const n=t.byteLength;if(n!==e.byteLength)return!1;let r=0;if(n-r>=8){const s=n>>>3,o=new Float64Array(t,0,s),i=new Float64Array(e,0,s);for(let t=0;t<s;t++)if(!Object.is(o[t],i[t]))return!1;r=s<<3}if(r===n)return!0;const s=new DataView(t),o=new DataView(e);if(n-r>=4){if(!Object.is(s.getUint32(r),o.getUint32(r)))return!1;r+=4}if(n-r>=2){if(!Object.is(s.getUint16(r),o.getUint16(r)))return!1;r+=2}if(n>r){if(!Object.is(s.getUint8(r),o.getUint8(r)))return!1;r+=1}return r===n}function j(t,e,n){"__proto__"!==e&&"constructor"!==e&&(t[e]=n)}function k(t,e){if(t===e)return!0;if(b(t)&&b(e))return t.length===e.length&&t.name===e.name;if(!p(t)||!p(e))return!1;{const n=t.valueOf(),r=e.valueOf();if(t!==n||e!==r)return n===r}{const n=t instanceof RegExp,r=e instanceof RegExp;if(n||r)return n===r&&String(t)===String(e)}{const n=h(t),r=h(e);if(n||r)return n===r&&P(t,e)}{const n=t instanceof ArrayBuffer,r=e instanceof ArrayBuffer;if(n||r)return n===r&&T(t,e)}{const n=ArrayBuffer.isView(t),r=ArrayBuffer.isView(e);if(n||r)return n===r&&_(t,e)&&T(t.buffer,e.buffer)}{const n=y(t),r=y(e);if(n||r)return n===r&&P([...t],[...e])}if(_(t,e)){const n=new Set(Object.keys(t)),r=new Set(Object.keys(e));if(n.size!==r.size)return!1;for(const t of n)if(!r.has(t))return!1;for(const r of n)if(!k(t[r],e[r]))return!1}else{for(const n in t)if(!(n in e))return!1;const n=new Set;for(const r in e){if(!(r in t))return!1;n.add(r)}for(const r of n)if(!k(t[r],e[r]))return!1}return!0}function R(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function A(t,e,n){return t!==e||n&&void 0===t}function D(t,e,n){if("__proto__"!==n&&"constructor"!==n){const r=t[n],s=M(r,e[n]);!A(r,s,!0)||(t[n]=s)}}function M(t,e){if(void 0===e||t===e)return t;if(!p(e))return e;if(e.valueOf()!==e)return k(t,e)?t:new e.constructor(e.valueOf());if(e instanceof RegExp)return k(t,e)?t:function n(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}(e);if(e instanceof ArrayBuffer)return k(t,e)?t:R(e);if(ArrayBuffer.isView(e))return k(t,e)?t:m(e)?function r(t){const e=R(t.buffer);return new t.constructor(e,t.byteOffset,t.length)}(e):function s(t){const e=R(t.buffer);return new DataView(e,t.byteOffset,t.byteLength)}(e);if(Array.isArray(e))return function o(t,e){for(let n=0,r=e.length;n<r;n++){const r=t[n],s=M(r,e[n]);!A(r,s,!1)||(t[n]=s)}return t}(h(t)?t:[],e);if(e instanceof Set)return function i(t,e){for(const n of e)t.has(n)||t.add(M(void 0,n));return t}(t instanceof Set?t:new Set,e);if(e instanceof Map)return function c(t,e){for(const[n,r]of e){const e=t.get(n),s=M(e,r);!A(e,s,!1)||t.set(n,s)}return t}(t instanceof Map?t:new Map,e);const a=p(t)?t:{};if(_(t,e))for(const t of Object.keys(e))D(a,e,t);else for(const t in e)D(a,e,t);return a}function x(t,...e){let n=t;for(const t of e)n=M(n,t);return n}function U(t){return x(void 0,t)}const L=Object.prototype,$=Function.prototype[Symbol.hasInstance],I=Symbol("override"),N=Symbol("is-inherited"),B=Symbol("constructors"),z=Symbol("class-base"),F=Symbol("class-sources"),V=Symbol("proto-extends-only");function K(t,e,n){try{null==t[n]&&Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}catch{}}function W(t,e){e&&Object.getOwnPropertyNames(e).filter((t=>!/(prototype|name|constructor)/.test(t))).forEach((n=>{K(t,e,n)})),e&&Object.getOwnPropertySymbols(e).forEach((n=>{K(t,e,n)}))}function G(t,e){const n=e??(null===e?void 0:e=>Object.prototype.isPrototypeOf.call(t.prototype,e)),r=n&&Object.getOwnPropertyDescriptor(t,I);r||Object.defineProperties(t,{[Symbol.hasInstance]:{value:n,writable:!0,enumerable:!1},[I]:{value:!!n||void 0,writable:!0}})}function H(t,...e){let n=!1;class r extends t{[B];[z];constructor(...r){super(...r);const s=new Map;if(this[B]=s,this[z]=t,n)for(const t of e)if(!t[V]){const e={apply:(e,n,r)=>{const s=new t(...r);W(this,s)}};s.set(t,new Proxy(t,e))}}super(t,...e){const n=this[B],r=n.get(t);return r&&(r.call(this,...e),n.set(t,null)),this}isMixedWith(t){return this.constructor!==t&&(this[z]===t||this[F].reduce(((e,n)=>e||t===n),!1))}static[Symbol.hasInstance](t){return Object.prototype.isPrototypeOf.call(r.prototype,t)}[N](t){const e=this[B];if(e.has(t))return!0;for(const n of e.keys())if(Object.prototype.isPrototypeOf.call(t,n))return!0;return!1}get[F](){return[...this[B].keys()]}}for(const t of e){const e=Object.getOwnPropertyDescriptor(t,Symbol.hasInstance);if(!e||e.writable){const n=e?t[Symbol.hasInstance]:$;G(t,(e=>n.call(t,e)||!!e?.[N]&&e[N](t)))}W(r.prototype,t.prototype);let s=Object.getPrototypeOf(t.prototype);for(;L!==s;)W(r.prototype,s),s=Object.getPrototypeOf(s);n||(n=!t[V])}return r}function q(t,e){return null!=t&&p(t)&&e in t}function J(t){const e={};for(const n of Object.keys(t))j(e,t[n],n);return e}const Y=new Proxy((function Z(){return Y}),{get:(t,e)=>{const n=t[e];return null!=n?n:Y}});function Q(t){return t||function e(){const t=new Proxy({},{get:(t,e)=>{const n=t[e];return null!=n?n:Y}});return Object.defineProperty(t,"stub",{value:!0,writable:!1}),t}()}const X=e(),tt=Q(X.setTimeout).bind(X),et=Q(X.clearTimeout).bind(X),nt=Q(X.setInterval).bind(X),rt=Q(X.clearInterval).bind(X);function st(t){return Promise.resolve().then(t)}function ot(...t){}function it(t,e,n){let r,s,o,i,c,a=0;const l=Number(e)||0,f=Object.assign({leading:!1,trailing:!0},u(n)?{leading:n,trailing:!n}:n),{leading:h,trailing:p}=f,g=null!=f.maxWait?Math.max(Number(f.maxWait)||0,l):null,d=e=>{const n=r,i=s;return r=s=void 0,a=e,o=t.apply(i,n),o},b=t=>{if(void 0===i)return!0;const e=t-i,n=t-a;return e>=l||e<0||null!==g&&n>=g},y=t=>(c=void 0,p&&r?d(t):(r=s=void 0,o)),w=()=>{const t=Date.now();if(b(t))return y(t);c=tt(w,(t=>{const e=t-i,n=t-a,r=l-e;return null!=g?Math.min(r,g-n):r})(t))};function m(...t){const e=Date.now(),n=b(e);if(r=t,s=this,i=e,n){if(null==c)return(t=>(a=t,c=tt(w,l),h?d(t):o))(i);if(g)return c=tt(w,l),d(i)}return null==c&&(c=tt(w,l)),o}return m.cancel=()=>{void 0!==c&&et(c),a=0,r=i=s=c=void 0},m.flush=()=>void 0===c?o:y(Date.now()),m.pending=()=>null!=c,m}function ct(t){const e=e=>t[e],n=`(?:${Object.keys(t).join("|")})`,r=RegExp(n),s=RegExp(n,"g");return t=>(t=null==t||"symbol"==typeof t?"":String(t),r.test(t)?t.replace(s,e):t)}const at={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#x60;"},ut=ct(at),lt=ct(J(at));function ft(t){return void 0===t||c(t)?t:p(t)?JSON.stringify(t):String(t)}function ht(t,e=!1){return t??(e?String(t):null)}function pt(t){return"null"===t?null:"undefined"===t?void 0:t}let gt=0;function dt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const bt=/(abort|cancel)/im;function yt(t){return null!=t&&(c(t)?bt.test(t):!!p(t)&&bt.test(t.message))}function wt(t,e=!1){const n=e?t.slice(1).toLowerCase():t.slice(1);return t.charAt(0).toUpperCase()+n}function mt(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Ot(t,e=!1){return t=t.trim().replace(/[-_\s]+(.)?/g,((t,e)=>e?e.toUpperCase():"")),!0===e?mt(t):t}function Et(t){return[...new Set(t)]}function _t(t,...e){const n=[t,...e];return n.reduce(((t,e)=>t.filter((t=>!e.includes(t)))))}async function St(t,e,n){return Promise.all(t.map((async(t,r,s)=>await e.call(n||this,t,r,s))))}const vt={year:(t,e,n)=>(t.setUTCFullYear(e.getUTCFullYear()+n),t),month:(t,e,n)=>(t.setUTCMonth(e.getUTCMonth()+n),t),day:(t,e,n)=>(t.setUTCDate(e.getUTCDate()+n),t),hour:(t,e,n)=>(t.setUTCHours(e.getUTCHours()+n),t),min:(t,e,n)=>(t.setUTCMinutes(e.getUTCMinutes()+n),t),sec:(t,e,n)=>(t.setUTCSeconds(e.getUTCSeconds()+n),t),msec:(t,e,n)=>(t.setUTCMilliseconds(e.getUTCMilliseconds()+n),t)};const Ct={};function Pt(t){return Ct[t]?Ct[t]++:Ct[t]=1,Ct[t]}function Tt(t){if(Ct[t]){const e=--Ct[t];return 0===e&&delete Ct[t],e}return 0}const jt=new WeakMap;function kt(t){if(!jt.has(t))throw new TypeError("This is not a valid EventPublisher.");return jt.get(t)}function Rt(t){if(!c(t)&&!l(t))throw new TypeError(`Type of ${E(t)} is not a valid channel.`)}function At(t){return null!=t&&C("typeOf","function",t),t}function Dt(t,e,n,...r){const s=t.get(e);if(s)for(const t of s)try{const e=n?[n,...r]:r,s=t(...e);if(!0===s)break}catch(t){void Promise.reject(t)}}class Mt{constructor(){C("instanceOf",Mt,this),jt.set(this,new Map)}publish(t,...e){const n=kt(this);Rt(t),Dt(n,t,void 0,...e),"*"!==t&&Dt(n,"*",t,...e)}hasListener(t,e){const n=kt(this);if(null==t)return n.size>0;if(Rt(t),null==e)return n.has(t);At(e);const r=n.get(t);return!!r&&r.has(e)}channels(){return[...kt(this).keys()]}on(t,e){const n=kt(this);At(e);const r=h(t)?t:[t];for(const t of r)Rt(t),n.has(t)?n.get(t).add(e):n.set(t,new Set([e]));return Object.freeze({get enable(){for(const t of r){const r=n.get(t);if(!r||!r.has(e))return this.unsubscribe(),!1}return!0},unsubscribe(){for(const t of r){const r=n.get(t);r&&(r.delete(e),r.size>0||n.delete(t))}}})}once(t,e){const n=this.on(t,e),r=this.on(t,(()=>{n.unsubscribe(),r.unsubscribe()}));return n}off(t,e){const n=kt(this);if(null==t)return n.clear(),this;const r=h(t)?t:[t],s=At(e);for(const t of r)if(Rt(t),null!=s){const e=n.get(t);e&&(e.delete(s),e.size>0||n.delete(t))}else n.delete(t);return this}}const xt=Mt;xt.prototype.trigger=Mt.prototype.publish;const Ut=Symbol("context");function Lt(t,e,n,r){const s=[],o=h(n)?n:[n];for(const n of o){const o=e.on(n,r);t.set.add(o),s.push(o);const i=t.map.get(e)??new Map,c=i.get(n)??new Map;c.set(r,o),i.has(n)||i.set(n,c),t.map.has(e)||t.map.set(e,i)}return Object.freeze({get enable(){for(const t of s)if(t.enable)return!0;return!1},unsubscribe(){for(const t of s)t.unsubscribe()}})}function $t(t,e,n,r){if(null!=e){e.off(n,r);const s=t.map.get(e);if(!s)return;if(null!=n){const e=h(n)?n:[n];for(const n of e){const e=s.get(n);if(!e)return;if(r){const n=e.get(r);n&&(n.unsubscribe(),t.set.delete(n)),e.delete(r)}else for(const n of e.values())n.unsubscribe(),t.set.delete(n)}}else for(const e of s.values())for(const n of e.values())n.unsubscribe(),t.set.delete(n)}else{for(const e of t.set)e.unsubscribe();t.map=new WeakMap,t.set.clear()}}class It{[Ut];constructor(){this[Ut]={map:new WeakMap,set:new Set}}listenTo(t,e,n){return Lt(this[Ut],t,e,n)}listenToOnce(t,e,n){const r=Lt(this[Ut],t,e,n),s=t.on(e,(()=>{$t(this[Ut],t,e,n),s.unsubscribe()}));return r}stopListening(t,e,n){return $t(this[Ut],t,e,n),this}}class Nt extends(H(xt,It)){constructor(){super(),this.super(It)}}const Bt=Nt,zt=Symbol("cancel"),Ft=Symbol("close"),Vt=Object.freeze({enable:!1,unsubscribe(){}}),Kt=new WeakMap;function Wt(t){if(!Kt.has(t))throw new TypeError("The object is not a valid CancelToken.");return Kt.get(t)}class Gt{static source(...t){let e,n;const r=new Gt(((t,r)=>{e=t,n=r}),...t);return Object.freeze({token:r,cancel:e,close:n})}constructor(t,...e){C("instanceOf",Gt,this),C("typeOf","function",t);const n=new Set(e.filter((t=>Kt.has(t))));let r=0;for(const t of n)r|=Wt(t).status;const s={broker:new xt,subscriptions:new Set,reason:void 0,status:r};Kt.set(this,Object.seal(s));const o=this[zt],i=this[Ft];if(0===r)for(const t of n)s.subscriptions.add(t.register(o.bind(this))),this.register(o.bind(t));t(o.bind(this),i.bind(this))}get reason(){return Wt(this).reason}get cancelable(){return 0===Wt(this).status}get requested(){return!!(1&Wt(this).status)}get closed(){return!!(2&Wt(this).status)}get[Symbol.toStringTag](){return"CancelToken"}register(t){const e=Wt(this);return this.cancelable?e.broker.on("cancel",t):Vt}[zt](t){const e=Wt(this);if(C("notNullish",t),this.cancelable){e.reason=t,e.status|=1;for(const t of e.subscriptions)t.unsubscribe();e.broker.trigger("cancel",t),Promise.resolve().then((()=>this[Ft]()))}}[Ft](){const t=Wt(this);if(!this.closed){t.status|=2;for(const e of t.subscriptions)e.unsubscribe();t.subscriptions.clear(),t.broker.off()}}}const Ht=Promise,qt=Ht.prototype.then,Jt=Symbol("create"),Yt=new WeakMap;class Zt extends Promise{static get[Symbol.species](){return Ht}static resolve(t,e){return this[Jt](super.resolve(t),e)}static[Jt](t,e,n){let r;if(C("instanceOf",Ht,t),e instanceof Gt)if(!n||b(n[0])&&!b(n[1]))if(e.cancelable){let n;r=new Ht(((r,s)=>{n=e.register(s),qt.call(t,r,s)}));const s=()=>{n.unsubscribe(),Yt.delete(r)};r.then(s,s)}else if(e.requested)r=super.reject(e.reason);else{if(!e.closed)throw new Error("Unexpected Exception");r=t}else r=t;else r=t;return n&&(r=qt.apply(r,n)),e&&e.cancelable&&Yt.set(r,e),r instanceof this||Object.setPrototypeOf(r,this.prototype),r}constructor(t,e){return super(t),Zt[Jt](this,e)}then(t,e){return Zt[Jt](this,Yt.get(this),[t,e])}catch(t){return this.then(void 0,t)}finally(t){return Zt[Jt](super.finally(t),Yt.get(this))}}function Qt(t){return Promise=t?Zt:Ht,Promise}function Xt(t){const e=t.map((t=>t.catch((t=>t))));return Promise.all(e)}function te(t){return Promise.resolve(void 0,t)}function ee(t){const e={};return t.constructor.race([t,e]).then((t=>t===e?"pending":"fulfilled"),(()=>"rejected"))}Qt(!s().noAutomaticNativeExtend);class ne extends Zt{resolve;reject;constructor(t,e){const[n,r]=((t,e)=>b(t)?[t,e]:[ot,t])(t,e),s={};super(((t,e)=>{Object.assign(s,{resolve:t,reject:e}),n(t,e)}),r),Object.assign(this,s)}status(){return ee(this)}get[Symbol.toStringTag](){return"Deferred"}static get[Symbol.species](){return Ht}}class re{_broker;get(){return this._broker??(this._broker=new xt)}}const se=Symbol("internal"),oe=Symbol("notify"),ie=Symbol("stock-change"),ce=Symbol("notify-changes");function ae(t){if(!t||!t[se])throw new TypeError("The object passed is not an IObservable.")}const ue={set(t,e,n,r){if(!c(e))return Reflect.set(t,e,n,r);const s=t[e];return"disabled"!==t[se].state&&n!==s&&t[ie](e,s),Reflect.set(t,e,n,r)}};Object.freeze(ue);class le{[se];constructor(t="active"){C("instanceOf",le,this);const e={state:t,changed:!1,changeMap:new Map,broker:new re};return Object.defineProperty(this,se,{value:Object.seal(e)}),new Proxy(this,ue)}on(t,e){ae(this);const{changeMap:n,broker:r}=this[se],s=r.get().on(t,e);if(0<n.size){const e=h(t)?t:[t];for(const t of e)n.has(t)||n.set(t,this[t])}return s}off(t,e){ae(this),this[se].broker.get().off(t,e)}suspend(t=!1){return ae(this),this[se].state=t?"disabled":"suspended",t&&this[se].changeMap.clear(),this}resume(){ae(this);const t=this[se];return"active"!==t.state&&(t.state="active",st((()=>this[ce]()))),this}getObservableState(){return ae(this),this[se].state}getBroker(){const{broker:t}=this[se];return t.get()}static from(t){const e=x(new class extends le{}("disabled"),t);return e.resume(),e}notify(...t){if(ae(this),0===t.length)return;const{changeMap:e}=this[se],n=new Map;for(const r of t){const t=this[r],s=e.has(r)?e.get(r):t;n.set(r,[t,s]),Object.prototype.hasOwnProperty.call(this,r)&&(this[se].changed=!0)}this[oe](n)}[ie](t,e){const{state:n,changeMap:r,broker:s}=this[se];if(this[se].changed=!0,0===r.size){r.set(t,e);for(const t of s.get().channels())r.has(t)||r.set(t,this[t]);"active"===n&&void st((()=>this[ce]()))}else r.has(t)||r.set(t,e)}[ce](){const{state:t,changeMap:e}=this[se];if("active"!==t)return;const n=new Map;for(const[t,r]of e){const e=this[t];k(r,e)||n.set(t,[e,r])}this[oe](n)}[oe](t){const{changed:e,changeMap:n,broker:r}=this[se];n.clear(),this[se].changed=!1;const s=r.get();for(const[e,n]of t)s.trigger(e,...n,e);e&&s.trigger("@",this)}}const fe={defineProperty(t,e,n){const r=t[se];if("disabled"===r.state||r.byMethod||!Object.prototype.hasOwnProperty.call(n,"value"))return Reflect.defineProperty(t,e,n);const s=t[e],o=n.value;if("length"===e&&o!=s){const r=s>>>0,i=o>>>0,c=()=>{const e=i<r&&t.slice(i);if(e)for(let n=r;--n>=i;)t[ie](-1,n,void 0,e[n-i]);else for(let e=r;e<i;e++)t[ie](1,e)},a=Reflect.defineProperty(t,e,n);return a&&c(),a}if(o!==s&&he(e)){const r=e>>>0,i=Number(r>=t.length),c=Reflect.defineProperty(t,e,n);return c&&t[ie](i,r,o,s),c}return Reflect.defineProperty(t,e,n)},deleteProperty(t,e){const n=t[se];if("disabled"===n.state||n.byMethod||!Object.prototype.hasOwnProperty.call(t,e))return Reflect.deleteProperty(t,e);const r=t[e],s=Reflect.deleteProperty(t,e);return s&&he(e)&&t[ie](0,e>>>0,void 0,r),s}};function he(t){const e=String(t),n=Math.trunc(e);return String(n)===e&&0<=n&&n<4294967295}Object.freeze(fe);class pe extends Array{[se];constructor(){super(...arguments),C("instanceOf",pe,this);const t={state:"active",byMethod:!1,records:[],indexes:new Set,broker:new re};Object.defineProperty(this,se,{value:Object.seal(t)});const e=arguments.length;if(1===e&&a(arguments[0])){const t=arguments[0]>>>0;for(let e=0;e<t;e++)this[ie](1,e)}else if(0<e)for(let t=0;t<e;t++)this[ie](1,t,arguments[t]);return new Proxy(this,fe)}on(t){return ae(this),this[se].broker.get().on("@",t)}off(t){ae(this),this[se].broker.get().off("@",t)}suspend(t=!1){return ae(this),this[se].state=t?"disabled":"suspended",t&&(this[se].records=[]),this}resume(){ae(this);const t=this[se];return"active"!==t.state&&(t.state="active",st((()=>this[ce]()))),this}getObservableState(){return ae(this),this[se].state}sort(t){ae(this);const e=this[se],n=Array.from(this);e.byMethod=!0;const r=super.sort(t);if(e.byMethod=!1,"disabled"!==e.state){const t=n.length;for(let e=0;e<t;e++){const t=n[e],r=this[e];r!==t&&this[ie](0,e,r,t)}}return r}splice(t,e,...n){ae(this);const r=this[se],s=this.length;r.byMethod=!0;const o=super.splice(...arguments);if(r.byMethod=!1,"disabled"!==r.state){t=Math.trunc(t);const e=t<0?Math.max(s+t,0):Math.min(t,s);for(let t=o.length;--t>=0;)this[ie](-1,e+t,void 0,o[t]);const r=n.length;for(let t=0;t<r;t++)this[ie](1,e+t,n[t])}return o}shift(){ae(this);const t=this[se],e=this.length;t.byMethod=!0;const n=super.shift();return t.byMethod=!1,"disabled"!==t.state&&this.length<e&&this[ie](-1,0,void 0,n),n}unshift(...t){ae(this);const e=this[se];e.byMethod=!0;const n=super.unshift(...t);if(e.byMethod=!1,"disabled"!==e.state){const e=t.length;for(let n=0;n<e;n++)this[ie](1,n,t[n])}return n}map(t,e){return pe.from([...this].map(t,e))}getBroker(){const{broker:t}=this[se];return t.get()}[ie](t,e,n,r){const{state:s,indexes:o,records:i}=this[se],c=o.has(e)?function a(t,e,n){const r=1===e?t=>-1===t:t=>-1!==t;for(let e=t.length;--e>=0;){const s=t[e];if(s.index===n&&r(s.type))return e;s.index<n&&Boolean(s.type)&&(n-=s.type)}return-1}(i,t,e):-1,u=i.length;if(c>=0){const r=i[c].type;if(r){for(let t,n=u;--n>c;)t=i[n],t.index>=e&&(t.index-=r);const s=i.splice(c,1)[0];-1!==t&&this[ie](Number(!t),e,n,s.oldValue)}else{const r=i.splice(c,1)[0];this[ie](t,e,n,r.oldValue)}}else o.add(e),i[u]={type:t,index:e,newValue:n,oldValue:r},"active"===s&&0===u&&st((()=>this[ce]()))}[ce](){const{state:t,records:e}=this[se];if("active"===t&&0!==e.length){for(const t of e)Object.freeze(t);this[oe](Object.freeze(e)),this[se].records=[]}}[oe](t){const e=this[se];e.indexes.clear(),e.broker.get().trigger("@",t)}}globalThis.CDP_DECLARE=globalThis.CDP_DECLARE||{},function(){let t;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.ABORT=1]="ABORT",t[t.PENDING=2]="PENDING",t[t.NOOP=3]="NOOP",t[t.FAIL=-1]="FAIL",t[t.FATAL=-2]="FATAL",t[t.NOT_SUPPORTED=-3]="NOT_SUPPORTED"}(t=CDP_DECLARE.RESULT_CODE||(CDP_DECLARE.RESULT_CODE={})),CDP_DECLARE.ASSIGN_RESULT_CODE=function e(n){Object.assign(t,n)};const n={0:"operation succeeded.",1:"operation aborted.",2:"operation pending.",3:"no operation.","-1":"operation failed.","-2":"unexpected error occured.","-3":"operation not supported."};function r(t,e,r,s){if(e<0||1e3<=e)throw new RangeError(`declareResultCode(), invalid local-code range. [code: ${e}]`);const o=s?1:-1,i=o*(t+e);return n[i]=r||`[CODE: ${i}]`,i}CDP_DECLARE.ERROR_MESSAGE_MAP=function s(){return n},CDP_DECLARE.DECLARE_SUCCESS_CODE=function o(t,e,n){return r(t,e,n,!0)},CDP_DECLARE.DECLARE_ERROR_CODE=function i(t,e,n){return r(t,e,n,!1)}}();var ge=CDP_DECLARE.RESULT_CODE,de=CDP_DECLARE.DECLARE_SUCCESS_CODE,be=CDP_DECLARE.DECLARE_ERROR_CODE,ye=CDP_DECLARE.ASSIGN_RESULT_CODE,we=CDP_DECLARE.ERROR_MESSAGE_MAP;function me(t){return t<0}function Oe(t){return!me(t)}function Ee(t,e){const n=e?`[${e}]`:"";return ge[t]?`${n}[${ge[t]}]`:`${n}[UNKNOWN]`}function _e(t){const e=we();return e[t]?e[t]:`unregistered result code. [code: ${t}]`}const{isFinite:Se}=Number,ve=t=>({configurable:!1,writable:!1,enumerable:!0,value:t});class Ce extends Error{constructor(t,e,n){t=i(t)?ge.SUCCESS:Se(t)?Math.trunc(t):ge.FAIL,super(e??_e(t),n);const r=n?.cause;let s=Pe(r)?r.time:void 0;Se(s)||(s=Date.now()),Object.defineProperties(this,{code:ve(t),time:ve(s),cause:ve(r)})}code;time;cause;get isSucceeded(){return Oe(this.code)}get isFailed(){return me(this.code)}get isCanceled(){return this.code===ge.ABORT}get codeName(){return Ee(this.code,this.name)}get help(){return _e(this.code)}get[Symbol.toStringTag](){return"Result"}}function Pe(t){return t instanceof Error||"Error"===E(t)}Ce.prototype.name="Result";class Te{_broker=new xt;_storage={};get kind(){return"memory"}async getItem(t,e){e=e??{},await te(e.cancel);const n=ht(this._storage[t]);switch(e.dataType){case"string":return ft(n);case"number":return Number(pt(n));case"boolean":return Boolean(pt(n));case"object":return Object(pt(n));default:return pt(n)}}async setItem(t,e,n){n=n??{},await te(n.cancel);const r=ht(e,!0),s=ht(this._storage[t]);k(s,r)||(j(this._storage,t,r),!n.silent&&this._broker.trigger("@",t,r,s))}async removeItem(t,e){e=e??{},await te(e.cancel);const n=this._storage[t];void 0!==n&&(delete this._storage[t],!e.silent&&this._broker.trigger("@",t,null,n))}async clear(t){t=t??{},await te(t.cancel),d(this._storage)||(this._storage={},!t.silent&&this._broker.trigger("@",null,null,null))}async keys(t){return await te(t?.cancel),Object.keys(this._storage)}on(t){return this._broker.on("@",t)}off(t){this._broker.off("@",t)}get context(){return this._storage}}const je=new Te;const ke={tags:["{{","}}"],escape:ut};const Re=n(null,"CDP_DECLARE","TEMPLATE_CACHE");function Ae(t){return t.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}class De{_source;_tail;_pos;constructor(t){this._source=this._tail=t,this._pos=0}get pos(){return this._pos}get source(){return this._source}get eos(){return""===this._tail}scan(t){const e=t.exec(this._tail);if(!e||0!==e.index)return"";const n=e[0];return this._tail=this._tail.substring(n.length),this._pos+=n.length,n}scanUntil(t){const e=this._tail.search(t);let n;switch(e){case-1:n=this._tail,this._tail="";break;case 0:n="";break;default:n=this._tail.substring(0,e),this._tail=this._tail.substring(e)}return this._pos+=n.length,n}}class Me{_view;_parent;_cache;constructor(t,e){this._view=t,this._cache={".":this._view},this._parent=e}get view(){return this._view}push(t){return new Me(t,this)}lookup(t){const e=this._cache;let n;if(Object.prototype.hasOwnProperty.call(e,t))n=e[t];else{let o,i,c,a=this,u=!1;for(;a;){if(0<t.indexOf("."))for(o=a._view,i=t.split("."),c=0;null!=o&&c<i.length;)c===i.length-1&&(u=q(o,i[c])||(r=o,s=i[c],f(r)&&Object.prototype.hasOwnProperty.call(r,s))),o=o[i[c++]];else o=a._view[t],u=q(a._view,t);if(u){n=o;break}a=a._parent}e[t]=n}var r,s;return b(n)&&(n=n.call(this._view)),n}}const xe={white:/\s*/,space:/\s+/,equals:/\s*=/,curly:/\s*\}/,tag:/#|\^|\/|>|\{|&|=|!/};class Ue{parse(t,e){const n=function r(t,e){return`${t}:${e.join(":")}`}(t,e??ke.tags);let s=Re[n];return null==s&&(s=Re[n]=function o(t,e){if(!t)return[];let n=!1;const r=[],s=[],o=[];let i=!1,a=!1,u="",l=0;const f=()=>{if(i&&!a)for(;o.length;)delete s[o.pop()];else o.length=0;i=!1,a=!1},p=t=>{if(c(t)&&(t=t.split(xe.space,2)),!h(t)||2!==t.length)throw new Error(`Invalid tags: ${JSON.stringify(t)}`);return{openingTag:new RegExp(`${Ae(t[0])}\\s*`),closingTag:new RegExp(`\\s*${Ae(t[1])}`),closingCurly:new RegExp(`\\s*${Ae(`}${t[1]}`)}`)}},{tag:g,white:d,equals:b,curly:y}=xe;let w=p(e??ke.tags);const m=new De(t);let O;for(;!m.eos;){const{openingTag:t,closingTag:e,closingCurly:c}=w;let h,_=m.pos,S=m.scanUntil(t);if(S)for(let t=0,e=S.length;t<e;++t){const e=S.charAt(t);E=e,/\S/.test(E)?(a=!0,n=!0,u+=" "):(o.push(s.length),u+=e),s.push(["text",e,_,_+1]),_+=1,"\n"===e&&(f(),u="",l=0,n=!1)}if(!m.scan(t))break;i=!0;let v=m.scan(g)||"name";if(m.scan(d),"="===v?(S=m.scanUntil(b),m.scan(b),m.scanUntil(e)):"{"===v?(S=m.scanUntil(c),m.scan(y),m.scanUntil(e),v="&"):S=m.scanUntil(e),!m.scan(e))throw new Error(`Unclosed tag at ${m.pos}`);if(h=">"===v?[v,S,_,m.pos,u,l,n]:[v,S,_,m.pos],l++,s.push(h),"#"===v||"^"===v)r.push(h);else if("/"===v){if(O=r.pop(),!O)throw new Error(`Unopened section "${S}" at ${_}`);if(O[1]!==S)throw new Error(`Unclosed section "${O[1]}" at ${_}`)}else"name"===v||"{"===v||"&"===v?a=!0:"="===v&&(w=p(S))}var E;if(f(),O=r.pop(),O)throw new Error(`Unclosed section "${O[1]}" at ${m.pos}`);return function S(t){const e=[];let n=e;const r=[];let s;for(const o of t)switch(o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":s=r.pop(),s[5]=o[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(o)}return e}(function _(t){const e=[];let n;for(const r of t)r&&("text"===r[0]&&n&&"text"===n[0]?(n[1]+=r[1],n[3]=r[3]):(e.push(r),n=r));return e}(s))}(t,e)),{tokens:s,cacheKey:n}}render(t,e,n,r){const{tokens:s}=this.parse(t,r);return this.renderTokens(s,e,n,t,r)}renderTokens(t,e,n,r,s){const o=e instanceof Me?e:new Me(e);let i="";for(const e of t){let t;switch(e[0]){case"#":t=this.renderSection(e,o,n,r);break;case"^":t=this.renderInverted(e,o,n,r);break;case">":t=this.renderPartial(e,o,n,s);break;case"&":t=this.unescapedValue(e,o);break;case"name":t=this.escapedValue(e,o);break;case"text":t=this.rawValue(e)}null!=t&&(i+=t)}return i}renderSection(t,e,n,r){const s=this;let o="",i=e.lookup(t[1]);const c=t=>s.render(t,e,n);if(i){if(h(i))for(const s of i)o+=this.renderTokens(t[4],e.push(s),n,r);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)o+=this.renderTokens(t[4],e.push(i),n,r);else if(b(i)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");i=i.call(e.view,r.slice(t[3],t[5]),c),null!=i&&(o+=i)}else o+=this.renderTokens(t[4],e,n,r);return o}}renderInverted(t,e,n,r){const s=e.lookup(t[1]);if(!s||h(s)&&0===s.length)return this.renderTokens(t[4],e,n,r)}indentPartial(t,e,n){const r=e.replace(/[^ \t]/g,""),s=t.split("\n");for(let t=0;t<s.length;t++)s[t].length&&(t>0||!n)&&(s[t]=r+s[t]);return s.join("\n")}renderPartial(t,e,n,r){if(!n)return;const s=b(n)?n(t[1]):n[t[1]];if(null!=s){const o=t[6],i=t[5],c=t[4];let a=s;0===i&&c&&(a=this.indentPartial(s,c,o));const{tokens:u}=this.parse(a,r);return this.renderTokens(u,e,n,a)}}unescapedValue(t,e){const n=e.lookup(t[1]);if(null!=n)return n}escapedValue(t,e){const n=e.lookup(t[1]);if(null!=n)return ke.escape(n)}rawValue(t){return t[1]}}ke.writer=new Ue;t.$cdp=S,t.ASSIGN_RESULT_CODE=ye,t.CancelToken=Gt,t.CancelablePromise=Zt,t.DECLARE_ERROR_CODE=be,t.DECLARE_SUCCESS_CODE=de,t.Deferred=ne,t.EventBroker=xt,t.EventPublisher=Mt,t.EventReceiver=It,t.EventSource=Bt,t.FAILED=me,t.MemoryStorage=Te,t.NativePromise=Ht,t.ObservableArray=pe,t.ObservableObject=le,t.Promise=Zt,t.PromiseManager=class Le{_pool=new Map;add(t,e){this._pool.set(t,e?.cancel);const n=()=>{this._pool.delete(t),e&&e.close()};return t.then(n,n),t}release(){this._pool.clear()}promises(){return[...this._pool.keys()]}all(){return Promise.all(this.promises())}race(){return Promise.race(this.promises())}wait(){return Xt(this.promises())}allSettled(){return Promise.allSettled(this.promises())}any(){return Promise.any(this.promises())}abort(t){for(const e of this._pool.values())e&&e(t??new Error("abort"));return Xt(this.promises())}},t.RESULT_CODE=ge,t.Registry=class $e extends Mt{_storage;_rootKey;_defaultOptions;_store={};constructor(t,e,n){super(),this._storage=t,this._rootKey=e,this._defaultOptions={jsonSpace:n}}get rootKey(){return this._rootKey}get storage(){return this._storage}async load(t){t=t??{},this._store=await this._storage.getItem(this._rootKey,t)||{},t.silent||st((()=>this.publish("change","*")))}async save(t){const e={...this._defaultOptions,...t};e.silent||this.publish("will-save"),await this._storage.setItem(this._rootKey,this._store,e)}read(t,e){const{field:n}=e??{},r=String(t).split("/"),s=r.pop();let o,i=this.targetRoot(n);for(;o=r.shift();){if(!(o in i))return null;i=i[o]}return null!=i[s]?U(i[s]):null}write(t,e,n){const{field:r,noSave:s,silent:o}=n??{},i=null==e,c=String(t).split("/"),a=c.pop();let u,l=this.targetRoot(r);for(;u=c.shift();)if(u in l)l=l[u];else{if(i)return;l=l[u]={}}const f=i?null:e,h=ht(l[a]);k(h,f)||(i?delete l[a]:l[a]=U(f),s||this._storage.setItem(this._rootKey,this._store,{...this._defaultOptions,...n}),o||st((()=>this.publish("change",t,f,h))))}delete(t,e){this.write(t,null,e)}clear(t){t=t??{},this._store={},this._storage.removeItem(this._rootKey,t),t.silent||this.publish("change",null,null,null)}targetRoot(t){return t?(this._store[t]=this._store[t]||{},this._store[t]):this._store}},t.Result=Ce,t.SUCCEEDED=Oe,t.TemplateEngine=class Ie{static compile(t,e){if(!c(t))throw new TypeError(`Invalid template! the first argument should be a "string" but "${function n(t){return h(t)?"array":typeof t}(t)}" was given for TemplateEngine.compile(template, options)`);const{tags:r}=e??ke,{writer:s}=ke,o=(e,n)=>s.render(t,e??{},n,r),{tokens:i,cacheKey:a}=s.parse(t,r);return o.tokens=i,o.cacheKey=a,o.cacheLocation=["CDP_DECLARE","TEMPLATE_CACHE"],o}static clearCache(){!function t(){const t=r("CDP_DECLARE");t.TEMPLATE_CACHE={}}()}static setGlobalSettings(t){const e={...ke},{writer:n,tags:r,escape:s}=t;return n&&(ke.writer=n),r&&(ke.tags=r),s&&(ke.escape=s),e}static createScanner(t){return new De(t)}static createContext(t,e){return new Me(t,e)}static createWriter(){return new Ue}},t.assignValue=j,t.at=function Ne(t,e){const n=Math.trunc(e),r=n<0?t[n+t.length]:t[n];if(null==r)throw new RangeError(`invalid array index. [length: ${t.length}, given: ${e}]`);return r},t.camelize=Ot,t.capitalize=wt,t.checkCanceled=te,t.checkStatus=ee,t.className=E,t.classify=function Be(t){return wt(Ot(t.replace(/[\W_]/g," ")).replace(/\s/g,""))},t.clearInterval=rt,t.clearTimeout=et,t.combination=function t(e,n){const r=[];if(e.length<n)return[];if(1===n)for(const[t,n]of e.entries())r[t]=[n];else for(let s=0,o=e.length;s<o-n+1;s++){const o=t(e.slice(s+1),n-1);for(let t=0,n=o.length;t<n;t++)r.push([e[s]].concat(o[t]))}return r},t.computeDate=function ze(t,e,n="day"){const r=new Date(t.getTime()),s=vt[n];if(s)return s(r,t,e);throw new TypeError(`invalid unit: ${n}`)},t.createEscaper=ct,t.dasherize=function Fe(t){return t.trim().replace(/([A-Z])/g,"-$1").replace(/[_\s]+/g,"-").toLowerCase()},t.debounce=it,t.decapitalize=mt,t.deepCopy=U,t.deepEqual=k,t.deepMerge=x,t.diff=function Ve(t,e){C("typeOf","object",t),C("typeOf","object",e);const n={};for(const r of Object.keys(e))k(t[r],e[r])||j(n,r,e[r]);return n},t.difference=_t,t.drop=function Ke(t,...e){C("typeOf","object",t);const n=[...e];n.length||n.push(void 0);const r={...t};for(const e of Object.keys(t))for(const t of n)if(k(t,r[e])){delete r[e];break}return r},t.dropUndefined=ht,t.ensureObject=n,t.escapeHTML=ut,t.every=async function We(t,e,n){for(const[r,s]of t.entries())if(!await e.call(n||this,s,r,t))return!1;return!0},t.exists=o,t.extendPromise=Qt,t.filter=async function Ge(t,e,n){const r=await St(t,((t,r,s)=>e.call(n||this,t,r,s)));return t.filter((()=>r.shift()))},t.find=async function He(t,e,n){for(const[r,s]of t.entries())if(await e.call(n||this,s,r,t))return s},t.findIndex=async function qe(t,e,n){for(const[r,s]of t.entries())if(await e.call(n||this,s,r,t))return r;return-1},t.fromTypedData=ft,t.getConfig=s,t.getGlobal=e,t.getGlobalNamespace=r,t.groupBy=function Je(t,e){const{keys:n,sumKeys:r,groupKey:s}=e,o=s??"items",i=r??[];i.push(o);const c=t.reduce(((t,e)=>{const r=n.reduce(((t,n)=>t+String(e[n])),"");if(!(r in t)){const s=n.reduce(((t,n)=>(j(t,n,e[n]),t)),{});t[r]=i.reduce(((t,e)=>(t[e]=0,t)),s)}const s=t[r];for(const t of i)o===t?(s[t]=s[t]||[],s[t].push(e)):s[t]+=e[t];return t}),{});return Object.values(c)},t.has=q,t.indices=function Ye(t,...e){const n=[...t.keys()],r=t.length,s=[...new Set(e)].sort(((t,e)=>t<e?1:-1));for(const t of s)0<=t&&t<r&&n.splice(t,1);return n},t.instanceOf=function Ze(t,e){return"function"==typeof t&&e instanceof t},t.intersection=function Qe(...t){return t.reduce(((t,e)=>t.filter((t=>e.includes(t)))))},t.invert=J,t.isArray=h,t.isBigInt=function Xe(t){return"bigint"==typeof t},t.isBoolean=u,t.isCancelLikeError=yt,t.isEmptyObject=d,t.isFunction=b,t.isIterable=y,t.isNullish=i,t.isNumber=a,t.isNumeric=function tn(t){return!(i(t)||u(t)||h(t)||l(t)||""===t||Number.isNaN(Number(t)))},t.isObject=p,t.isObservable=function en(t){return Boolean(t&&t[se])},t.isPlainObject=g,t.isPrimitive=f,t.isResult=function nn(t){return t instanceof Ce||"Result"===E(t)},t.isStatusIn=function rn(t){return!!Ct[t]},t.isString=c,t.isSymbol=l,t.isTypedArray=m,t.luid=function sn(t="",e){const n=(++gt).toString(16);return null!=e?`${t}${n.padStart(e,"0")}`:`${t}${n}`},t.makeCanceledResult=function on(t,e){return new Ce(ge.ABORT,t,{cause:e})},t.makeResult=function cn(t,e,n){return new Ce(t,e,{cause:n})},t.map=St,t.memoryStorage=je,t.mixins=H,t.noop=ot,t.omit=function an(t,...e){C("typeOf","object",t);const n={};for(const r of Object.keys(t))!e.includes(r)&&j(n,r,t[r]);return n},t.once=function un(t){let e;return function(...n){return t&&(e=t.call(this,...n),t=null),e}},t.ownInstanceOf=O,t.permutation=function t(e,n){const r=[];if(e.length<n)return[];if(1===n)for(const[t,n]of e.entries())r[t]=[n];else for(let s=0,o=e.length;s<o;s++){const o=e.slice(0);o.splice(s,1);const i=t(o,n-1);for(let t=0,n=i.length;t<n;t++)r.push([e[s]].concat(i[t]))}return r},t.pick=function ln(t,...e){return C("typeOf","object",t),e.reduce(((e,n)=>(n in t&&j(e,n,t[n]),e)),{})},t.post=st,t.randomInt=dt,t.reduce=async function fn(t,e,n){if(t.length<=0&&void 0===n)throw TypeError("Reduce of empty array with no initial value");const r=void 0!==n;let s=r?n:t[0];for(const[n,o]of t.entries())(r||0!==n)&&(s=await e(s,o,n,t));return s},t.restoreNullish=pt,t.result=function hn(t,e,n){const r=h(e)?e:[e];if(!r.length)return b(n)?n.call(t):n;const s=(t,e)=>b(e)?e.call(t):e;let o=t;for(const t of r){const e=null==o?void 0:o[t];if(void 0===e)return s(o,n);o=s(o,e)}return o},t.safe=Q,t.sameClass=_,t.sameType=function pn(t,e){return typeof t==typeof e},t.sample=function gn(t,e){if(null==e)return t[dt(t.length-1)];const n=t.slice(),r=n.length;e=Math.max(Math.min(e,r),0);const s=r-1;for(let t=0;t<e;t++){const e=dt(t,s),r=n[t];n[t]=n[e],n[e]=r}return n.slice(0,e)},t.scheduler=function dn(){let t,e=[];function n(){t=null;const n=e;e=[];for(const t of n)t()}return function(r){e.push(r),null==t&&(t=st(n))}},t.setInterval=nt,t.setMixClassAttribute=function bn(t,e,n){switch(e){case"protoExtendsOnly":t[V]=!0;break;case"instanceOf":G(t,n)}},t.setTimeout=tt,t.shuffle=function yn(t,e=!1){const n=e?t:t.slice(),r=n.length;for(let t=r>0?r>>>0:0;t>1;){const e=t*Math.random()>>>0,r=n[--t];n[t]=n[e],n[e]=r}return n},t.sleep=function wn(t){return new Promise((e=>tt(e,t)))},t.some=async function mn(t,e,n){for(const[r,s]of t.entries())if(await e.call(n||this,s,r,t))return!0;return!1},t.sort=function t(e,n,r=!1){const s=r?e:e.slice();if(s.length<2)return s;const o=t(s.splice(0,s.length>>>1),n,!0),i=t(s.splice(0),n,!0);for(;o.length&&i.length;)s.push(n(o[0],i[0])<=0?o.shift():i.shift());return s.concat(o,i)},t.statusAddRef=Pt,t.statusRelease=Tt,t.statusScope=async function On(t,e){try{return Pt(t),await e()}finally{Tt(t)}},t.throttle=function En(t,e,n){const{leading:r,trailing:s}=Object.assign({leading:!0,trailing:!0},n);return it(t,e,{leading:r,trailing:s,maxWait:e})},t.toHelpString=_e,t.toNameString=Ee,t.toResult=function _n(t){if(t instanceof Ce){let{code:e,cause:n,time:r}=t;return e=i(e)?ge.SUCCESS:Se(e)?Math.trunc(e):ge.FAIL,Se(r)||(r=Date.now()),Reflect.defineProperty(t,"code",ve(e)),Reflect.defineProperty(t,"time",ve(r)),Reflect.defineProperty(t,"cause",ve(n)),t}{const e=Object(t),n=c(e.message)?e.message:c(t)?t:void 0,r=yt(n)?ge.ABORT:Se(e.code)?e.code:t,s=Pe(e.cause)?e.cause:Pe(t)?t:c(t)?new Error(t):t;return new Ce(r,n,{cause:s})}},t.toTypedData=function Sn(t){return"true"===t||"false"!==t&&("null"===t?null:t===String(Number(t))?Number(t):t&&/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/.test(t)?JSON.parse(t):t)},t.typeOf=function vn(t,e){return typeof e===t},t.underscored=function Cn(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},t.unescapeHTML=lt,t.union=function Pn(...t){return Et(t.flat())},t.unique=Et,t.verify=C,t.wait=Xt,t.without=function Tn(t,...e){return _t(t,e)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=lib-core.min.map