{"version":3,"names":["createCustom","config","strTemplate","transform","tmpl2Parse","staticParts","insertionPoints","remainingTmplStr","startIndexOfIP","indexOf","delimiter","start","end","Error","push","substring","iPTransformResult","transformIP","length","insertionPoint","lastStaticPart","pop","ctx","html","map","iP","transformer","Object","values","transformers","find","t","test","transformFunction","transformVariable","ctx2Value","key","result","k","split","hasOwnProperty","ctx2MustacheString","mustacheStringyfy","value","variable","indexOfEndDelimiter","dataKey","unsafeVariable","unsafeHTML","isMustacheFalsy","undefined","NaN","some","falsy","parseSection","tmplStr","indexOfStartTagEnd","endTag","indexOfEndTagStart","innerTmpl","section","parsedSection","transformedInnerTmpl","sectionData","innerCtx","invertedSection","comment","customDelimiter","originalEndDeliLength","indexOfEndTag","newStartDeli","newEndDeli","createDefault","createTransform","unsafeVariableTransformer","sectionTransformer","invertedSectionTransformer","customDelimiterTransformer","xform","mustache","template","HTMLTemplateElement","innerHTML","patch","toTemplateStringsArray","KEYWORDS","UNARY_OPERATORS","BINARY_OPERATORS","PRECEDENCE","_TWO_CHAR_OPS","_THREE_CHAR_OPS","Kind","token","kind","precedence","_isIdentOrKeywordStart","ch","_isNumber","Tokenizer","constructor","input","this","_index","_tokenStart","_input","_advance","nextToken","_next","_isQuote","_tokenizeString","_tokenizeIdentOrKeyword","_tokenizeNumber","_tokenizeDot","_tokenizeComma","_tokenizeColon","_isOperator","_tokenizeOperator","_isGrouper","_tokenizeGrouper","resetTokenStart","charCodeAt","_getValue","lookahead","v","_clearValue","_us","quoteChar","STRING","str","replace","_match","group","KEYWORD","IDENTIFIER","INTEGER","_tokenizeFraction","DOT","COMMA","COLON","DECIMAL","op","OPERATOR","String","fromCharCode","GROUPER","parse","expr","astFactory","Parser","_tokenizer","_ast","_parseExpression","_matches","_token","_kind","_value","empty","_parseUnary","_parsePrecedence","left","args","_parseArguments","invoke","indexExpr","_parseIndex","index","right","_makeInvokeOrGetter","_parseTernary","_parseBinary","type","getter","receiver","method","arguments","binary","_parseInteger","_parseDecimal","_parsePrimary","unary","condition","trueExpr","falseExpr","ternary","keyword","id","_parseInvokeOrIdentifier","_parseString","_parseParen","_parseMap","_parseList","items","list","entries","literal","identifier","_parseIdentifier","paren","prefix","parseInt","parseFloat","_BINARY_OPERATORS","a","b","f","_UNARY_OPERATORS","AttributePart","PropertyPart","BooleanAttributePart","EventPart","_Σ","EvalAstFactory","evaluate","scope","getIds","idents","_scope","operator","child","l","r","g","n","name","_a","_this","_b","argValues","apply","forEach","e","argument","c","val","i","expressionCache","Map","toCamelCase","s","_","p1","toUpperCase","getSingleValue","model","ast","get","has","trim","startsWith","endsWith","expression","set","defaultHandlers","if","handlers","renderers","ifAttribute","getAttribute","evaluateTemplate","repeat","repeatAttribute","Symbol","iterator","nothing","litTemplate","getLitTemplate","item","itemModel","create","parts","part","update","templateResult","_$litType$","prepareTemplate","superTemplate","templateRenderers","superLitTemplate","superRenderers","superCallRenderer","super","litTemplateCache","makeLitTemplate","h","el","cloneNode","walker","document","createTreeWalker","content","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","node","currentNode","nodeIndex","elementsToRemove","nextNode","nodeType","Node","ELEMENT_NODE","element","tagName","parentNode","insertBefore","createComment","handler","superRenderer","superCallTemplate","renderer","attributeNames","getAttributeNames","attributeName","attributeValue","splitValue","removeAttribute","ctor","strings","exprs","exprText","_handlers","_renderers","TEXT_NODE","textNode","text","textContent","newTextNode","Text","nextSibling","remove","createMustacheTransformer","arg1","arg2","assign","createStampinoTransformer","options","ensure","createElement","TypeError"],"sources":["cdp:///@cdp/extension-template-bridge/lit-transformer/src/lit-transformer.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/helper/dataHelper.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/variableTransformer.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/unsafeVariable.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/helper/isMustacheFalsy.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/helper/sectionHelper.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/section.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/invertedSection.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/comment.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/transformers/customDelimiter.js","cdp:///@cdp/extension-template-bridge/lit-transformer/src/lit-transformer-configuredOutOfTheBox.js","cdp:///@cdp/extension-template-bridge/bridge-mustache.ts","cdp:///@cdp/extension-template-bridge/jexpr/src/lib/constants.ts","cdp:///@cdp/extension-template-bridge/jexpr/src/lib/tokenizer.ts","cdp:///@cdp/extension-template-bridge/jexpr/src/lib/parser.ts","cdp:///@cdp/extension-template-bridge/jexpr/src/lib/eval.ts","cdp:///@cdp/extension-template-bridge/stampino/src/stampino.ts","cdp:///@cdp/extension-template-bridge/bridge-stampino.ts"],"sourcesContent":["/** \r\n * @param {object} config = {\r\n *  html: lit-html.html,\r\n *  delimiter: { start: '{{', end: '}}' },\r\n *  transformers: { // note that transformVariable is not here. It gets applied when no transformer.test has passed\r\n *    name: {\r\n *      test: (str, config) => bool,\r\n *      transform: (str, config) => ({\r\n *        remainingTmplStr: str,\r\n *        insertionPoint: ctx => lit-html.TemplateResult | undefined, // if undefined remainingTmplStr will be merged with last static part \r\n *      }),\r\n *    },\r\n *  },\r\n *  transformVariable, \r\n * }\r\n * @returns {function} strTemplate => ctx => lit-html.TemplateResult\r\n */\r\nexport default config => strTemplate => transform(strTemplate, config)\r\n\r\nexport function transform(tmpl2Parse, config) {\r\n  const staticParts = []\r\n  const insertionPoints = []\r\n\r\n  let remainingTmplStr = tmpl2Parse\r\n  let startIndexOfIP = remainingTmplStr.indexOf(config.delimiter.start)\r\n  while (startIndexOfIP >= 0) {\r\n    if (remainingTmplStr.indexOf(config.delimiter.end, startIndexOfIP) < 0)\r\n      throw new Error(`missing end delimiter at: '${remainingTmplStr}'`)\r\n\r\n    staticParts.push(remainingTmplStr.substring(0, startIndexOfIP))\r\n\r\n    const iPTransformResult = transformIP(\r\n      remainingTmplStr.substring(startIndexOfIP + config.delimiter.start.length),\r\n      config\r\n    )\r\n\r\n    if (iPTransformResult.insertionPoint) {\r\n      remainingTmplStr = iPTransformResult.remainingTmplStr\r\n      insertionPoints.push(iPTransformResult.insertionPoint)\r\n      startIndexOfIP = remainingTmplStr.indexOf(config.delimiter.start)\r\n    } else { // e.g. comment or customDelimeter\r\n      const lastStaticPart = staticParts.pop()\r\n      remainingTmplStr = lastStaticPart + iPTransformResult.remainingTmplStr\r\n      startIndexOfIP = remainingTmplStr.indexOf(config.delimiter.start, lastStaticPart.length)\r\n    }\r\n  }\r\n\r\n  staticParts.push(remainingTmplStr)\r\n\r\n  return ctx =>\r\n    config.html(staticParts, ...insertionPoints.map(iP => iP(ctx)))\r\n}\r\n\r\nfunction transformIP(remainingTmplStr, config) {\r\n  const transformer = Object.values(config.transformers).find(t => t.test(remainingTmplStr, config))\r\n  const transformFunction = transformer\r\n    ? transformer.transform\r\n    : config.transformVariable\r\n  return transformFunction(remainingTmplStr, config)\r\n}","export function ctx2Value(ctx, key) {\r\n  if (key === '.')\r\n    return ctx\r\n\r\n  let result = ctx\r\n  for (let k of key.split('.')) {\r\n    if (!result.hasOwnProperty(k))\r\n      return ''\r\n\r\n    result = result[k]\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nexport function ctx2MustacheString(ctx, key) {\r\n  return mustacheStringyfy(ctx2Value(ctx, key))\r\n}\r\n\r\nfunction mustacheStringyfy(value) {\r\n  if (value === undefined || value === null)\r\n    return ''\r\n\r\n  return '' + value\r\n}","import { ctx2MustacheString } from '../helper/dataHelper.js'\r\n\r\nexport default (remainingTmplStr, { delimiter }) => {\r\n  const indexOfEndDelimiter = remainingTmplStr.indexOf(delimiter.end)\r\n  const dataKey = remainingTmplStr.substring(0, indexOfEndDelimiter)\r\n  return {\r\n    remainingTmplStr: remainingTmplStr.substring(indexOfEndDelimiter + delimiter.end.length),\r\n    insertionPoint: ctx => ctx2MustacheString(ctx, dataKey)\r\n  }\r\n}","import { ctx2MustacheString } from '../helper/dataHelper.js'\r\n\r\n/** Note, this is unsafe to use, because the rendered output could be any JavaScript! */\r\nexport default unsafeHTML => ({\r\n  test: remainingTmplStr => remainingTmplStr[0] === '{',\r\n  transform: (remainingTmplStr, { delimiter }) => {\r\n    const indexOfEndDelimiter = remainingTmplStr.indexOf('}' + delimiter.end)\r\n    if (indexOfEndDelimiter < 0)\r\n      throw new Error(`missing end delimiter at: '${delimiter.start}${remainingTmplStr}'`)\r\n  \r\n    const dataKey = remainingTmplStr.substring(1, indexOfEndDelimiter)\r\n    return {\r\n      remainingTmplStr: remainingTmplStr.substring(indexOfEndDelimiter + 1 + delimiter.end.length),\r\n      insertionPoint: ctx => unsafeHTML(ctx2MustacheString(ctx, dataKey)),\r\n    }\r\n  }\r\n})","export function isMustacheFalsy(value) {\r\n  return [null, undefined, false, 0, NaN, '']\r\n    .some(falsy => falsy === value)\r\n    || (value.length && value.length === 0)\r\n}","export function parseSection(tmplStr, delimiter) {\r\n  const indexOfStartTagEnd = tmplStr.indexOf(delimiter.end)\r\n  const dataKey = tmplStr.substring(1, indexOfStartTagEnd)\r\n  const endTag = `${delimiter.start}/${dataKey}${delimiter.end}`\r\n  const indexOfEndTagStart = tmplStr.indexOf(endTag)\r\n  if (indexOfEndTagStart < 0)\r\n    throw new Error(`missing end delimiter at: '${delimiter.start}${tmplStr}'`)\r\n  \r\n  return {\r\n    dataKey,\r\n    innerTmpl: tmplStr.substring(indexOfStartTagEnd + delimiter.start.length, indexOfEndTagStart),\r\n    remainingTmplStr: tmplStr.substring(indexOfEndTagStart + endTag.length),\r\n  }\r\n}","import { transform } from '../lit-transformer.js'\r\nimport { ctx2Value } from '../helper/dataHelper.js'\r\nimport { isMustacheFalsy } from '../helper/isMustacheFalsy.js'\r\nimport { parseSection } from '../helper/sectionHelper.js'\r\n\r\n/** Note, unlike within mustache functions as data values are not supported out of the box */\r\nexport default () => ({\r\n  test: remainingTmplStr => remainingTmplStr[0] === '#',\r\n  transform: (remainingTmplStr, config) => {\r\n    const parsedSection = parseSection(remainingTmplStr, config.delimiter)\r\n    const transformedInnerTmpl = transform(parsedSection.innerTmpl, config)\r\n    \r\n    return {\r\n      remainingTmplStr: parsedSection.remainingTmplStr,\r\n      insertionPoint: ctx => {\r\n        const sectionData = ctx2Value(ctx, parsedSection.dataKey)\r\n        \r\n        if (isMustacheFalsy(sectionData))\r\n          return '';\r\n\r\n        return sectionData.map\r\n          ? sectionData.map(innerCtx => transformedInnerTmpl(innerCtx))\r\n          : transformedInnerTmpl(ctx)\r\n      }\r\n    }\r\n  }\r\n})","import { ctx2Value } from '../helper/dataHelper.js'\r\nimport { isMustacheFalsy } from '../helper/isMustacheFalsy.js'\r\nimport { parseSection } from '../helper/sectionHelper.js'\r\n\r\nexport default () => ({\r\n  test: remainingTmplStr => remainingTmplStr[0] === '^',\r\n  transform: (remainingTmplStr, { delimiter }) => {\r\n    const parsedSection = parseSection(remainingTmplStr, delimiter)\r\n\r\n    return {\r\n      remainingTmplStr: parsedSection.remainingTmplStr,\r\n      insertionPoint: ctx =>\r\n        isMustacheFalsy(ctx2Value(ctx, parsedSection.dataKey))\r\n          ? parsedSection.innerTmpl\r\n          : '',\r\n    }\r\n  }\r\n})","export default () => ({\r\n  test: remainingTmplStr => remainingTmplStr[0] === '!',\r\n  transform: (remainingTmplStr, { delimiter }) => ({\r\n    remainingTmplStr: remainingTmplStr.substring(remainingTmplStr.indexOf(delimiter.end) + delimiter.end.length),\r\n    insertionPoint: undefined,\r\n  })\r\n})","export default () => ({\r\n  test: remainingTmplStr => remainingTmplStr[0] === '=',\r\n  transform: (remainingTmplStr, config) => {\r\n    const originalEndDeliLength = config.delimiter.end.length\r\n    const indexOfEndTag = remainingTmplStr.indexOf('=' + config.delimiter.end)\r\n    if (indexOfEndTag < 0 )\r\n      throw new Error(`missing end delimiter at: '${remainingTmplStr}'`)\r\n\r\n    const [ newStartDeli, newEndDeli ] = remainingTmplStr.substring(1, indexOfEndTag).split(' ')\r\n\r\n    config.delimiter.start = newStartDeli\r\n    config.delimiter.end = newEndDeli\r\n    \r\n    return {\r\n      remainingTmplStr: remainingTmplStr.substring(indexOfEndTag + 1 + originalEndDeliLength),\r\n      insertionPoint: undefined,  \r\n    }\r\n  }\r\n})","import createTransform from './lit-transformer.js'\r\nimport transformVariable from './transformers/variableTransformer.js'\r\nimport unsafeVariableTransformer from './transformers/unsafeVariable.js'\r\nimport sectionTransformer from './transformers/section.js'\r\nimport invertedSectionTransformer from './transformers/invertedSection.js'\r\nimport commentTransformer from './transformers/comment.js'\r\nimport customDelimiterTransformer from './transformers/customDelimiter.js'\r\n\r\nexport default (html, unsafeHTML) =>\r\n  createTransform({\r\n    html,\r\n    delimiter: { start: '{{', end: '}}' },\r\n    transformVariable,\r\n    transformers: {\r\n      unsafeVariable: unsafeVariableTransformer(unsafeHTML),\r\n      section: sectionTransformer(),\r\n      invertedSection: invertedSectionTransformer(),\r\n      comment: commentTransformer(),\r\n      customDelimiterTransformer: customDelimiterTransformer(),\r\n    },\r\n  })","import { toTemplateStringsArray } from '@cdp/extension-template';\nimport type { TemplateBridgeEndine, TemplateTransformer } from '@bridge/interfaces';\nimport type {\n    MustacheTransformer,\n    TemplateTag,\n    TransformDirective,\n    TransformTester,\n    TransformExecutor,\n    TransformeContext,\n    TransformConfig,\n} from 'lit-transformer/src/interfaces';\n\nimport createDefault from 'lit-transformer';\nimport createCustom from 'lit-transformer/src/lit-transformer';\n\nimport variable from 'lit-transformer/src/transformers/variableTransformer';\nimport unsafeVariable from 'lit-transformer/src/transformers/unsafeVariable';\nimport section from 'lit-transformer/src/transformers/section';\nimport invertedSection from 'lit-transformer/src/transformers/invertedSection';\nimport comment from 'lit-transformer/src/transformers/comment';\nimport customDelimiter from 'lit-transformer/src/transformers/customDelimiter';\n\nconst xform = (mustache: MustacheTransformer): TemplateTransformer => {\n    return (template: HTMLTemplateElement | string): TemplateBridgeEndine => {\n        return mustache(template instanceof HTMLTemplateElement ? template.innerHTML : template);\n    };\n};\n\n/*\n * lit-html v2.1.0+\n * TemplateStringsArray を厳密にチェックするようになったため patch をあてる\n * https://github.com/lit/lit/pull/2307\n *\n * 将来 `Array.isTemplateObject()` を使用される場合, 本対応も見直す必要あり\n * https://tc39.es/proposal-array-is-template-object/\n */\nconst patch = (html: TemplateTag): TemplateTag => {\n    return (template: TemplateStringsArray, ...values: unknown[]) => {\n        return html(toTemplateStringsArray(template), ...values);\n    };\n};\n\nfunction createMustacheTransformer(html: TemplateTag, unsafeHTML: TransformDirective): TemplateTransformer;\nfunction createMustacheTransformer(config: TransformConfig): TemplateTransformer;\nfunction createMustacheTransformer(arg1: unknown, arg2?: unknown): TemplateTransformer {\n    if ('function' === typeof arg1) {\n        return xform(createDefault(patch(arg1 as TemplateTag), arg2 as TransformDirective));\n    } else {\n        const { html } = arg1 as { html: TemplateTag; };\n        return xform(\n            createCustom(Object.assign({\n                delimiter: { start: '{{', end: '}}' },\n                transformers: {},\n            }, arg1, { html: patch(html) }) as TransformConfig)\n        );\n    }\n}\n\nconst transformer: {\n    variable: TransformExecutor;\n    unsafeVariable: (unsafeHTML: TransformDirective) => TransformeContext;\n    section: () => TransformeContext;\n    invertedSection: () => TransformeContext;\n    comment: () => TransformeContext;\n    customDelimiter: () => TransformeContext;\n} = {\n    variable,\n    unsafeVariable,\n    section,\n    invertedSection,\n    comment,\n    customDelimiter,\n};\n\nexport {\n    TemplateTag,\n    TransformDirective,\n    TemplateTransformer,\n    TransformTester,\n    TransformExecutor,\n    TransformeContext,\n    TransformConfig,\n    createMustacheTransformer,\n    transformer,\n};\n",null,null,null,null,null,"import type {\n    TemplateBridgeArg,\n    TemplateTransformer,\n} from '@bridge/interfaces';\nimport {\n    TemplateHandler,\n    TemplateHandlers,\n    TemplateRenderers,\n    EvaluateTemplateResult,\n    prepareTemplate,\n    evaluateTemplate,\n} from 'stampino';\n\nexport interface CreateStampinoTemplateOptions {\n    handlers?: TemplateHandlers;\n    renderers?: TemplateRenderers;\n    superTemplate?: HTMLTemplateElement | undefined;\n}\n\nfunction ensure(template: HTMLTemplateElement | string): HTMLTemplateElement {\n    if (template instanceof HTMLTemplateElement) {\n        return template;\n    } else if ('string' === typeof template) {\n        const element = document.createElement('template');\n        element.innerHTML = template;\n        return element;\n    } else {\n        throw new TypeError(`Type of template is not a valid. [typeof: ${typeof template}]`);\n    }\n}\n\nfunction createStampinoTransformer(options?: CreateStampinoTemplateOptions): TemplateTransformer {\n    const { handlers, renderers, superTemplate } = options || {};\n    return (template: HTMLTemplateElement | string) => {\n        return prepareTemplate(ensure(template), handlers, renderers, superTemplate);\n    };\n}\n\nexport {\n    TemplateBridgeArg,\n    TemplateHandler,\n    TemplateHandlers,\n    TemplateRenderers,\n    EvaluateTemplateResult,\n    createStampinoTransformer,\n    prepareTemplate,\n    evaluateTemplate,\n};\n"],"mappings":"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"}