{"version":3,"sources":["cdp:///@cdp/extension-i18n/i18next/src/logger.js","cdp:///@cdp/extension-i18n/i18next/src/EventEmitter.js","cdp:///@cdp/extension-i18n/i18next/src/utils.js","cdp:///@cdp/extension-i18n/i18next/src/ResourceStore.js","cdp:///@cdp/extension-i18n/i18next/src/postProcessor.js","cdp:///@cdp/extension-i18n/i18next/src/Translator.js","cdp:///@cdp/extension-i18n/i18next/src/LanguageUtils.js","cdp:///@cdp/extension-i18n/i18next/src/PluralResolver.js","cdp:///@cdp/extension-i18n/i18next/src/Interpolator.js","cdp:///@cdp/extension-i18n/i18next/src/BackendConnector.js","cdp:///@cdp/extension-i18n/i18next/src/defaults.js","cdp:///@cdp/extension-i18n/i18next/src/i18next.js","cdp:///@cdp/extension-i18n/index.ts"],"names":["consoleLogger","type","log","args","this","output","warn","error","console","Logger","constructor","concreteLogger","options","init","prefix","logger","debug","setDebug","bool","forward","deprecate","lvl","debugOnly","create","moduleName","baseLogger","EventEmitter","observers","on","events","listener","split","forEach","event","push","off","filter","l","emit","cloned","concat","observer","apply","defer","res","rej","promise","Promise","resolve","reject","makeString","object","getLastOfPath","path","Empty","cleanKey","key","indexOf","replace","canNotTraverseDeeper","stack","length","shift","Object","prototype","hasOwnProperty","call","obj","k","setPath","newValue","getPath","getPathWithDefaults","data","defaultData","value","undefined","deepExtend","target","source","overwrite","prop","String","regexEscape","str","_entityMap","escape","s","window","navigator","userAgent","chars","deepFind","keySeparator","paths","current","i","j","p","slice","join","mix","joinedPath","ResourceStore","ns","defaultNS","super","ignoreJSONStructure","addNamespaces","removeNamespaces","index","splice","getResource","lng","result","utils.getPath","addResource","silent","utils.setPath","addResources","resources","m","toString","addResourceBundle","deep","pack","utils.deepExtend","removeResourceBundle","hasResourceBundle","getResourceBundle","compatibilityAPI","getDataByLanguage","hasLanguageSomeTranslations","n","keys","find","v","toJSON","postProcessor","processors","addPostProcessor","module","name","handle","translator","processor","process","checkedLoadedFor","Translator","services","copy","a","t","utils.copy","changeLanguage","language","exists","interpolation","resolved","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","looksLikeObjectPath","possibleChars","c","r","RegExp","map","test","utils.looksLikeObjectPath","match","interpolator","nestingRegexp","parts","translate","lastKey","overloadTranslationOptionHandler","arguments","Array","isArray","namespace","appendNamespaceToCIMode","toLowerCase","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","extendTranslation","usedDefault","needsPluralHandling","count","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValue","isValidLookup","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","fallbackValue","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","parse","usedLng","usedNS","skipInterpolation","skipOnVariables","nestBef","nb","defaultVariables","interpolate","na","nestAft","nest","context","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsContextHandling","codes","utils","hasLoadedNamespace","code","finalKey","finalKeys","addLookupKeys","pluralSuffix","contextSeparator","possibleKey","pop","returnNull","returnEmptyString","resourceStore","static","option","substring","capitalize","string","charAt","toUpperCase","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","specialCases","lowerCaseLng","part","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngOnly","supportedLng","fallbacks","default","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","Number","deprecatedJsonVersions","suffixesOrder","zero","one","two","few","many","other","PluralResolver","rules","createRules","set","numbers","plurals","addRule","getRule","shouldUseIntlApi","Intl","PluralRules","ordinal","needsPlural","rule","resolvedOptions","pluralCategories","getPluralFormsOfKey","sort","pluralCategory1","pluralCategory2","pluralCategory","prepend","number","select","getSuffixRetroCompatible","idx","noAbs","Math","abs","simplifyPluralSuffix","returnSuffix","compatibilityJSON","includes","Interpolator","format","escapeValue","iOpts","utils.escape","useRawValueToEscape","utils.regexEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","val","handleFormat","utils.getPathWithDefaults","interpolationkey","trim","f","missingInterpolationHandler","todos","regex","safeValue","todo","exec","temp","utils.makeString","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","JSON","e","formatters","doReduce","elem","reduce","Connector","backend","store","state","queue","queueLoad","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","loaded","errors","err","q","pushPath","utils.pushPath","remove","arr","what","done","read","fcName","tried","wait","setTimeout","prepareLoading","loadOne","isUpdate","transformOptions","noop","I18n","modules","external","isInitialized","isClone","initImmediate","createClassOnDemand","ClassOrObject","preload","pluralSeparator","partialBundledLanguages","ret","tDescription","lu","LanguageUtils","bind","BackendConnector","languageDetector","detection","deferred","finish","initializedStoreOnce","loadResources","usedCallback","append","reloadResources","use","Error","isLanguageChangingTo","setLngProps","resolvedLanguage","li","lngInLngs","setLng","cacheUserLanguage","async","detect","getFixedT","keyPrefix","fixedT","opts","rest","resultKey","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","dir","createInstance","cloneInstance","mergedOptions","clone","i18next","i18n"],"mappings":"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","sourcesContent":["const consoleLogger = {\n  type: 'logger',\n\n  log(args) {\n    this.output('log', args);\n  },\n\n  warn(args) {\n    this.output('warn', args);\n  },\n\n  error(args) {\n    this.output('error', args);\n  },\n\n  output(type, args) {\n    /* eslint no-console: 0 */\n    if (console && console[type]) console[type].apply(console, args);\n  },\n};\n\nclass Logger {\n  constructor(concreteLogger, options = {}) {\n    this.init(concreteLogger, options);\n  }\n\n  init(concreteLogger, options = {}) {\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n\n  setDebug(bool) {\n    this.debug = bool;\n  }\n\n  log(...args) {\n    return this.forward(args, 'log', '', true);\n  }\n\n  warn(...args) {\n    return this.forward(args, 'warn', '', true);\n  }\n\n  error(...args) {\n    return this.forward(args, 'error', '');\n  }\n\n  deprecate(...args) {\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (typeof args[0] === 'string') args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{ prefix: `${this.prefix}:${moduleName}:` },\n      ...this.options,\n    });\n  }\n}\n\nexport default new Logger();\n","class EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n\n  on(events, listener) {\n    events.split(' ').forEach((event) => {\n      this.observers[event] = this.observers[event] || [];\n      this.observers[event].push(listener);\n    });\n    return this;\n  }\n\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n\n    this.observers[event] = this.observers[event].filter((l) => l !== listener);\n  }\n\n  emit(event, ...args) {\n    if (this.observers[event]) {\n      const cloned = [].concat(this.observers[event]);\n      cloned.forEach((observer) => {\n        observer(...args);\n      });\n    }\n\n    if (this.observers['*']) {\n      const cloned = [].concat(this.observers['*']);\n      cloned.forEach((observer) => {\n        observer.apply(observer, [event, ...args]);\n      });\n    }\n  }\n}\n\nexport default EventEmitter;\n","// http://lea.verou.me/2016/12/resolve-promises-externally-with-this-one-weird-trick/\nexport function defer() {\n  let res;\n  let rej;\n\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n\n  promise.resolve = res;\n  promise.reject = rej;\n\n  return promise;\n}\n\nexport function makeString(object) {\n  if (object == null) return '';\n  /* eslint prefer-template: 0 */\n  return '' + object;\n}\n\nexport function copy(a, s, t) {\n  a.forEach((m) => {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  const stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n\n    const key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    // prevent prototype pollution\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift()),\n  };\n}\n\nexport function setPath(object, path, newValue) {\n  const { obj, k } = getLastOfPath(object, path, Object);\n\n  obj[k] = newValue;\n}\n\nexport function pushPath(object, path, newValue, concat) {\n  const { obj, k } = getLastOfPath(object, path, Object);\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\n\nexport function getPath(object, path) {\n  const { obj, k } = getLastOfPath(object, path);\n\n  if (!obj) return undefined;\n  return obj[k];\n}\n\nexport function getPathWithDefaults(data, defaultData, key) {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  // Fallback to default values\n  return getPath(defaultData, key);\n}\n\nexport function deepExtend(target, source, overwrite) {\n  /* eslint no-restricted-syntax: 0 */\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch\n        if (\n          typeof target[prop] === 'string' ||\n          target[prop] instanceof String ||\n          typeof source[prop] === 'string' ||\n          source[prop] instanceof String\n        ) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\n\nexport function regexEscape(str) {\n  /* eslint no-useless-escape: 0 */\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\n/* eslint-disable */\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;',\n};\n/* eslint-enable */\n\nexport function escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, (s) => _entityMap[s]);\n  }\n\n  return data;\n}\n\nexport const isIE10 =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.userAgent &&\n  window.navigator.userAgent.indexOf('MSIE') > -1;\n\nconst chars = [' ', ',', '?', '!', ';'];\nexport function looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(\n    (c) => nsSeparator.indexOf(c) < 0 || keySeparator.indexOf(c) < 0,\n  );\n  if (possibleChars.length === 0) return true;\n  const r = new RegExp(`(${possibleChars.map((c) => (c === '?' ? '\\\\?' : c)).join('|')})`);\n  return !r.test(key);\n}\n","import EventEmitter from './EventEmitter.js';\nimport * as utils from './utils.js';\n\nfunction deepFind(obj, path, keySeparator = '.') {\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  const paths = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      let j = 2;\n      let p = paths.slice(i, i + j).join(keySeparator);\n      let mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (typeof mix === 'string') return mix;\n      if (p && typeof mix[p] === 'string') return mix[p];\n      const joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data, options = { ns: ['translation'], defaultNS: 'translation' }) {\n    super();\n    if (utils.isIE10) {\n      EventEmitter.call(this); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n\n  getResource(lng, ns, key, options = {}) {\n    const keySeparator =\n      options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n    const ignoreJSONStructure =\n      options.ignoreJSONStructure !== undefined\n        ? options.ignoreJSONStructure\n        : this.options.ignoreJSONStructure;\n\n    let path = [lng, ns];\n    if (key && typeof key !== 'string') path = path.concat(key);\n    if (key && typeof key === 'string')\n      path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    }\n\n    const result = utils.getPath(this.data, path);\n    if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n\n    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n  }\n\n  addResource(lng, ns, key, value, options = { silent: false }) {\n    let keySeparator = this.options.keySeparator;\n    if (keySeparator === undefined) keySeparator = '.';\n\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n\n    this.addNamespaces(ns);\n\n    utils.setPath(this.data, path, value);\n\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n\n  addResources(lng, ns, resources, options = { silent: false }) {\n    /* eslint no-restricted-syntax: 0 */\n    for (const m in resources) {\n      if (\n        typeof resources[m] === 'string' ||\n        Object.prototype.toString.apply(resources[m]) === '[object Array]'\n      )\n        this.addResource(lng, ns, m, resources[m], { silent: true });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n\n  addResourceBundle(lng, ns, resources, deep, overwrite, options = { silent: false }) {\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n\n    this.addNamespaces(ns);\n\n    let pack = utils.getPath(this.data, path) || {};\n\n    if (deep) {\n      utils.deepExtend(pack, resources, overwrite);\n    } else {\n      pack = { ...pack, ...resources };\n    }\n\n    utils.setPath(this.data, path, pack);\n\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n\n    this.emit('removed', lng, ns);\n  }\n\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n\n    // COMPATIBILITY: remove extend in v2.1.0\n    if (this.options.compatibilityAPI === 'v1') return { ...{}, ...this.getResource(lng, ns) };\n\n    return this.getResource(lng, ns);\n  }\n\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = (data && Object.keys(data)) || [];\n    return !!n.find((v) => data[v] && Object.keys(data[v]).length > 0);\n  }\n\n  toJSON() {\n    return this.data;\n  }\n}\n\nexport default ResourceStore;\n","export default {\n  processors: {},\n\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n\n  handle(processors, value, key, options, translator) {\n    processors.forEach((processor) => {\n      if (this.processors[processor])\n        value = this.processors[processor].process(value, key, options, translator);\n    });\n\n    return value;\n  },\n};\n","import baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport postProcessor from './postProcessor.js';\nimport * as utils from './utils.js';\n\nconst checkedLoadedFor = {};\n\nclass Translator extends EventEmitter {\n  constructor(services, options = {}) {\n    super();\n    if (utils.isIE10) {\n      EventEmitter.call(this); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    utils.copy(\n      [\n        'resourceStore',\n        'languageUtils',\n        'pluralResolver',\n        'interpolator',\n        'backendConnector',\n        'i18nFormat',\n        'utils',\n      ],\n      services,\n      this,\n    );\n\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n\n    this.logger = baseLogger.create('translator');\n  }\n\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n\n  exists(key, options = { interpolation: {} }) {\n    if (key === undefined || key === null) {\n      return false;\n    }\n\n    const resolved = this.resolve(key, options);\n    return resolved && resolved.res !== undefined;\n  }\n\n  extractFromKey(key, options) {\n    let nsSeparator =\n      options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n\n    const keySeparator =\n      options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n    let namespaces = options.ns || this.options.defaultNS;\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !utils.looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces,\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (\n        nsSeparator !== keySeparator ||\n        (nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1)\n      )\n        namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n\n    return {\n      key,\n      namespaces,\n    };\n  }\n\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      /* eslint prefer-rest-params: 0 */\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (!options) options = {};\n\n    // non valid keys handling\n    if (keys === undefined || keys === null /* || keys === ''*/) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n\n    // separators\n    const keySeparator =\n      options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n    // get namespace(s)\n    const { key, namespaces } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n\n    // return key on CIMode\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode =\n      options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng && lng.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        return namespace + nsSeparator + key;\n      }\n\n      return key;\n    }\n\n    // resolve from store\n    const resolved = this.resolve(keys, options);\n    let res = resolved && resolved.res;\n    const resUsedKey = (resolved && resolved.usedKey) || key;\n    const resExactUsedKey = (resolved && resolved.exactUsedKey) || key;\n\n    const resType = Object.prototype.toString.apply(res);\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays =\n      options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n\n    // object\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const handleAsObject =\n      typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n    if (\n      handleAsObjectInI18nFormat &&\n      res &&\n      handleAsObject &&\n      noObject.indexOf(resType) < 0 &&\n      !(typeof joinArrays === 'string' && resType === '[object Array]')\n    ) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        return this.options.returnedObjectHandler\n          ? this.options.returnedObjectHandler(resUsedKey, res, { ...options, ns: namespaces })\n          : `key '${key} (${this.language})' returned an object instead of string.`;\n      }\n\n      // if we got a separator we loop over children - else we just return object as is\n      // as having it set to false means no hierarchy so no lookup for nested values\n      if (keySeparator) {\n        const resTypeIsArray = resType === '[object Array]';\n        const copy = resTypeIsArray ? [] : {}; // apply child translation on a copy\n\n        /* eslint no-restricted-syntax: 0 */\n        let newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in res) {\n          if (Object.prototype.hasOwnProperty.call(res, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            copy[m] = this.translate(deepKey, {\n              ...options,\n              ...{ joinArrays: false, ns: namespaces },\n            });\n            if (copy[m] === deepKey) copy[m] = res[m]; // if nothing found use orginal value as fallback\n          }\n        }\n        res = copy;\n      }\n    } else if (\n      handleAsObjectInI18nFormat &&\n      typeof joinArrays === 'string' &&\n      resType === '[object Array]'\n    ) {\n      // array special treatment\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      // string, empty or null\n      let usedDefault = false;\n      let usedKey = false;\n\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const hasDefaultValue = Translator.hasDefaultValue(options);\n      const defaultValueSuffix = needsPluralHandling\n        ? this.pluralResolver.getSuffix(lng, options.count, options)\n        : '';\n      const defaultValue = options[`defaultValue${defaultValueSuffix}`] || options.defaultValue;\n\n      // fallback value\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n\n      const missingKeyNoValueFallbackToKey =\n        options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n\n      // save missing\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(\n          updateMissing ? 'updateKey' : 'missingKey',\n          lng,\n          namespace,\n          key,\n          updateMissing ? defaultValue : res,\n        );\n        if (keySeparator) {\n          const fk = this.resolve(key, { ...options, keySeparator: false });\n          if (fk && fk.res)\n            this.logger.warn(\n              'Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.',\n            );\n        }\n\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(\n          this.options.fallbackLng,\n          options.lng || this.language,\n        );\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n\n        const send = (l, k, fallbackValue) => {\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(\n              l,\n              namespace,\n              k,\n              updateMissing ? fallbackValue : resForMissing,\n              updateMissing,\n              options,\n            );\n          } else if (this.backendConnector && this.backendConnector.saveMissing) {\n            this.backendConnector.saveMissing(\n              l,\n              namespace,\n              k,\n              updateMissing ? fallbackValue : resForMissing,\n              updateMissing,\n              options,\n            );\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach((language) => {\n              this.pluralResolver.getSuffixes(language).forEach((suffix) => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n\n      // extend\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n\n      // append namespace if still key\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey)\n        res = `${namespace}:${key}`;\n\n      // parseMissingKeyHandler\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler)\n        res = this.options.parseMissingKeyHandler(res);\n    }\n\n    // return\n    return res;\n  }\n\n  extendTranslation(res, key, options, resolved, lastKey) {\n    if (this.i18nFormat && this.i18nFormat.parse) {\n      res = this.i18nFormat.parse(\n        res,\n        options,\n        resolved.usedLng,\n        resolved.usedNS,\n        resolved.usedKey,\n        { resolved },\n      );\n    } else if (!options.skipInterpolation) {\n      // i18next.parsing\n      if (options.interpolation)\n        this.interpolator.init({\n          ...options,\n          ...{ interpolation: { ...this.options.interpolation, ...options.interpolation } },\n        });\n      const skipOnVariables =\n        (options.interpolation && options.interpolation.skipOnVariables) ||\n        this.options.interpolation.skipOnVariables;\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        // has nesting aftbeforeer interpolation\n        nestBef = nb && nb.length;\n      }\n\n      // interpolate\n      let data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n      if (this.options.interpolation.defaultVariables)\n        data = { ...this.options.interpolation.defaultVariables, ...data };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n      // nesting\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        // has nesting after interpolation\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (options.nest !== false)\n        res = this.interpolator.nest(\n          res,\n          (...args) => {\n            if (lastKey && lastKey[0] === args[0] && !options.context) {\n              this.logger.warn(\n                `It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`,\n              );\n              return null;\n            }\n            return this.translate(...args, key);\n          },\n          options,\n        );\n\n      if (options.interpolation) this.interpolator.reset();\n    }\n\n    // post process\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n    if (\n      res !== undefined &&\n      res !== null &&\n      postProcessorNames &&\n      postProcessorNames.length &&\n      options.applyPostProcessor !== false\n    ) {\n      res = postProcessor.handle(\n        postProcessorNames,\n        res,\n        key,\n        this.options && this.options.postProcessPassResolved\n          ? { i18nResolved: resolved, ...options }\n          : options,\n        this,\n      );\n    }\n\n    return res;\n  }\n\n  resolve(keys, options = {}) {\n    let found;\n    let usedKey; // plain key\n    let exactUsedKey; // key with context / plural\n    let usedLng;\n    let usedNS;\n\n    if (typeof keys === 'string') keys = [keys];\n\n    // forEach possible key\n    keys.forEach((k) => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const needsContextHandling =\n        options.context !== undefined &&\n        (typeof options.context === 'string' || typeof options.context === 'number') &&\n        options.context !== '';\n\n      const codes = options.lngs\n        ? options.lngs\n        : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n\n      namespaces.forEach((ns) => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n\n        if (\n          !checkedLoadedFor[`${codes[0]}-${ns}`] &&\n          this.utils &&\n          this.utils.hasLoadedNamespace &&\n          !this.utils.hasLoadedNamespace(usedNS)\n        ) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(\n            `key \"${usedKey}\" for languages \"${codes.join(\n              ', ',\n            )}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`,\n            'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!',\n          );\n        }\n\n        codes.forEach((code) => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n\n          let finalKey = key;\n          const finalKeys = [finalKey];\n\n          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling)\n              pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n\n            // fallback for plural if context not found\n            if (needsPluralHandling && needsContextHandling)\n              finalKeys.push(finalKey + pluralSuffix);\n\n            // get key for context if needed\n            if (needsContextHandling)\n              finalKeys.push((finalKey += `${this.options.contextSeparator}${options.context}`));\n\n            // get key for plural if needed\n            if (needsPluralHandling) finalKeys.push((finalKey += pluralSuffix));\n          }\n\n          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only\n          let possibleKey;\n          /* eslint no-cond-assign: 0 */\n          while ((possibleKey = finalKeys.pop())) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n\n    return { res: found, usedKey, exactUsedKey, usedLng, usedNS };\n  }\n\n  isValidLookup(res) {\n    return (\n      res !== undefined &&\n      !(!this.options.returnNull && res === null) &&\n      !(!this.options.returnEmptyString && res === '')\n    );\n  }\n\n  getResource(code, ns, key, options = {}) {\n    if (this.i18nFormat && this.i18nFormat.getResource)\n      return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n\n    for (const option in options) {\n      if (\n        Object.prototype.hasOwnProperty.call(options, option) &&\n        prefix === option.substring(0, prefix.length) &&\n        undefined !== options[option]\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\nexport default Translator;\n","import baseLogger from './logger.js';\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  getScriptPartFromCode(code) {\n    if (!code || code.indexOf('-') < 0) return null;\n\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n\n  getLanguagePartFromCode(code) {\n    if (!code || code.indexOf('-') < 0) return code;\n\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n\n  formatLanguageCode(code) {\n    // http://www.iana.org/assignments/language-tags/language-tags.xhtml\n    if (typeof code === 'string' && code.indexOf('-') > -1) {\n      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n      let p = code.split('-');\n\n      if (this.options.lowerCaseLng) {\n        p = p.map((part) => part.toLowerCase());\n      } else if (p.length === 2) {\n        p[0] = p[0].toLowerCase();\n        p[1] = p[1].toUpperCase();\n\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n      } else if (p.length === 3) {\n        p[0] = p[0].toLowerCase();\n\n        // if lenght 2 guess it's a country\n        if (p[1].length === 2) p[1] = p[1].toUpperCase();\n        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n      }\n\n      return p.join('-');\n    }\n\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return (\n      !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1\n    );\n  }\n\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n\n    let found;\n\n    // pick first supported code or if no restriction pick the first one (highest prio)\n    codes.forEach((code) => {\n      if (found) return;\n      let cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n\n    // if we got no match in supportedLngs yet - check for similar locales\n    // first  de-CH --> de\n    // second de-CH --> de-DE\n    if (!found && this.options.supportedLngs) {\n      codes.forEach((code) => {\n        if (found) return;\n\n        let lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return (found = lngOnly);\n\n        found = this.options.supportedLngs.find((supportedLng) => {\n          if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n        });\n      });\n    }\n\n    // if nothing found, use fallbackLng\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n\n    return found;\n  }\n\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n\n    if (!code) return fallbacks.default || [];\n\n    // asume we have an object defining fallbacks\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n\n    return found || [];\n  }\n\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(\n      fallbackCode || this.options.fallbackLng || [],\n      code,\n    );\n\n    const codes = [];\n    const addCode = (c) => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n\n    if (typeof code === 'string' && code.indexOf('-') > -1) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly')\n        addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (typeof code === 'string') {\n      addCode(this.formatLanguageCode(code));\n    }\n\n    fallbackCodes.forEach((fc) => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n\n    return codes;\n  }\n}\n\nexport default LanguageUtil;\n","import baseLogger from './logger.js';\n\n// definition http://translate.sourceforge.net/wiki/l10n/pluralforms\n/* eslint-disable */\nlet sets = [\n  { lngs: ['ach','ak','am','arn','br','fil','gun','ln','mfe','mg','mi','oc', 'pt', 'pt-BR',\n    'tg', 'tl', 'ti','tr','uz','wa'], nr: [1,2], fc: 1 },\n\n  { lngs: ['af','an','ast','az','bg','bn','ca','da','de','dev','el','en',\n    'eo','es','et','eu','fi','fo','fur','fy','gl','gu','ha','hi',\n    'hu','hy','ia','it','kk','kn','ku','lb','mai','ml','mn','mr','nah','nap','nb',\n    'ne','nl','nn','no','nso','pa','pap','pms','ps','pt-PT','rm','sco',\n    'se','si','so','son','sq','sv','sw','ta','te','tk','ur','yo'], nr: [1,2], fc: 2 },\n\n  { lngs: ['ay','bo','cgg','fa','ht','id','ja','jbo','ka','km','ko','ky','lo',\n    'ms','sah','su','th','tt','ug','vi','wo','zh'], nr: [1], fc: 3 },\n\n  { lngs: ['be','bs', 'cnr', 'dz','hr','ru','sr','uk'], nr: [1,2,5], fc: 4 },\n\n  { lngs: ['ar'], nr: [0,1,2,3,11,100], fc: 5 },\n  { lngs: ['cs','sk'], nr: [1,2,5], fc: 6 },\n  { lngs: ['csb','pl'], nr: [1,2,5], fc: 7 },\n  { lngs: ['cy'], nr: [1,2,3,8], fc: 8 },\n  { lngs: ['fr'], nr: [1,2], fc: 9 },\n  { lngs: ['ga'], nr: [1,2,3,7,11], fc: 10 },\n  { lngs: ['gd'], nr: [1,2,3,20], fc: 11 },\n  { lngs: ['is'], nr: [1,2], fc: 12 },\n  { lngs: ['jv'], nr: [0,1], fc: 13 },\n  { lngs: ['kw'], nr: [1,2,3,4], fc: 14 },\n  { lngs: ['lt'], nr: [1,2,10], fc: 15 },\n  { lngs: ['lv'], nr: [1,2,0], fc: 16 },\n  { lngs: ['mk'], nr: [1,2], fc: 17 },\n  { lngs: ['mnk'], nr: [0,1,2], fc: 18 },\n  { lngs: ['mt'], nr: [1,2,11,20], fc: 19 },\n  { lngs: ['or'], nr: [2,1], fc: 2 },\n  { lngs: ['ro'], nr: [1,2,20], fc: 20 },\n  { lngs: ['sl'], nr: [5,1,2,3], fc: 21 },\n  { lngs: ['he','iw'], nr: [1,2,20,21], fc: 22 }\n]\n\nlet _rulesPluralsTypes = {\n  1: function(n) {return Number(n > 1);},\n  2: function(n) {return Number(n != 1);},\n  3: function(n) {return 0;},\n  4: function(n) {return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);},\n  5: function(n) {return Number(n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n%100>=3 && n%100<=10 ? 3 : n%100>=11 ? 4 : 5);},\n  6: function(n) {return Number((n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2);},\n  7: function(n) {return Number(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);},\n  8: function(n) {return Number((n==1) ? 0 : (n==2) ? 1 : (n != 8 && n != 11) ? 2 : 3);},\n  9: function(n) {return Number(n >= 2);},\n  10: function(n) {return Number(n==1 ? 0 : n==2 ? 1 : n<7 ? 2 : n<11 ? 3 : 4) ;},\n  11: function(n) {return Number((n==1 || n==11) ? 0 : (n==2 || n==12) ? 1 : (n > 2 && n < 20) ? 2 : 3);},\n  12: function(n) {return Number(n%10!=1 || n%100==11);},\n  13: function(n) {return Number(n !== 0);},\n  14: function(n) {return Number((n==1) ? 0 : (n==2) ? 1 : (n == 3) ? 2 : 3);},\n  15: function(n) {return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && (n%100<10 || n%100>=20) ? 1 : 2);},\n  16: function(n) {return Number(n%10==1 && n%100!=11 ? 0 : n !== 0 ? 1 : 2);},\n  17: function(n) {return Number(n==1 || n%10==1 && n%100!=11 ? 0 : 1);},\n  18: function(n) {return Number(n==0 ? 0 : n==1 ? 1 : 2);},\n  19: function(n) {return Number(n==1 ? 0 : n==0 || ( n%100>1 && n%100<11) ? 1 : (n%100>10 && n%100<20 ) ? 2 : 3);},\n  20: function(n) {return Number(n==1 ? 0 : (n==0 || (n%100 > 0 && n%100 < 20)) ? 1 : 2);},\n  21: function(n) {return Number(n%100==1 ? 1 : n%100==2 ? 2 : n%100==3 || n%100==4 ? 3 : 0); },\n  22: function(n) {return Number(n==1 ? 0 : n==2 ? 1 : (n<0 || n>10) && n%10==0 ? 2 : 3); }\n};\n/* eslint-enable */\n\nconst deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5,\n};\n\nfunction createRules() {\n  const rules = {};\n  sets.forEach((set) => {\n    set.lngs.forEach((l) => {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nclass PluralResolver {\n  constructor(languageUtils, options = {}) {\n    this.languageUtils = languageUtils;\n    this.options = options;\n\n    this.logger = baseLogger.create('pluralResolver');\n\n    this.rules = createRules();\n  }\n\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n\n  getRule(code, options = {}) {\n    if (this.shouldUseIntlApi()) {\n      try {\n        return new Intl.PluralRules(code, { type: options.ordinal ? 'ordinal' : 'cardinal' });\n      } catch {\n        return;\n      }\n    }\n\n    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n  }\n\n  needsPlural(code, options = {}) {\n    const rule = this.getRule(code, options);\n\n    if (this.shouldUseIntlApi()) {\n      return rule && rule.resolvedOptions().pluralCategories.length > 1;\n    }\n\n    return rule && rule.numbers.length > 1;\n  }\n\n  getPluralFormsOfKey(code, key, options = {}) {\n    return this.getSuffixes(code, options).map((suffix) => `${key}${suffix}`);\n  }\n\n  getSuffixes(code, options = {}) {\n    const rule = this.getRule(code, options);\n\n    if (!rule) {\n      return [];\n    }\n\n    if (this.shouldUseIntlApi()) {\n      return rule.resolvedOptions().pluralCategories\n        .sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2])\n        .map(pluralCategory => `${this.options.prepend}${pluralCategory}`);\n    }\n\n    return rule.numbers.map((number) => this.getSuffix(code, number, options));\n  }\n\n  getSuffix(code, count, options = {}) {\n    const rule = this.getRule(code, options);\n\n    if (rule) {\n      if (this.shouldUseIntlApi()) {\n        return `${this.options.prepend}${rule.select(count)}`;\n      }\n\n      return this.getSuffixRetroCompatible(rule, count);\n    }\n\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return '';\n  }\n\n  getSuffixRetroCompatible(rule, count) {\n    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n    let suffix = rule.numbers[idx];\n\n    // special treatment for lngs only having singular and plural\n    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      if (suffix === 2) {\n        suffix = 'plural';\n      } else if (suffix === 1) {\n        suffix = '';\n      }\n    }\n\n    const returnSuffix = () => (\n      this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString()\n    );\n\n    // COMPATIBILITY JSON\n    // v1\n    if (this.options.compatibilityJSON === 'v1') {\n      if (suffix === 1) return '';\n      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;\n      return returnSuffix();\n    } else if (/* v2 */ this.options.compatibilityJSON === 'v2') {\n      return returnSuffix();\n    } else if (/* v3 - gettext index */ this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      return returnSuffix();\n    }\n    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n  }\n\n  shouldUseIntlApi() {\n    return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n  }\n}\n\nexport default PluralResolver;\n","import * as utils from './utils.js';\nimport baseLogger from './logger.js';\n\nclass Interpolator {\n  constructor(options = {}) {\n    this.logger = baseLogger.create('interpolator');\n\n    this.options = options;\n    this.format = (options.interpolation && options.interpolation.format) || ((value) => value);\n    this.init(options);\n  }\n\n  /* eslint no-param-reassign: 0 */\n  init(options = {}) {\n    if (!options.interpolation) options.interpolation = { escapeValue: true };\n\n    const iOpts = options.interpolation;\n\n    this.escape = iOpts.escape !== undefined ? iOpts.escape : utils.escape;\n    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n    this.useRawValueToEscape =\n      iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n\n    this.prefix = iOpts.prefix ? utils.regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n    this.suffix = iOpts.suffix ? utils.regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n\n    this.formatSeparator = iOpts.formatSeparator\n      ? iOpts.formatSeparator\n      : iOpts.formatSeparator || ',';\n\n    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n\n    this.nestingPrefix = iOpts.nestingPrefix\n      ? utils.regexEscape(iOpts.nestingPrefix)\n      : iOpts.nestingPrefixEscaped || utils.regexEscape('$t(');\n    this.nestingSuffix = iOpts.nestingSuffix\n      ? utils.regexEscape(iOpts.nestingSuffix)\n      : iOpts.nestingSuffixEscaped || utils.regexEscape(')');\n\n    this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator\n      ? iOpts.nestingOptionsSeparator\n      : iOpts.nestingOptionsSeparator || ',';\n\n    this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n\n    this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n\n    // the regexp\n    this.resetRegExp();\n  }\n\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n\n  resetRegExp() {\n    // the regexp\n    const regexpStr = `${this.prefix}(.+?)${this.suffix}`;\n    this.regexp = new RegExp(regexpStr, 'g');\n\n    const regexpUnescapeStr = `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;\n    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n\n    const nestingRegexpStr = `${this.nestingPrefix}(.+?)${this.nestingSuffix}`;\n    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n  }\n\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n\n    const defaultData =\n      (this.options && this.options.interpolation && this.options.interpolation.defaultVariables) ||\n      {};\n\n    function regexSafe(val) {\n      return val.replace(/\\$/g, '$$$$');\n    }\n\n    const handleFormat = (key) => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = utils.getPathWithDefaults(data, defaultData, key);\n        return this.alwaysFormat\n          ? this.format(path, undefined, lng, { ...options, ...data, interpolationkey: key })\n          : path;\n      }\n\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n\n      return this.format(utils.getPathWithDefaults(data, defaultData, k), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k,\n      });\n    };\n\n    this.resetRegExp();\n\n    const missingInterpolationHandler =\n      (options && options.missingInterpolationHandler) || this.options.missingInterpolationHandler;\n\n    const skipOnVariables =\n      (options && options.interpolation && options.interpolation.skipOnVariables) ||\n      this.options.interpolation.skipOnVariables;\n\n    const todos = [\n      {\n        // unescape if has unescapePrefix/Suffix\n        regex: this.regexpUnescape,\n        safeValue: (val) => regexSafe(val),\n      },\n      {\n        // regular escape on demand\n        regex: this.regexp,\n        safeValue: (val) => (this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)),\n      },\n    ];\n    todos.forEach((todo) => {\n      replaces = 0;\n      /* eslint no-cond-assign: 0 */\n      while ((match = todo.regex.exec(str))) {\n        value = handleFormat(match[1].trim());\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = typeof temp === 'string' ? temp : '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue; // this makes sure it continues to detect others\n          } else {\n            this.logger.warn(`missed to pass in variable ${match[1]} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = utils.makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += safeValue.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n\n  nest(str, fc, options = {}) {\n    let match;\n    let value;\n\n    let clonedOptions = { ...options };\n    clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup\n    delete clonedOptions.defaultValue; // assert we do not get a endless loop on interpolating defaultValue again and again\n\n    // if value is something like \"myKey\": \"lorem $(anotherKey, { \"count\": {{aValueInOptions}} })\"\n    function handleHasOptions(key, inheritedOptions) {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      optionsString = optionsString.replace(/'/g, '\"');\n\n      try {\n        clonedOptions = JSON.parse(optionsString);\n\n        if (inheritedOptions) clonedOptions = { ...inheritedOptions, ...clonedOptions };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n\n      // assert we do not get a endless loop on interpolating defaultValue again and again\n      delete clonedOptions.defaultValue;\n      return key;\n    }\n\n    // regular escape on demand\n    while ((match = this.nestingRegexp.exec(str))) {\n      let formatters = [];\n\n      /**\n       * If there is more than one parameter (contains the format separator). E.g.:\n       *   - t(a, b)\n       *   - t(a, b, c)\n       *\n       * And those parameters are not dynamic values (parameters do not include curly braces). E.g.:\n       *   - Not t(a, { \"key\": \"{{variable}}\" })\n       *   - Not t(a, b, {\"keyA\": \"valueA\", \"keyB\": \"valueB\"})\n       */\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map((elem) => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n\n      // is only the nesting key (key1 = '$(key2)') return the value without stringify\n      if (value && match[0] === str && typeof value !== 'string') return value;\n\n      // no string to include or empty\n      if (typeof value !== 'string') value = utils.makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n\n      if (doReduce) {\n        value = formatters.reduce(\n          /* eslint-disable-line no-loop-func:0 */\n          (v, f) =>\n            this.format(v, f, options.lng, { ...options, interpolationkey: match[1].trim() }),\n          value.trim(),\n        );\n      }\n\n      // Nested keys should not be escaped by default #854\n      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nexport default Interpolator;\n","import * as utils from './utils.js';\nimport baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\n\nfunction remove(arr, what) {\n  let found = arr.indexOf(what);\n\n  while (found !== -1) {\n    arr.splice(found, 1);\n    found = arr.indexOf(what);\n  }\n}\n\nclass Connector extends EventEmitter {\n  constructor(backend, store, services, options = {}) {\n    super();\n    if (utils.isIE10) {\n      EventEmitter.call(this); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n\n    this.state = {};\n    this.queue = [];\n\n    if (this.backend && this.backend.init) {\n      this.backend.init(services, options.backend, options);\n    }\n  }\n\n  queueLoad(languages, namespaces, options, callback) {\n    // find what needs to be loaded\n    const toLoad = [];\n    const pending = [];\n    const toLoadLanguages = [];\n    const toLoadNamespaces = [];\n\n    languages.forEach((lng) => {\n      let hasAllNamespaces = true;\n\n      namespaces.forEach((ns) => {\n        const name = `${lng}|${ns}`;\n\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2; // loaded\n        } else if (this.state[name] < 0) {\n          // nothing to do for err\n        } else if (this.state[name] === 1) {\n          if (pending.indexOf(name) < 0) pending.push(name);\n        } else {\n          this.state[name] = 1; // pending\n\n          hasAllNamespaces = false;\n\n          if (pending.indexOf(name) < 0) pending.push(name);\n          if (toLoad.indexOf(name) < 0) toLoad.push(name);\n          if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);\n        }\n      });\n\n      if (!hasAllNamespaces) toLoadLanguages.push(lng);\n    });\n\n    if (toLoad.length || pending.length) {\n      this.queue.push({\n        pending,\n        loaded: {},\n        errors: [],\n        callback,\n      });\n    }\n\n    return {\n      toLoad,\n      pending,\n      toLoadLanguages,\n      toLoadNamespaces,\n    };\n  }\n\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n\n    if (err) this.emit('failedLoading', lng, ns, err);\n\n    if (data) {\n      this.store.addResourceBundle(lng, ns, data);\n    }\n\n    // set loaded\n    this.state[name] = err ? -1 : 2;\n\n    // consolidated loading done in this run - only emit once for a loaded namespace\n    const loaded = {};\n\n    // callback if ready\n    this.queue.forEach((q) => {\n      utils.pushPath(q.loaded, [lng], ns);\n      remove(q.pending, name);\n\n      if (err) q.errors.push(err);\n\n      if (q.pending.length === 0 && !q.done) {\n        // only do once per loaded -> this.emit('loaded', q.loaded);\n        Object.keys(q.loaded).forEach((l) => {\n          if (!loaded[l]) loaded[l] = [];\n          if (q.loaded[l].length) {\n            q.loaded[l].forEach((ns) => {\n              if (loaded[l].indexOf(ns) < 0) loaded[l].push(ns);\n            });\n          }\n        });\n\n        /* eslint no-param-reassign: 0 */\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n\n    // emit consolidated loaded event\n    this.emit('loaded', loaded);\n\n    // remove done load requests\n    this.queue = this.queue.filter((q) => !q.done);\n  }\n\n  read(lng, ns, fcName, tried = 0, wait = 350, callback) {\n    if (!lng.length) return callback(null, {}); // noting to load\n\n    return this.backend[fcName](lng, ns, (err, data) => {\n      if (err && data /* = retryFlag */ && tried < 5) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    });\n  }\n\n  /* eslint consistent-return: 0 */\n  prepareLoading(languages, namespaces, options = {}, callback) {\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n\n    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now\n      return null; // pendings will trigger callback\n    }\n\n    toLoad.toLoad.forEach((name) => {\n      this.loadOne(name);\n    });\n  }\n\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, { reload: true }, callback);\n  }\n\n  loadOne(name, prefix = '') {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data)\n        this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n\n      this.loaded(name, err, data);\n    });\n  }\n\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate, options = {}) {\n    if (\n      this.services.utils &&\n      this.services.utils.hasLoadedNamespace &&\n      !this.services.utils.hasLoadedNamespace(namespace)\n    ) {\n      this.logger.warn(\n        `did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`,\n        'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!',\n      );\n      return;\n    }\n\n    // ignore non valid keys\n    if (key === undefined || key === null || key === '') return;\n\n    if (this.backend && this.backend.create) {\n      this.backend.create(languages, namespace, key, fallbackValue, null /* unused callback */, {\n        ...options,\n        isUpdate,\n      });\n    }\n\n    // write to store to avoid resending\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nexport default Connector;\n","export function get() {\n  return {\n    debug: false,\n    initImmediate: true,\n\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false, // string or array of namespaces\n\n    supportedLngs: false, // array with supported languages\n    nonExplicitSupportedLngs: false,\n    load: 'all', // | currentOnly | languageOnly\n    preload: false, // array with preload languages\n\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n\n    partialBundledLanguages: false, // allow bundling certain languages that are not remotely fetched\n    saveMissing: false, // enable to send missing values\n    updateMissing: false, // enable to update default values if different from translated value (only useful on initial development, or when keeping code as source of truth)\n    saveMissingTo: 'fallback', // 'current' || 'all'\n    saveMissingPlurals: true, // will save all forms not only singular key\n    missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling\n    missingInterpolationHandler: false, // function(str, match)\n\n    postProcess: false, // string or array of postProcessor names\n    postProcessPassResolved: false, // pass resolved object into 'options.i18nResolved' for postprocessor\n    returnNull: true, // allows null value as valid translation\n    returnEmptyString: true, // allows empty string value as valid translation\n    returnObjects: false,\n    joinArrays: false, // or string to join array\n    returnedObjectHandler: false, // function(key, value, options) triggered if key returns object but returnObjects is set to false\n    parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (typeof args[1] === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: (value, format, lng, options) => value,\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      // prefixEscaped: '{{',\n      // suffixEscaped: '}}',\n      // unescapeSuffix: '',\n      unescapePrefix: '-',\n\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      // nestingPrefixEscaped: '$t(',\n      // nestingSuffixEscaped: ')',\n      // defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data\n      maxReplaces: 1000, // max replaces to prevent endless loop\n      skipOnVariables: true,\n    },\n  };\n}\n\n/* eslint no-param-reassign: 0 */\nexport function transformOptions(options) {\n  // create namespace object if namespace is passed in as string\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  // extend supportedLngs with cimode\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n","import baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport ResourceStore from './ResourceStore.js';\nimport Translator from './Translator.js';\nimport LanguageUtils from './LanguageUtils.js';\nimport PluralResolver from './PluralResolver.js';\nimport Interpolator from './Interpolator.js';\nimport BackendConnector from './BackendConnector.js';\nimport { get as getDefaults, transformOptions } from './defaults.js';\nimport postProcessor from './postProcessor.js';\nimport { defer, isIE10 } from './utils.js';\n\nfunction noop() { }\n\nclass I18n extends EventEmitter {\n  constructor(options = {}, callback) {\n    super();\n    if (isIE10) {\n      EventEmitter.call(this) // <=IE10 fix (unable to call parent constructor)\n    }\n\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = { external: [] };\n\n    if (callback && !this.isInitialized && !options.isClone) {\n      // https://github.com/i18next/i18next/issues/879\n      if (!this.options.initImmediate) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n\n  init(options = {}, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    if (!options.defaultNS && options.ns) {\n      if (typeof options.ns === 'string') {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n\n    this.options = { ...getDefaults(), ...this.options, ...transformOptions(options) };\n\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n\n    function createClassOnDemand(ClassOrObject) {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    }\n\n    // init services\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n\n      const lu = new LanguageUtils(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix,\n      });\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      }\n\n      s.backendConnector = new BackendConnector(\n        createClassOnDemand(this.modules.backend),\n        s.resourceStore,\n        s,\n        this.options,\n      );\n      // pipe events from backendConnector\n      s.backendConnector.on('*', (event, ...args) => {\n        this.emit(event, ...args);\n      });\n\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        s.languageDetector.init(s, this.options.detection, this.options);\n      }\n\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n\n      this.translator = new Translator(this.services, this.options);\n      // pipe events from translator\n      this.translator.on('*', (event, ...args) => {\n        this.emit(event, ...args);\n      });\n\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng)\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0]\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n\n    // append api\n    const storeApi = [\n      'getResource',\n      'hasResourceBundle',\n      'getResourceBundle',\n      'getDataByLanguage',\n    ];\n    storeApi.forEach(fcName => {\n      this[fcName] = (...args) => this.store[fcName](...args);\n    });\n    const storeApiChained = [\n      'addResource',\n      'addResources',\n      'addResourceBundle',\n      'removeResourceBundle',\n    ];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = (...args) => {\n        this.store[fcName](...args);\n        return this;\n      };\n    });\n\n    const deferred = defer();\n\n    const load = () => {\n      const finish = (err, t) => {\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n\n        deferred.resolve(t); // not rejecting on err (as err is only a loading translation failed warning)\n        callback(err, t);\n      };\n      // fix for use cases when calling changeLanguage before finished to initialized (i.e. https://github.com/i18next/i18next/issues/1552)\n      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n\n    return deferred;\n  }\n\n  /* eslint consistent-return: 0 */\n  loadResources(language, callback = noop) {\n    let usedCallback = callback;\n    let usedLng = typeof language === 'string' ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback(); // avoid loading resources for cimode\n\n      const toLoad = [];\n\n      const append = lng => {\n        if (!lng) return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      if (!usedLng) {\n        // at least load fallbacks in this case\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n\n      if (this.options.preload) {\n        this.options.preload.forEach(l => append(l));\n      }\n\n      this.services.backendConnector.load(toLoad, this.options.ns, usedCallback);\n    } else {\n      usedCallback(null);\n    }\n  }\n\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve(); // not rejecting on err (as err is only a loading translation failed warning)\n      callback(err);\n    });\n    return deferred;\n  }\n\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()')\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()')\n\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n\n    if (module.type === 'logger' || (module.log && module.warn && module.error)) {\n      this.modules.logger = module;\n    }\n\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n\n    return this;\n  }\n\n  changeLanguage(lng, callback) {\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n\n    const setLngProps = (l) => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      // find the first language resolved languaged\n      this.resolvedLanguage = undefined;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n      for (let li = 0; li < this.languages.length; li++) {\n        const lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    };\n\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n\n      deferred.resolve((...args) => this.t(...args));\n      if (callback) callback(err, (...args) => this.t(...args));\n    };\n\n    const setLng = lngs => {\n      // if detected lng is falsy, set it to empty array, to make sure at least the fallbackLng will be used\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      // depending on API in detector lng can be a string (old) or an array of languages ordered in priority\n      const l = typeof lngs === 'string' ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n\n        if (this.services.languageDetector) this.services.languageDetector.cacheUserLanguage(l);\n      }\n\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      this.services.languageDetector.detect(setLng);\n    } else {\n      setLng(lng);\n    }\n\n    return deferred;\n  }\n\n  getFixedT(lng, ns, keyPrefix) {\n    const fixedT = (key, opts, ...rest) => {\n      let options;\n      if (typeof opts !== 'object') {\n        options = this.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = { ...opts };\n      }\n\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n\n      const keySeparator = this.options.keySeparator || '.';\n      const resultKey = keyPrefix ? `${keyPrefix}${keySeparator}${key}` : key;\n      return this.t(resultKey, options);\n    };\n    if (typeof lng === 'string') {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n\n  t(...args) {\n    return this.translator && this.translator.translate(...args);\n  }\n\n  exists(...args) {\n    return this.translator && this.translator.exists(...args);\n  }\n\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n\n  hasLoadedNamespace(ns, options = {}) {\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n\n    const lng = this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n\n    // we're in cimode so this shall pass\n    if (lng.toLowerCase() === 'cimode') return true;\n\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 2;\n    };\n\n    // optional injected check\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n\n    // loaded -> SUCCESS\n    if (this.hasResourceBundle(lng, ns)) return true;\n\n    // were not loading at all -> SEMI SUCCESS\n    if (!this.services.backendConnector.backend) return true;\n\n    // failed loading ns - but at least fallback is not pending -> SEMI SUCCESS\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n\n    return false;\n  }\n\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n\n    if (!this.options.ns) {\n      callback && callback();\n      return Promise.resolve();\n    }\n    if (typeof ns === 'string') ns = [ns];\n\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n\n    return deferred;\n  }\n\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n\n    if (typeof lngs === 'string') lngs = [lngs];\n    const preloaded = this.options.preload || [];\n\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0);\n    // Exit early if all given languages are already preloaded\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n\n    return deferred;\n  }\n\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n\n    const rtlLngs = [\n      'ar',\n      'shu',\n      'sqr',\n      'ssh',\n      'xaa',\n      'yhd',\n      'yud',\n      'aao',\n      'abh',\n      'abv',\n      'acm',\n      'acq',\n      'acw',\n      'acx',\n      'acy',\n      'adf',\n      'ads',\n      'aeb',\n      'aec',\n      'afb',\n      'ajp',\n      'apc',\n      'apd',\n      'arb',\n      'arq',\n      'ars',\n      'ary',\n      'arz',\n      'auz',\n      'avl',\n      'ayh',\n      'ayl',\n      'ayn',\n      'ayp',\n      'bbz',\n      'pga',\n      'he',\n      'iw',\n      'ps',\n      'pbt',\n      'pbu',\n      'pst',\n      'prp',\n      'prd',\n      'ug',\n      'ur',\n      'ydd',\n      'yds',\n      'yih',\n      'ji',\n      'yi',\n      'hbo',\n      'men',\n      'xmn',\n      'fa',\n      'jpr',\n      'peo',\n      'pes',\n      'prs',\n      'dv',\n      'sam',\n    ];\n\n    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0\n      ? 'rtl'\n      : 'ltr';\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  createInstance(options = {}, callback) {\n    return new I18n(options, callback);\n  }\n\n  cloneInstance(options = {}, callback = noop) {\n    const mergedOptions = { ...this.options, ...options, ...{ isClone: true } };\n    const clone = new I18n(mergedOptions);\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = { ...this.services };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    clone.translator = new Translator(clone.services, clone.options);\n    clone.translator.on('*', (event, ...args) => {\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = clone.options; // sync options\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n\n    return clone;\n  }\n\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\n\nexport default new I18n();\n","/* eslint-disable\n    @typescript-eslint/no-namespace,\n */\n\nimport {\n    default as i18next,\n    i18n as i18nextInstance,\n    FallbackLngObjList as i18nextFallbackLngObjList,\n    FallbackLng as i18nextFallbackLng,\n    FormatFunction as i18nextFormatFunction,\n    InterpolationOptions as i18nextInterpolationOptions,\n    ReactOptions as i18nextReactOptions,\n    InitOptions as i18nextInitOptions,\n    TOptionsBase as i18nextTOptionsBase,\n    StringMap as i18nextStringMap,\n    TOptions as i18nextTOptions,\n    Callback as i18nextCallback,\n    ExistsFunction as i18nextExistsFunction,\n    WithT as i18nextWithT,\n    TFunctionResult as i18nextTFunctionResult,\n    TFunctionKeys as i18nextTFunctionKeys,\n    TFunction as i18nextTFunction,\n    Resource as i18nextResource,\n    ResourceLanguage as i18nextResourceLanguage,\n    ResourceKey as i18nextResourceKey,\n    Interpolator as i18nextInterpolator,\n    ResourceStore as i18nextResourceStore,\n    Services as i18nextServices,\n    Module as i18nextModule,\n    CallbackError as i18nextCallbackError,\n    ReadCallback as i18nextReadCallback,\n    MultiReadCallback as i18nextMultiReadCallback,\n    BackendModule as i18nextBackendModule,\n    LanguageDetectorModule as i18nextLanguageDetectorModule,\n    LanguageDetectorAsyncModule as i18nextLanguageDetectorAsyncModule,\n    PostProcessorModule as i18nextPostProcessorModule,\n    LoggerModule as i18nextLoggerModule,\n    I18nFormatModule as i18nextI18nFormatModule,\n    ThirdPartyModule as i18nextThirdPartyModule,\n    Modules as i18nextModules,\n    Newable as i18nextNewable,\n} from 'i18next';\n\nconst i18n: i18n.i18n = i18next;\n\ndeclare namespace i18n {\n    export type i18n = i18nextInstance;\n    export type FallbackLngObjList = i18nextFallbackLngObjList;\n    export type FallbackLng = i18nextFallbackLng;\n    export type FormatFunction = i18nextFormatFunction;\n    export type InterpolationOptions = i18nextInterpolationOptions;\n    export type ReactOptions = i18nextReactOptions;\n    export type InitOptions = i18nextInitOptions;\n    export type TOptionsBase = i18nextTOptionsBase;\n    export type StringMap = i18nextStringMap;\n    export type TOptions<T extends Record<string, unknown> = StringMap> = i18nextTOptions<T>;\n    export type Callback = i18nextCallback;\n    export type ExistsFunction<K extends string = string, T extends Record<string, unknown> = StringMap> = i18nextExistsFunction<K, T>;\n    export type WithT = i18nextWithT;\n    export type TFunctionResult = i18nextTFunctionResult;\n    export type TFunctionKeys = i18nextTFunctionKeys;\n    export type TFunction = i18nextTFunction;\n    export type Resource = i18nextResource;\n    export type ResourceLanguage = i18nextResourceLanguage;\n    export type ResourceKey = i18nextResourceKey;\n    export type Interpolator = i18nextInterpolator;\n    export type ResourceStore = i18nextResourceStore;\n    export type Services = i18nextServices;\n    export type Module = i18nextModule;\n    export type CallbackError = i18nextCallbackError;\n    export type ReadCallback = i18nextReadCallback;\n    export type MultiReadCallback = i18nextMultiReadCallback;\n    export type BackendModule<T = Record<string, unknown>> = i18nextBackendModule<T>;\n    export type LanguageDetectorModule = i18nextLanguageDetectorModule;\n    export type LanguageDetectorAsyncModule = i18nextLanguageDetectorAsyncModule;\n    export type PostProcessorModule = i18nextPostProcessorModule;\n    export type LoggerModule = i18nextLoggerModule;\n    export type I18nFormatModule = i18nextI18nFormatModule;\n    export type ThirdPartyModule = i18nextThirdPartyModule;\n    export type Modules = i18nextModules;\n    export type Newable<T> = i18nextNewable<T>;\n}\n\nexport { i18n };\n"]}