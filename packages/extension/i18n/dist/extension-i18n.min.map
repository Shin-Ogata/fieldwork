{"version":3,"names":["isString","obj","defer","res","rej","promise","Promise","resolve","reject","makeString","object","lastOfPathSeparatorRegExp","cleanKey","key","indexOf","replace","canNotTraverseDeeper","getLastOfPath","path","Empty","stack","split","stackIndex","length","Object","prototype","hasOwnProperty","call","k","setPath","newValue","undefined","e","p","slice","last","getPath","deepExtend","target","source","overwrite","prop","String","regexEscape","str","_entityMap","escape","data","s","chars","looksLikeObjectPathRegExpCache","RegExpCache","constructor","capacity","this","regExpMap","Map","regExpQueue","getRegExp","pattern","regExpFromCache","get","regExpNew","RegExp","delete","shift","set","push","deepFind","keySeparator","tokens","current","i","next","nextPath","j","getCleanedCode","code","consoleLogger","type","log","args","output","warn","error","console","Logger","concreteLogger","options","init","prefix","logger","debug","forward","deprecate","lvl","debugOnly","create","moduleName","clone","baseLogger","EventEmitter","observers","on","events","listener","forEach","event","numListeners","off","emit","cloned","Array","from","entries","observer","numTimesAdded","apply","ResourceStore","ns","defaultNS","super","ignoreJSONStructure","addNamespaces","removeNamespaces","index","splice","getResource","lng","isArray","result","join","addResource","value","silent","concat","addResources","resources","m","addResourceBundle","deep","skipCopy","pack","JSON","parse","stringify","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage","hasLanguageSomeTranslations","n","keys","find","v","toJSON","postProcessor","processors","addPostProcessor","module","name","handle","translator","processor","process","PATH_KEY","Symbol","keysFromSelector","selector","opts","createProxy","state","handler","proxy","revoke","Proxy","revocable","checkedLoadedFor","shouldHandleAsObject","Translator","services","a","t","changeLanguage","language","exists","o","interpolation","opt","resolved","isObject","returnObjects","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","filter","c","r","map","matched","test","ki","substring","looksLikeObjectPath","match","interpolator","nestingRegexp","parts","translate","lastKey","overloadTranslationOptionHandler","arguments","returnDetails","namespace","appendNamespaceToCIMode","toLowerCase","usedKey","exactUsedKey","usedLng","usedNS","usedParams","getUsedParamsDetails","resUsedKey","resExactUsedKey","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","needsPluralHandling","count","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValueSuffixOrdinalFallback","ordinal","needsZeroSuffixLookup","defaultValue","pluralSeparator","resForObjHndl","resType","toString","extendTranslation","usedDefault","isValidLookup","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","l","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","suffixes","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","returnedObjectHandler","resTypeIsArray","copy","newKeyToUse","deepKey","defaultVariables","skipInterpolation","skipOnVariables","nestBef","nb","interpolate","na","nestAft","nest","context","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsContextHandling","codes","utils","hasLoadedNamespace","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","ordinalPrefix","contextKey","contextSeparator","possibleKey","pop","returnNull","returnEmptyString","resourceStore","optionsKeys","useOptionsReplaceForData","option","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","formattedCode","Intl","getCanonicalLocales","lowerCaseLng","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngScOnly","lngOnly","supportedLng","fallbacks","default","fallbackCode","fallbackCodes","addCode","fc","suffixesOrder","zero","one","two","few","many","other","dummyRule","select","resolvedOptions","pluralCategories","PluralResolver","pluralRulesCache","addRule","rules","clearCache","getRule","cleanedCode","cacheKey","rule","PluralRules","err","lngPart","needsPlural","getPluralFormsOfKey","sort","pluralCategory1","pluralCategory2","pluralCategory","prepend","deepFindWithDefaults","defaultData","getPathWithDefaults","regexSafe","val","Interpolator","format","escapeValue","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapeSuffix","unescapePrefix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","utilsEscape","resetRegExp","getOrResetRegExp","existingRegExp","lastIndex","regexp","regexpUnescape","replaces","handleFormat","interpolationkey","trim","f","missingInterpolationHandler","todos","regex","safeValue","todo","exec","matchedVar","temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","keyEndIndex","lastIndexOf","elem","Boolean","reduce","createCachedFormatter","fn","cache","optForCache","formatParams","frm","createNonCachedFormatter","Formatter","cf","cacheInBuiltFormats","formats","number","formatter","NumberFormat","currency","style","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","range","list","ListFormat","add","addCached","findIndex","mem","formatName","formatOptions","formatStr","optStr","rest","trimmedKey","isNaN","parseInt","parseFormatStr","formatted","valOptions","locale","Connector","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","queue","queueLoad","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","errors","q","pushPath","removePending","done","loadedKeys","read","fcName","tried","wait","resolver","setTimeout","bind","then","catch","prepareLoading","loadOne","fallbackValue","isUpdate","clb","initAsync","preload","simplifyPluralSuffix","partialBundledLanguages","ret","tDescription","transformOptions","initImmediate","noop","I18n","modules","external","inst","mems","getOwnPropertyNames","getPrototypeOf","bindMemberFunctions","isInitialized","isClone","isInitializing","defOpts","getDefaults","createClassOnDemand","ClassOrObject","lu","LanguageUtils","usingLegacyFormatFunction","BackendConnector","languageDetector","detection","deferred","finish","initializedStoreOnce","loadResources","usedCallback","append","resolvedLanguage","setResolvedLanguage","reloadResources","use","Error","li","lngInLngs","unshift","isLanguageChangingTo","setLngProps","setLng","fl","cacheUserLanguage","async","detect","getFixedT","keyPrefix","fixedT","resultKey","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","dir","Locale","getTextInfo","ti","direction","createInstance","instance","cloneInstance","forkResourceStore","mergedOptions","clonedData","prev","acc","i18next","i18n"],"sources":["cdp:///@cdp/extension-i18n/i18next/src/utils.js","cdp:///@cdp/extension-i18n/i18next/src/logger.js","cdp:///@cdp/extension-i18n/i18next/src/EventEmitter.js","cdp:///@cdp/extension-i18n/i18next/src/ResourceStore.js","cdp:///@cdp/extension-i18n/i18next/src/postProcessor.js","cdp:///@cdp/extension-i18n/i18next/src/selector.js","cdp:///@cdp/extension-i18n/i18next/src/Translator.js","cdp:///@cdp/extension-i18n/i18next/src/LanguageUtils.js","cdp:///@cdp/extension-i18n/i18next/src/PluralResolver.js","cdp:///@cdp/extension-i18n/i18next/src/Interpolator.js","cdp:///@cdp/extension-i18n/i18next/src/Formatter.js","cdp:///@cdp/extension-i18n/i18next/src/BackendConnector.js","cdp:///@cdp/extension-i18n/i18next/src/defaults.js","cdp:///@cdp/extension-i18n/i18next/src/i18next.js","cdp:///@cdp/extension-i18n/i18next/src/index.js","cdp:///@cdp/extension-i18n/index.ts"],"sourcesContent":["export const isString = (obj) => typeof obj === 'string';\n\n// http://lea.verou.me/2016/12/resolve-promises-externally-with-this-one-weird-trick/\nexport const defer = () => {\n  let res;\n  let rej;\n\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n\n  promise.resolve = res;\n  promise.reject = rej;\n\n  return promise;\n};\n\nexport const makeString = (object) => {\n  if (object == null) return '';\n  /* eslint prefer-template: 0 */\n  return '' + object;\n};\n\nexport const copy = (a, s, t) => {\n  a.forEach((m) => {\n    if (s[m]) t[m] = s[m];\n  });\n};\n\n// We extract out the RegExp definition to improve performance with React Native Android, which has poor RegExp\n// initialization performance\nconst lastOfPathSeparatorRegExp = /###/g;\n\nconst cleanKey = (key) =>\n  key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;\n\nconst canNotTraverseDeeper = (object) => !object || isString(object);\n\nconst getLastOfPath = (object, path, Empty) => {\n  const stack = !isString(path) ? path : path.split('.');\n  let stackIndex = 0;\n  // iterate through the stack, but leave the last item\n  while (stackIndex < stack.length - 1) {\n    if (canNotTraverseDeeper(object)) return {};\n\n    const key = cleanKey(stack[stackIndex]);\n    if (!object[key] && Empty) object[key] = new Empty();\n    // prevent prototype pollution\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n    ++stackIndex;\n  }\n\n  if (canNotTraverseDeeper(object)) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack[stackIndex]),\n  };\n};\n\nexport const setPath = (object, path, newValue) => {\n  const { obj, k } = getLastOfPath(object, path, Object);\n  if (obj !== undefined || path.length === 1) {\n    obj[k] = newValue;\n    return;\n  }\n\n  let e = path[path.length - 1];\n  let p = path.slice(0, path.length - 1);\n  let last = getLastOfPath(object, p, Object);\n  while (last.obj === undefined && p.length) {\n    e = `${p[p.length - 1]}.${e}`;\n    p = p.slice(0, p.length - 1);\n    last = getLastOfPath(object, p, Object);\n    if (last?.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {\n      last.obj = undefined;\n    }\n  }\n  last.obj[`${last.k}.${e}`] = newValue;\n};\n\nexport const pushPath = (object, path, newValue, concat) => {\n  const { obj, k } = getLastOfPath(object, path, Object);\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n};\n\nexport const getPath = (object, path) => {\n  const { obj, k } = getLastOfPath(object, path);\n\n  if (!obj) return undefined;\n  if (!Object.prototype.hasOwnProperty.call(obj, k)) return undefined;\n  return obj[k];\n};\n\nexport const getPathWithDefaults = (data, defaultData, key) => {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  // Fallback to default values\n  return getPath(defaultData, key);\n};\n\nexport const deepExtend = (target, source, overwrite) => {\n  /* eslint no-restricted-syntax: 0 */\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch\n        if (\n          isString(target[prop]) ||\n          target[prop] instanceof String ||\n          isString(source[prop]) ||\n          source[prop] instanceof String\n        ) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n};\n\nexport const regexEscape = (str) =>\n  /* eslint no-useless-escape: 0 */\n  str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\n/* eslint-disable */\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;',\n};\n/* eslint-enable */\n\nexport const escape = (data) => {\n  if (isString(data)) {\n    return data.replace(/[&<>\"'\\/]/g, (s) => _entityMap[s]);\n  }\n\n  return data;\n};\n\n/**\n * This is a reusable regular expression cache class. Given a certain maximum number of regular expressions we're\n * allowed to store in the cache, it provides a way to avoid recreating regular expression objects over and over.\n * When it needs to evict something, it evicts the oldest one.\n */\nclass RegExpCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.regExpMap = new Map();\n    // Since our capacity tends to be fairly small, `.shift()` will be fairly quick despite being O(n). We just use a\n    // normal array to keep it simple.\n    this.regExpQueue = [];\n  }\n\n  getRegExp(pattern) {\n    const regExpFromCache = this.regExpMap.get(pattern);\n    if (regExpFromCache !== undefined) {\n      return regExpFromCache;\n    }\n    const regExpNew = new RegExp(pattern);\n    if (this.regExpQueue.length === this.capacity) {\n      this.regExpMap.delete(this.regExpQueue.shift());\n    }\n    this.regExpMap.set(pattern, regExpNew);\n    this.regExpQueue.push(pattern);\n    return regExpNew;\n  }\n}\n\nconst chars = [' ', ',', '?', '!', ';'];\n// We cache RegExps to improve performance with React Native Android, which has poor RegExp initialization performance.\n// Capacity of 20 should be plenty, as nsSeparator/keySeparator don't tend to vary much across calls.\nconst looksLikeObjectPathRegExpCache = new RegExpCache(20);\n\nexport const looksLikeObjectPath = (key, nsSeparator, keySeparator) => {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(\n    (c) => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0,\n  );\n  if (possibleChars.length === 0) return true;\n  const r = looksLikeObjectPathRegExpCache.getRegExp(\n    `(${possibleChars.map((c) => (c === '?' ? '\\\\?' : c)).join('|')})`,\n  );\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n};\n\n/**\n * Given\n *\n * 1. a top level object obj, and\n * 2. a path to a deeply nested string or object within it\n *\n * Find and return that deeply nested string or object. The caveat is that the keys of objects within the nesting chain\n * may contain period characters. Therefore, we need to DFS and explore all possible keys at each step until we find the\n * deeply nested string or object.\n */\nexport const deepFind = (obj, path, keySeparator = '.') => {\n  if (!obj) return undefined;\n  if (obj[path]) {\n    if (!Object.prototype.hasOwnProperty.call(obj, path)) return undefined;\n    return obj[path];\n  }\n  const tokens = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < tokens.length; ) {\n    if (!current || typeof current !== 'object') {\n      return undefined;\n    }\n    let next;\n    let nextPath = '';\n    for (let j = i; j < tokens.length; ++j) {\n      if (j !== i) {\n        nextPath += keySeparator;\n      }\n      nextPath += tokens[j];\n      next = current[nextPath];\n      if (next !== undefined) {\n        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {\n          continue;\n        }\n        i += j - i + 1;\n        break;\n      }\n    }\n    current = next;\n  }\n  return current;\n};\n\nexport const getCleanedCode = (code) => code?.replace('_', '-');\n","import { isString } from './utils.js';\n\nconst consoleLogger = {\n  type: 'logger',\n\n  log(args) {\n    this.output('log', args);\n  },\n\n  warn(args) {\n    this.output('warn', args);\n  },\n\n  error(args) {\n    this.output('error', args);\n  },\n\n  output(type, args) {\n    /* eslint no-console: 0 */\n    console?.[type]?.apply?.(console, args);\n  },\n};\n\nclass Logger {\n  constructor(concreteLogger, options = {}) {\n    this.init(concreteLogger, options);\n  }\n\n  init(concreteLogger, options = {}) {\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n\n  log(...args) {\n    return this.forward(args, 'log', '', true);\n  }\n\n  warn(...args) {\n    return this.forward(args, 'warn', '', true);\n  }\n\n  error(...args) {\n    return this.forward(args, 'error', '');\n  }\n\n  deprecate(...args) {\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{ prefix: `${this.prefix}:${moduleName}:` },\n      ...this.options,\n    });\n  }\n\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\n\nexport default new Logger();\n","class EventEmitter {\n  constructor() {\n    // This is an Object containing Maps:\n    //\n    // { [event: string]: Map<listener: function, numTimesAdded: number> }\n    //\n    // We use a Map for O(1) insertion/deletion and because it can have functions as keys.\n    //\n    // We keep track of numTimesAdded (the number of times it was added) because if you attach the same listener twice,\n    // we should actually call it twice for each emitted event.\n    this.observers = {};\n  }\n\n  on(events, listener) {\n    events.split(' ').forEach((event) => {\n      if (!this.observers[event]) this.observers[event] = new Map();\n      const numListeners = this.observers[event].get(listener) || 0;\n      this.observers[event].set(listener, numListeners + 1);\n    });\n    return this;\n  }\n\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n\n    this.observers[event].delete(listener);\n  }\n\n  emit(event, ...args) {\n    if (this.observers[event]) {\n      const cloned = Array.from(this.observers[event].entries());\n      cloned.forEach(([observer, numTimesAdded]) => {\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer(...args);\n        }\n      });\n    }\n\n    if (this.observers['*']) {\n      const cloned = Array.from(this.observers['*'].entries());\n      cloned.forEach(([observer, numTimesAdded]) => {\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer.apply(observer, [event, ...args]);\n        }\n      });\n    }\n  }\n}\n\nexport default EventEmitter;\n","import EventEmitter from './EventEmitter.js';\nimport { getPath, deepFind, setPath, deepExtend, isString } from './utils.js';\n\nclass ResourceStore extends EventEmitter {\n  constructor(data, options = { ns: ['translation'], defaultNS: 'translation' }) {\n    super();\n\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n\n  getResource(lng, ns, key, options = {}) {\n    const keySeparator =\n      options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n    const ignoreJSONStructure =\n      options.ignoreJSONStructure !== undefined\n        ? options.ignoreJSONStructure\n        : this.options.ignoreJSONStructure;\n\n    let path;\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    } else {\n      path = [lng, ns];\n      if (key) {\n        if (Array.isArray(key)) {\n          path.push(...key);\n        } else if (isString(key) && keySeparator) {\n          path.push(...key.split(keySeparator));\n        } else {\n          path.push(key);\n        }\n      }\n    }\n\n    const result = getPath(this.data, path);\n    if (!result && !ns && !key && lng.indexOf('.') > -1) {\n      lng = path[0];\n      ns = path[1];\n      key = path.slice(2).join('.');\n    }\n    if (result || !ignoreJSONStructure || !isString(key)) return result;\n\n    return deepFind(this.data?.[lng]?.[ns], key, keySeparator);\n  }\n\n  addResource(lng, ns, key, value, options = { silent: false }) {\n    const keySeparator =\n      options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n\n    this.addNamespaces(ns);\n\n    setPath(this.data, path, value);\n\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n\n  addResources(lng, ns, resources, options = { silent: false }) {\n    /* eslint no-restricted-syntax: 0 */\n    for (const m in resources) {\n      if (isString(resources[m]) || Array.isArray(resources[m]))\n        this.addResource(lng, ns, m, resources[m], { silent: true });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n\n  addResourceBundle(\n    lng,\n    ns,\n    resources,\n    deep,\n    overwrite,\n    options = { silent: false, skipCopy: false },\n  ) {\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n\n    this.addNamespaces(ns);\n\n    let pack = getPath(this.data, path) || {};\n\n    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources)); // make a copy to fix #2081\n\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = { ...pack, ...resources };\n    }\n\n    setPath(this.data, path, pack);\n\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n\n    this.emit('removed', lng, ns);\n  }\n\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    return this.getResource(lng, ns);\n  }\n\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = (data && Object.keys(data)) || [];\n    return !!n.find((v) => data[v] && Object.keys(data[v]).length > 0);\n  }\n\n  toJSON() {\n    return this.data;\n  }\n}\n\nexport default ResourceStore;\n","export default {\n  processors: {},\n\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n\n  handle(processors, value, key, options, translator) {\n    processors.forEach((processor) => {\n      value = this.processors[processor]?.process(value, key, options, translator) ?? value;\n    });\n\n    return value;\n  },\n};\n","const PATH_KEY = Symbol('i18next/PATH_KEY');\n\nfunction createProxy() {\n  const state = [];\n  // `Object.create(null)` to prevent prototype pollution\n  const handler = Object.create(null);\n  let proxy;\n  handler.get = (target, key) => {\n    proxy?.revoke?.();\n    if (key === PATH_KEY) return state;\n    state.push(key);\n    proxy = Proxy.revocable(target, handler);\n    return proxy.proxy;\n  };\n  return Proxy.revocable(Object.create(null), handler).proxy;\n}\n\nexport default function keysFromSelector(selector, opts) {\n  const { [PATH_KEY]: path } = selector(createProxy());\n  return path.join(opts?.keySeparator ?? '.');\n}\n","import baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport postProcessor from './postProcessor.js';\nimport { copy as utilsCopy, looksLikeObjectPath, isString } from './utils.js';\nimport keysFromSelector from './selector.js';\n\nconst checkedLoadedFor = {};\n\nconst shouldHandleAsObject = (res) =>\n  !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';\n\nclass Translator extends EventEmitter {\n  constructor(services, options = {}) {\n    super();\n\n    utilsCopy(\n      [\n        'resourceStore',\n        'languageUtils',\n        'pluralResolver',\n        'interpolator',\n        'backendConnector',\n        'i18nFormat',\n        'utils',\n      ],\n      services,\n      this,\n    );\n\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n\n    this.logger = baseLogger.create('translator');\n  }\n\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n\n  exists(key, o = { interpolation: {} }) {\n    const opt = { ...o };\n    if (key == null) return false;\n    const resolved = this.resolve(key, opt);\n\n    // If no resource found, return false\n    if (resolved?.res === undefined) return false;\n\n    // Check if the resolved resource is an object\n    const isObject = shouldHandleAsObject(resolved.res);\n\n    // If returnObjects is explicitly set to false and the resource is an object, return false\n    if (opt.returnObjects === false && isObject) {\n      return false;\n    }\n\n    // Otherwise return true (resource exists)\n    return true;\n  }\n\n  extractFromKey(key, opt) {\n    let nsSeparator = opt.nsSeparator !== undefined ? opt.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n\n    const keySeparator =\n      opt.keySeparator !== undefined ? opt.keySeparator : this.options.keySeparator;\n\n    let namespaces = opt.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage =\n      !this.options.userDefinedKeySeparator &&\n      !opt.keySeparator &&\n      !this.options.userDefinedNsSeparator &&\n      !opt.nsSeparator &&\n      !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces: isString(namespaces) ? [namespaces] : namespaces,\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (\n        nsSeparator !== keySeparator ||\n        (nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1)\n      )\n        namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n\n    return {\n      key,\n      namespaces: isString(namespaces) ? [namespaces] : namespaces,\n    };\n  }\n\n  translate(keys, o, lastKey) {\n    let opt = typeof o === 'object' ? { ...o } : o;\n    if (typeof opt !== 'object' && this.options.overloadTranslationOptionHandler) {\n      /* eslint prefer-rest-params: 0 */\n      opt = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof opt === 'object') opt = { ...opt };\n    if (!opt) opt = {};\n\n    // non valid keys handling\n    if (keys == null /* || keys === '' */) return '';\n    if (typeof keys === 'function') keys = keysFromSelector(keys, { ...this.options, ...opt });\n    if (!Array.isArray(keys)) keys = [String(keys)];\n\n    const returnDetails =\n      opt.returnDetails !== undefined ? opt.returnDetails : this.options.returnDetails;\n\n    // separators\n    const keySeparator =\n      opt.keySeparator !== undefined ? opt.keySeparator : this.options.keySeparator;\n\n    // get namespace(s)\n    const { key, namespaces } = this.extractFromKey(keys[keys.length - 1], opt);\n    const namespace = namespaces[namespaces.length - 1];\n\n    let nsSeparator = opt.nsSeparator !== undefined ? opt.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n\n    // return key on CIMode\n    const lng = opt.lng || this.language;\n    const appendNamespaceToCIMode =\n      opt.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng?.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace,\n            usedParams: this.getUsedParamsDetails(opt),\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace,\n          usedParams: this.getUsedParamsDetails(opt),\n        };\n      }\n      return key;\n    }\n\n    // resolve from store\n    const resolved = this.resolve(keys, opt);\n    let res = resolved?.res;\n    const resUsedKey = resolved?.usedKey || key;\n    const resExactUsedKey = resolved?.exactUsedKey || key;\n\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = opt.joinArrays !== undefined ? opt.joinArrays : this.options.joinArrays;\n\n    // object\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const needsPluralHandling = opt.count !== undefined && !isString(opt.count);\n    const hasDefaultValue = Translator.hasDefaultValue(opt);\n    const defaultValueSuffix = needsPluralHandling\n      ? this.pluralResolver.getSuffix(lng, opt.count, opt)\n      : '';\n    const defaultValueSuffixOrdinalFallback =\n      opt.ordinal && needsPluralHandling\n        ? this.pluralResolver.getSuffix(lng, opt.count, { ordinal: false })\n        : '';\n    const needsZeroSuffixLookup = needsPluralHandling && !opt.ordinal && opt.count === 0;\n    const defaultValue =\n      (needsZeroSuffixLookup && opt[`defaultValue${this.options.pluralSeparator}zero`]) ||\n      opt[`defaultValue${defaultValueSuffix}`] ||\n      opt[`defaultValue${defaultValueSuffixOrdinalFallback}`] ||\n      opt.defaultValue;\n\n    let resForObjHndl = res;\n    if (handleAsObjectInI18nFormat && !res && hasDefaultValue) {\n      resForObjHndl = defaultValue;\n    }\n\n    const handleAsObject = shouldHandleAsObject(resForObjHndl);\n    const resType = Object.prototype.toString.apply(resForObjHndl);\n\n    if (\n      handleAsObjectInI18nFormat &&\n      resForObjHndl &&\n      handleAsObject &&\n      noObject.indexOf(resType) < 0 &&\n      !(isString(joinArrays) && Array.isArray(resForObjHndl))\n    ) {\n      if (!opt.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler\n          ? this.options.returnedObjectHandler(resUsedKey, resForObjHndl, {\n              ...opt,\n              ns: namespaces,\n            })\n          : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          resolved.usedParams = this.getUsedParamsDetails(opt);\n          return resolved;\n        }\n        return r;\n      }\n\n      // if we got a separator we loop over children - else we just return object as is\n      // as having it set to false means no hierarchy so no lookup for nested values\n      if (keySeparator) {\n        const resTypeIsArray = Array.isArray(resForObjHndl);\n        const copy = resTypeIsArray ? [] : {}; // apply child translation on a copy\n\n        /* eslint no-restricted-syntax: 0 */\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in resForObjHndl) {\n          if (Object.prototype.hasOwnProperty.call(resForObjHndl, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            if (hasDefaultValue && !res) {\n              copy[m] = this.translate(deepKey, {\n                ...opt,\n                defaultValue: shouldHandleAsObject(defaultValue) ? defaultValue[m] : undefined,\n                ...{ joinArrays: false, ns: namespaces },\n              });\n            } else {\n              copy[m] = this.translate(deepKey, {\n                ...opt,\n                ...{ joinArrays: false, ns: namespaces },\n              });\n            }\n            if (copy[m] === deepKey) copy[m] = resForObjHndl[m]; // if nothing found use original value as fallback\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {\n      // array special treatment\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, opt, lastKey);\n    } else {\n      // string, empty or null\n      let usedDefault = false;\n      let usedKey = false;\n\n      // fallback value\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n\n      const missingKeyNoValueFallbackToKey =\n        opt.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n\n      // save missing\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(\n          updateMissing ? 'updateKey' : 'missingKey',\n          lng,\n          namespace,\n          key,\n          updateMissing ? defaultValue : res,\n        );\n        if (keySeparator) {\n          const fk = this.resolve(key, { ...opt, keySeparator: false });\n          if (fk && fk.res)\n            this.logger.warn(\n              'Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.',\n            );\n        }\n\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(\n          this.options.fallbackLng,\n          opt.lng || this.language,\n        );\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(opt.lng || this.language);\n        } else {\n          lngs.push(opt.lng || this.language);\n        }\n\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing =\n            hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, opt);\n          } else if (this.backendConnector?.saveMissing) {\n            this.backendConnector.saveMissing(\n              l,\n              namespace,\n              k,\n              defaultForMissing,\n              updateMissing,\n              opt,\n            );\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach((language) => {\n              const suffixes = this.pluralResolver.getSuffixes(language, opt);\n              if (\n                needsZeroSuffixLookup &&\n                opt[`defaultValue${this.options.pluralSeparator}zero`] &&\n                suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0\n              ) {\n                suffixes.push(`${this.options.pluralSeparator}zero`);\n              }\n              suffixes.forEach((suffix) => {\n                send([language], key + suffix, opt[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n\n      // extend\n      res = this.extendTranslation(res, keys, opt, resolved, lastKey);\n\n      // append namespace if still key\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) {\n        res = `${namespace}${nsSeparator}${key}`;\n      }\n\n      // parseMissingKeyHandler\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        res = this.options.parseMissingKeyHandler(\n          this.options.appendNamespaceToMissingKey ? `${namespace}${nsSeparator}${key}` : key,\n          usedDefault ? res : undefined,\n          opt,\n        );\n      }\n    }\n\n    // return\n    if (returnDetails) {\n      resolved.res = res;\n      resolved.usedParams = this.getUsedParamsDetails(opt);\n      return resolved;\n    }\n    return res;\n  }\n\n  extendTranslation(res, key, opt, resolved, lastKey) {\n    if (this.i18nFormat?.parse) {\n      res = this.i18nFormat.parse(\n        res,\n        { ...this.options.interpolation.defaultVariables, ...opt },\n        opt.lng || this.language || resolved.usedLng,\n        resolved.usedNS,\n        resolved.usedKey,\n        { resolved },\n      );\n    } else if (!opt.skipInterpolation) {\n      // i18next.parsing\n      if (opt.interpolation)\n        this.interpolator.init({\n          ...opt,\n          ...{ interpolation: { ...this.options.interpolation, ...opt.interpolation } },\n        });\n      const skipOnVariables =\n        isString(res) &&\n        (opt?.interpolation?.skipOnVariables !== undefined\n          ? opt.interpolation.skipOnVariables\n          : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        // has nesting aftbeforeer interpolation\n        nestBef = nb && nb.length;\n      }\n\n      // interpolate\n      let data = opt.replace && !isString(opt.replace) ? opt.replace : opt;\n      if (this.options.interpolation.defaultVariables)\n        data = { ...this.options.interpolation.defaultVariables, ...data };\n      res = this.interpolator.interpolate(\n        res,\n        data,\n        opt.lng || this.language || resolved.usedLng,\n        opt,\n      );\n\n      // nesting\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        // has nesting after interpolation\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) opt.nest = false;\n      }\n      if (!opt.lng && resolved && resolved.res) opt.lng = this.language || resolved.usedLng;\n      if (opt.nest !== false)\n        res = this.interpolator.nest(\n          res,\n          (...args) => {\n            if (lastKey?.[0] === args[0] && !opt.context) {\n              this.logger.warn(\n                `It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`,\n              );\n              return null;\n            }\n            return this.translate(...args, key);\n          },\n          opt,\n        );\n\n      if (opt.interpolation) this.interpolator.reset();\n    }\n\n    // post process\n    const postProcess = opt.postProcess || this.options.postProcess;\n    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;\n\n    if (res != null && postProcessorNames?.length && opt.applyPostProcessor !== false) {\n      res = postProcessor.handle(\n        postProcessorNames,\n        res,\n        key,\n        this.options && this.options.postProcessPassResolved\n          ? {\n              i18nResolved: { ...resolved, usedParams: this.getUsedParamsDetails(opt) },\n              ...opt,\n            }\n          : opt,\n        this,\n      );\n    }\n\n    return res;\n  }\n\n  resolve(keys, opt = {}) {\n    let found;\n    let usedKey; // plain key\n    let exactUsedKey; // key with context / plural\n    let usedLng;\n    let usedNS;\n\n    if (isString(keys)) keys = [keys];\n\n    // forEach possible key\n    keys.forEach((k) => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, opt);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n\n      const needsPluralHandling = opt.count !== undefined && !isString(opt.count);\n      const needsZeroSuffixLookup = needsPluralHandling && !opt.ordinal && opt.count === 0;\n      const needsContextHandling =\n        opt.context !== undefined &&\n        (isString(opt.context) || typeof opt.context === 'number') &&\n        opt.context !== '';\n\n      const codes = opt.lngs\n        ? opt.lngs\n        : this.languageUtils.toResolveHierarchy(opt.lng || this.language, opt.fallbackLng);\n\n      namespaces.forEach((ns) => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n\n        if (\n          !checkedLoadedFor[`${codes[0]}-${ns}`] &&\n          this.utils?.hasLoadedNamespace &&\n          !this.utils?.hasLoadedNamespace(usedNS)\n        ) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(\n            `key \"${usedKey}\" for languages \"${codes.join(\n              ', ',\n            )}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`,\n            'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!',\n          );\n        }\n\n        codes.forEach((code) => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n\n          const finalKeys = [key];\n\n          if (this.i18nFormat?.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, opt);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling)\n              pluralSuffix = this.pluralResolver.getSuffix(code, opt.count, opt);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            // get key for plural if needed\n            if (needsPluralHandling) {\n              if (opt.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(\n                  key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator),\n                );\n              }\n              finalKeys.push(key + pluralSuffix);\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n\n            // get key for context if needed\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator || '_'}${opt.context}`;\n              finalKeys.push(contextKey);\n\n              // get key for context + plural if needed\n              if (needsPluralHandling) {\n                if (opt.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(\n                    contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator),\n                  );\n                }\n                finalKeys.push(contextKey + pluralSuffix);\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n\n          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only\n          let possibleKey;\n          /* eslint no-cond-assign: 0 */\n          while ((possibleKey = finalKeys.pop())) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, opt);\n            }\n          }\n        });\n      });\n    });\n\n    return { res: found, usedKey, exactUsedKey, usedLng, usedNS };\n  }\n\n  isValidLookup(res) {\n    return (\n      res !== undefined &&\n      !(!this.options.returnNull && res === null) &&\n      !(!this.options.returnEmptyString && res === '')\n    );\n  }\n\n  getResource(code, ns, key, options = {}) {\n    if (this.i18nFormat?.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n\n  getUsedParamsDetails(options = {}) {\n    // we need to remember to extend this array whenever new option properties are added\n    const optionsKeys = [\n      'defaultValue',\n      'ordinal',\n      'context',\n      'replace',\n      'lng',\n      'lngs',\n      'fallbackLng',\n      'ns',\n      'keySeparator',\n      'nsSeparator',\n      'returnObjects',\n      'returnDetails',\n      'joinArrays',\n      'postProcess',\n      'interpolation',\n    ];\n\n    const useOptionsReplaceForData = options.replace && !isString(options.replace);\n    let data = useOptionsReplaceForData ? options.replace : options;\n    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {\n      data.count = options.count;\n    }\n\n    if (this.options.interpolation.defaultVariables) {\n      data = { ...this.options.interpolation.defaultVariables, ...data };\n    }\n\n    // avoid reporting options (execpt count) as usedParams\n    if (!useOptionsReplaceForData) {\n      data = { ...data };\n      for (const key of optionsKeys) {\n        delete data[key];\n      }\n    }\n\n    return data;\n  }\n\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n\n    for (const option in options) {\n      if (\n        Object.prototype.hasOwnProperty.call(options, option) &&\n        prefix === option.substring(0, prefix.length) &&\n        undefined !== options[option]\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\nexport default Translator;\n","import baseLogger from './logger.js';\nimport { getCleanedCode, isString } from './utils.js';\n\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n\n  formatLanguageCode(code) {\n    // http://www.iana.org/assignments/language-tags/language-tags.xhtml\n    if (isString(code) && code.indexOf('-') > -1) {\n      let formattedCode;\n      try {\n        formattedCode = Intl.getCanonicalLocales(code)[0];\n      } catch (e) {\n        /* fall through */\n      }\n      if (formattedCode && this.options.lowerCaseLng) {\n        formattedCode = formattedCode.toLowerCase();\n      }\n      if (formattedCode) return formattedCode;\n\n      if (this.options.lowerCaseLng) {\n        return code.toLowerCase();\n      }\n\n      return code;\n    }\n\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return (\n      !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1\n    );\n  }\n\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n\n    let found;\n\n    // pick first supported code or if no restriction pick the first one (highest prio)\n    codes.forEach((code) => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n\n    // if we got no match in supportedLngs yet - check for similar locales\n    // first  de-CH --> de\n    // second de-CH --> de-DE\n    if (!found && this.options.supportedLngs) {\n      codes.forEach((code) => {\n        if (found) return;\n\n        const lngScOnly = this.getScriptPartFromCode(code);\n        // eslint-disable-next-line no-return-assign\n        if (this.isSupportedCode(lngScOnly)) return (found = lngScOnly);\n\n        const lngOnly = this.getLanguagePartFromCode(code);\n        // eslint-disable-next-line no-return-assign\n        if (this.isSupportedCode(lngOnly)) return (found = lngOnly);\n\n        // eslint-disable-next-line array-callback-return\n        found = this.options.supportedLngs.find((supportedLng) => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (\n            supportedLng.indexOf('-') > 0 &&\n            lngOnly.indexOf('-') < 0 &&\n            supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly\n          )\n            return supportedLng;\n          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;\n        });\n      });\n    }\n    // if nothing found, use fallbackLng\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n\n    return found;\n  }\n\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (isString(fallbacks)) fallbacks = [fallbacks];\n    if (Array.isArray(fallbacks)) return fallbacks;\n\n    if (!code) return fallbacks.default || [];\n\n    // assume we have an object defining fallbacks\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n\n    return found || [];\n  }\n\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(\n      (fallbackCode === false ? [] : fallbackCode) || this.options.fallbackLng || [],\n      code,\n    );\n\n    const codes = [];\n    const addCode = (c) => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n\n    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly')\n        addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (isString(code)) {\n      addCode(this.formatLanguageCode(code));\n    }\n\n    fallbackCodes.forEach((fc) => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n\n    return codes;\n  }\n}\n\nexport default LanguageUtil;\n","import baseLogger from './logger.js';\nimport { getCleanedCode } from './utils.js'\n\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5,\n};\n\nconst dummyRule = {\n  select: (count) => count === 1 ? 'one' : 'other',\n  resolvedOptions: () => ({\n    pluralCategories: ['one', 'other']\n  })\n};\n\nclass PluralResolver {\n  constructor(languageUtils, options = {}) {\n    this.languageUtils = languageUtils;\n    this.options = options;\n\n    this.logger = baseLogger.create('pluralResolver');\n\n    // Cache calls to Intl.PluralRules, since repeated calls can be slow in runtimes like React Native\n    // and the memory usage difference is negligible\n    this.pluralRulesCache = {};\n  }\n\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n\n  clearCache() {\n    this.pluralRulesCache = {};\n  }\n\n  getRule(code, options = {}) {\n    const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);\n    const type = options.ordinal ? 'ordinal' : 'cardinal';\n    const cacheKey = JSON.stringify({ cleanedCode, type });\n\n    if (cacheKey in this.pluralRulesCache) {\n      return this.pluralRulesCache[cacheKey];\n    }\n\n    let rule;\n\n    try {\n      rule = new Intl.PluralRules(cleanedCode, { type });\n    } catch (err) {\n      if (!Intl) {\n        this.logger.error('No Intl support, please use an Intl polyfill!');\n        return dummyRule;\n      }\n      if (!code.match(/-|_/)) return dummyRule;\n      const lngPart = this.languageUtils.getLanguagePartFromCode(code);\n      rule = this.getRule(lngPart, options);\n    }\n\n    this.pluralRulesCache[cacheKey] = rule;\n    return rule;\n  }\n\n  needsPlural(code, options = {}) {\n    let rule = this.getRule(code, options);\n    if (!rule) rule = this.getRule('dev', options);\n    return rule?.resolvedOptions().pluralCategories.length > 1;\n  }\n\n  getPluralFormsOfKey(code, key, options = {}) {\n    return this.getSuffixes(code, options).map((suffix) => `${key}${suffix}`);\n  }\n\n  getSuffixes(code, options = {}) {\n    let rule = this.getRule(code, options);\n    if (!rule) rule = this.getRule('dev', options);\n    if (!rule) return [];\n\n    return rule.resolvedOptions().pluralCategories\n      .sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2])\n      .map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n  }\n\n  getSuffix(code, count, options = {}) {\n    const rule = this.getRule(code, options);\n\n    if (rule) {\n      return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n    }\n\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return this.getSuffix('dev', count, options);\n  }\n}\n\nexport default PluralResolver;\n","import {\n  getPathWithDefaults,\n  deepFind,\n  escape as utilsEscape,\n  regexEscape,\n  makeString,\n  isString,\n} from './utils.js';\nimport baseLogger from './logger.js';\n\nconst deepFindWithDefaults = (\n  data,\n  defaultData,\n  key,\n  keySeparator = '.',\n  ignoreJSONStructure = true,\n) => {\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && isString(key)) {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n};\n\nconst regexSafe = (val) => val.replace(/\\$/g, '$$$$');\n\nclass Interpolator {\n  constructor(options = {}) {\n    this.logger = baseLogger.create('interpolator');\n\n    this.options = options;\n    this.format = options?.interpolation?.format || ((value) => value);\n    this.init(options);\n  }\n\n  /* eslint no-param-reassign: 0 */\n  init(options = {}) {\n    if (!options.interpolation) options.interpolation = { escapeValue: true };\n\n    const {\n      escape,\n      escapeValue,\n      useRawValueToEscape,\n      prefix,\n      prefixEscaped,\n      suffix,\n      suffixEscaped,\n      formatSeparator,\n      unescapeSuffix,\n      unescapePrefix,\n      nestingPrefix,\n      nestingPrefixEscaped,\n      nestingSuffix,\n      nestingSuffixEscaped,\n      nestingOptionsSeparator,\n      maxReplaces,\n      alwaysFormat,\n    } = options.interpolation;\n\n    this.escape = escape !== undefined ? escape : utilsEscape;\n    this.escapeValue = escapeValue !== undefined ? escapeValue : true;\n    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;\n\n    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';\n    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';\n\n    this.formatSeparator = formatSeparator || ',';\n\n    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';\n\n    this.nestingPrefix = nestingPrefix\n      ? regexEscape(nestingPrefix)\n      : nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = nestingSuffix\n      ? regexEscape(nestingSuffix)\n      : nestingSuffixEscaped || regexEscape(')');\n\n    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';\n\n    this.maxReplaces = maxReplaces || 1000;\n\n    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;\n\n    // the regexp\n    this.resetRegExp();\n  }\n\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n\n  resetRegExp() {\n    const getOrResetRegExp = (existingRegExp, pattern) => {\n      if (existingRegExp?.source === pattern) {\n        existingRegExp.lastIndex = 0;\n        return existingRegExp;\n      }\n      return new RegExp(pattern, 'g');\n    };\n\n    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);\n    this.regexpUnescape = getOrResetRegExp(\n      this.regexpUnescape,\n      `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`,\n    );\n    this.nestingRegexp = getOrResetRegExp(\n      this.nestingRegexp,\n      `${this.nestingPrefix}((?:[^()\"']+|\"[^\"]*\"|'[^']*'|\\\\((?:[^()]|\"[^\"]*\"|'[^']*')*\\\\))*?)${this.nestingSuffix}`,\n    );\n  }\n\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n\n    const defaultData =\n      (this.options && this.options.interpolation && this.options.interpolation.defaultVariables) ||\n      {};\n\n    const handleFormat = (key) => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(\n          data,\n          defaultData,\n          key,\n          this.options.keySeparator,\n          this.options.ignoreJSONStructure,\n        );\n        return this.alwaysFormat\n          ? this.format(path, undefined, lng, { ...options, ...data, interpolationkey: key })\n          : path;\n      }\n\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n\n      return this.format(\n        deepFindWithDefaults(\n          data,\n          defaultData,\n          k,\n          this.options.keySeparator,\n          this.options.ignoreJSONStructure,\n        ),\n        f,\n        lng,\n        {\n          ...options,\n          ...data,\n          interpolationkey: k,\n        },\n      );\n    };\n\n    this.resetRegExp();\n\n    const missingInterpolationHandler =\n      options?.missingInterpolationHandler || this.options.missingInterpolationHandler;\n\n    const skipOnVariables =\n      options?.interpolation?.skipOnVariables !== undefined\n        ? options.interpolation.skipOnVariables\n        : this.options.interpolation.skipOnVariables;\n\n    const todos = [\n      {\n        // unescape if has unescapePrefix/Suffix\n        regex: this.regexpUnescape,\n        safeValue: (val) => regexSafe(val),\n      },\n      {\n        // regular escape on demand\n        regex: this.regexp,\n        safeValue: (val) => (this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)),\n      },\n    ];\n    todos.forEach((todo) => {\n      replaces = 0;\n      /* eslint no-cond-assign: 0 */\n      while ((match = todo.regex.exec(str))) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = isString(temp) ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = ''; // undefined becomes empty string\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue; // this makes sure it continues to detect others\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (!isString(value) && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n\n  nest(str, fc, options = {}) {\n    let match;\n    let value;\n\n    let clonedOptions;\n\n    // if value is something like \"myKey\": \"lorem $(anotherKey, { \"count\": {{aValueInOptions}} })\"\n    const handleHasOptions = (key, inheritedOptions) => {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if (\n        ((matchedSingleQuotes?.length ?? 0) % 2 === 0 && !matchedDoubleQuotes) ||\n        matchedDoubleQuotes.length % 2 !== 0\n      ) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n\n      try {\n        clonedOptions = JSON.parse(optionsString);\n\n        if (inheritedOptions) clonedOptions = { ...inheritedOptions, ...clonedOptions };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n\n      // assert we do not get a endless loop on interpolating defaultValue again and again\n      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1)\n        delete clonedOptions.defaultValue;\n      return key;\n    };\n\n    // regular escape on demand\n    while ((match = this.nestingRegexp.exec(str))) {\n      let formatters = [];\n\n      clonedOptions = { ...options };\n      clonedOptions =\n        clonedOptions.replace && !isString(clonedOptions.replace)\n          ? clonedOptions.replace\n          : clonedOptions;\n      clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup\n      delete clonedOptions.defaultValue; // assert we do not get a endless loop on interpolating defaultValue again and again\n\n      /**\n       * If there is more than one parameter (contains the format separator). E.g.:\n       *   - t(a, b)\n       *   - t(a, b, c)\n       *\n       * And those parameters are not dynamic values (parameters do not include curly braces). E.g.:\n       *   - Not t(a, { \"key\": \"{{variable}}\" })\n       *   - Not t(a, b, {\"keyA\": \"valueA\", \"keyB\": \"valueB\"})\n       *\n       * Since v25.3.0 also this is possible: https://github.com/i18next/i18next/pull/2325\n       */\n      const keyEndIndex = /{.*}/.test(match[1])\n        ? match[1].lastIndexOf('}') + 1\n        : match[1].indexOf(this.formatSeparator);\n      if (keyEndIndex !== -1) {\n        formatters = match[1]\n          .slice(keyEndIndex)\n          .split(this.formatSeparator)\n          .map((elem) => elem.trim())\n          .filter(Boolean);\n        match[1] = match[1].slice(0, keyEndIndex);\n      }\n\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n\n      // is only the nesting key (key1 = '$(key2)') return the value without stringify\n      if (value && match[0] === str && !isString(value)) return value;\n\n      // no string to include or empty\n      if (!isString(value)) value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n\n      if (formatters.length) {\n        value = formatters.reduce(\n          // eslint-disable-next-line no-loop-func\n          (v, f) =>\n            this.format(v, f, options.lng, { ...options, interpolationkey: match[1].trim() }),\n          value.trim(),\n        );\n      }\n\n      // Nested keys should not be escaped by default #854\n      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nexport default Interpolator;\n","import baseLogger from './logger.js';\nimport { getCleanedCode } from './utils.js';\n\nconst parseFormatStr = (formatStr) => {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n\n    const optStr = p[1].substring(0, p[1].length - 1);\n\n    // extra for currency\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n\n      opts.forEach((opt) => {\n        if (opt) {\n          const [key, ...rest] = opt.split(':');\n          const val = rest\n            .join(':')\n            .trim()\n            .replace(/^'+|'+$/g, ''); // trim and replace ''\n\n          const trimmedKey = key.trim();\n\n          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;\n          if (val === 'false') formatOptions[trimmedKey] = false;\n          if (val === 'true') formatOptions[trimmedKey] = true;\n          // eslint-disable-next-line no-restricted-globals\n          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);\n        }\n      });\n    }\n  }\n\n  return {\n    formatName,\n    formatOptions,\n  };\n};\n\nconst createCachedFormatter = (fn) => {\n  const cache = {};\n  return (v, l, o) => {\n    let optForCache = o;\n    // this cache optimization will only work for keys having 1 interpolated value\n    if (\n      o &&\n      o.interpolationkey &&\n      o.formatParams &&\n      o.formatParams[o.interpolationkey] &&\n      o[o.interpolationkey]\n    ) {\n      optForCache = {\n        ...optForCache,\n        [o.interpolationkey]: undefined,\n      };\n    }\n    const key = l + JSON.stringify(optForCache);\n    let frm = cache[key];\n    if (!frm) {\n      frm = fn(getCleanedCode(l), o);\n      cache[key] = frm;\n    }\n    return frm(v);\n  };\n};\n\nconst createNonCachedFormatter = (fn) => (v, l, o) => fn(getCleanedCode(l), o)(v);\n\nclass Formatter {\n  constructor(options = {}) {\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.init(options);\n  }\n\n  /* eslint no-param-reassign: 0 */\n  init(services, options = { interpolation: {} }) {\n    this.formatSeparator = options.interpolation.formatSeparator || ',';\n    const cf = options.cacheInBuiltFormats ? createCachedFormatter : createNonCachedFormatter;\n    this.formats = {\n      number: cf((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, { ...opt });\n        return (val) => formatter.format(val);\n      }),\n      currency: cf((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, { ...opt, style: 'currency' });\n        return (val) => formatter.format(val);\n      }),\n      datetime: cf((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, { ...opt });\n        return (val) => formatter.format(val);\n      }),\n      relativetime: cf((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, { ...opt });\n        return (val) => formatter.format(val, opt.range || 'day');\n      }),\n      list: cf((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, { ...opt });\n        return (val) => formatter.format(val);\n      }),\n    };\n  }\n\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n\n  format(value, format, lng, options = {}) {\n    const formats = format.split(this.formatSeparator);\n    if (\n      formats.length > 1 &&\n      formats[0].indexOf('(') > 1 &&\n      formats[0].indexOf(')') < 0 &&\n      formats.find((f) => f.indexOf(')') > -1)\n    ) {\n      const lastIndex = formats.findIndex((f) => f.indexOf(')') > -1);\n      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);\n    }\n\n    const result = formats.reduce((mem, f) => {\n      const { formatName, formatOptions } = parseFormatStr(f);\n\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          // options passed explicit for that formatted value\n          const valOptions = options?.formatParams?.[options.interpolationkey] || {};\n\n          // language\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions,\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n        // eslint-disable-next-line no-else-return\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n\n    return result;\n  }\n}\n\nexport default Formatter;\n","import { pushPath, isString } from './utils.js';\nimport baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\n\nconst removePending = (q, name) => {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n};\n\nclass Connector extends EventEmitter {\n  constructor(backend, store, services, options = {}) {\n    super();\n\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n\n    this.state = {};\n    this.queue = [];\n\n    this.backend?.init?.(services, options.backend, options);\n  }\n\n  queueLoad(languages, namespaces, options, callback) {\n    // find what needs to be loaded\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n\n    languages.forEach((lng) => {\n      let hasAllNamespaces = true;\n\n      namespaces.forEach((ns) => {\n        const name = `${lng}|${ns}`;\n\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2; // loaded\n        } else if (this.state[name] < 0) {\n          // nothing to do for err\n        } else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1; // pending\n\n          hasAllNamespaces = false;\n\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback,\n      });\n    }\n\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces),\n    };\n  }\n\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n\n    if (err) this.emit('failedLoading', lng, ns, err);\n\n    if (!err && data) {\n      this.store.addResourceBundle(lng, ns, data, undefined, undefined, { skipCopy: true });\n    }\n\n    // set loaded\n    this.state[name] = err ? -1 : 2;\n    if (err && data) this.state[name] = 0;\n\n    // consolidated loading done in this run - only emit once for a loaded namespace\n    const loaded = {};\n\n    // callback if ready\n    this.queue.forEach((q) => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n\n      if (err) q.errors.push(err);\n\n      if (q.pendingCount === 0 && !q.done) {\n        // only do once per loaded -> this.emit('loaded', q.loaded);\n        Object.keys(q.loaded).forEach((l) => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach((n) => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n\n        /* eslint no-param-reassign: 0 */\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n\n    // emit consolidated loaded event\n    this.emit('loaded', loaded);\n\n    // remove done load requests\n    this.queue = this.queue.filter((q) => !q.done);\n  }\n\n  read(lng, ns, fcName, tried = 0, wait = this.retryTimeout, callback) {\n    if (!lng.length) return callback(null, {}); // noting to load\n\n    // Limit parallelism of calls to backend\n    // This is needed to prevent trying to open thousands of\n    // sockets or file descriptors, which can cause failures\n    // and actually make the entire process take longer.\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({ lng, ns, fcName, tried, wait, callback });\n      return;\n    }\n    this.readingCalls++;\n\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data /* = retryFlag */ && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      // no callback\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          // promise\n          r.then((data) => resolver(null, data)).catch(resolver);\n        } else {\n          // sync\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n\n    // normal with callback\n    return fc(lng, ns, resolver);\n  }\n\n  /* eslint consistent-return: 0 */\n  prepareLoading(languages, namespaces, options = {}, callback) {\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n\n    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);\n    if (isString(namespaces)) namespaces = [namespaces];\n\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now\n      return null; // pendings will trigger callback\n    }\n\n    toLoad.toLoad.forEach((name) => {\n      this.loadOne(name);\n    });\n  }\n\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, { reload: true }, callback);\n  }\n\n  loadOne(name, prefix = '') {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data)\n        this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n\n      this.loaded(name, err, data);\n    });\n  }\n\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate, options = {}, clb = () => {}) {\n    if (\n      this.services?.utils?.hasLoadedNamespace &&\n      !this.services?.utils?.hasLoadedNamespace(namespace)\n    ) {\n      this.logger.warn(\n        `did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`,\n        'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!',\n      );\n      return;\n    }\n\n    // ignore non valid keys\n    if (key === undefined || key === null || key === '') return;\n\n    if (this.backend?.create) {\n      const opts = {\n        ...options,\n        isUpdate,\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        // no callback\n        try {\n          let r;\n          if (fc.length === 5) {\n            // future callback-less api for i18next-locize-backend\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            // promise\n            r.then((data) => clb(null, data)).catch(clb);\n          } else {\n            // sync\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        // normal with callback\n        fc(languages, namespace, key, fallbackValue, clb /* unused callback */, opts);\n      }\n    }\n\n    // write to store to avoid resending\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nexport default Connector;\n","import { isString } from './utils.js';\n\nexport const get = () => ({\n  debug: false,\n  initAsync: true,\n\n  ns: ['translation'],\n  defaultNS: ['translation'],\n  fallbackLng: ['dev'],\n  fallbackNS: false, // string or array of namespaces\n\n  supportedLngs: false, // array with supported languages\n  nonExplicitSupportedLngs: false,\n  load: 'all', // | currentOnly | languageOnly\n  preload: false, // array with preload languages\n\n  simplifyPluralSuffix: true,\n  keySeparator: '.',\n  nsSeparator: ':',\n  pluralSeparator: '_',\n  contextSeparator: '_',\n\n  partialBundledLanguages: false, // allow bundling certain languages that are not remotely fetched\n  saveMissing: false, // enable to send missing values\n  updateMissing: false, // enable to update default values if different from translated value (only useful on initial development, or when keeping code as source of truth)\n  saveMissingTo: 'fallback', // 'current' || 'all'\n  saveMissingPlurals: true, // will save all forms not only singular key\n  missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling\n  missingInterpolationHandler: false, // function(str, match)\n\n  postProcess: false, // string or array of postProcessor names\n  postProcessPassResolved: false, // pass resolved object into 'options.i18nResolved' for postprocessor\n  returnNull: false, // allows null value as valid translation\n  returnEmptyString: true, // allows empty string value as valid translation\n  returnObjects: false,\n  joinArrays: false, // or string to join array\n  returnedObjectHandler: false, // function(key, value, options) triggered if key returns object but returnObjects is set to false\n  parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning\n  appendNamespaceToMissingKey: false,\n  appendNamespaceToCIMode: false,\n  overloadTranslationOptionHandler: (args) => {\n    let ret = {};\n    if (typeof args[1] === 'object') ret = args[1];\n    if (isString(args[1])) ret.defaultValue = args[1];\n    if (isString(args[2])) ret.tDescription = args[2];\n    if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n      const options = args[3] || args[2];\n      Object.keys(options).forEach((key) => {\n        ret[key] = options[key];\n      });\n    }\n    return ret;\n  },\n  interpolation: {\n    escapeValue: true,\n    /** @type {import('i18next').FormatFunction} */\n    format: (value) => value,\n    prefix: '{{',\n    suffix: '}}',\n    formatSeparator: ',',\n    // prefixEscaped: '{{',\n    // suffixEscaped: '}}',\n    // unescapeSuffix: '',\n    unescapePrefix: '-',\n\n    nestingPrefix: '$t(',\n    nestingSuffix: ')',\n    nestingOptionsSeparator: ',',\n    // nestingPrefixEscaped: '$t(',\n    // nestingSuffixEscaped: ')',\n    // defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data\n    maxReplaces: 1000, // max replaces to prevent endless loop\n    skipOnVariables: true,\n  },\n  cacheInBuiltFormats: true,\n});\n\n/* eslint no-param-reassign: 0 */\nexport const transformOptions = (options) => {\n  // create namespace object if namespace is passed in as string\n  if (isString(options.ns)) options.ns = [options.ns];\n  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];\n  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];\n\n  // extend supportedLngs with cimode\n  if (options.supportedLngs?.indexOf?.('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  // for backward compatibility, assign initImmediate to initAsync (if set)\n  if (typeof options.initImmediate === 'boolean') options.initAsync = options.initImmediate;\n\n  return options;\n};\n","import baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport ResourceStore from './ResourceStore.js';\nimport Translator from './Translator.js';\nimport LanguageUtils from './LanguageUtils.js';\nimport PluralResolver from './PluralResolver.js';\nimport Interpolator from './Interpolator.js';\nimport Formatter from './Formatter.js';\nimport BackendConnector from './BackendConnector.js';\nimport { get as getDefaults, transformOptions } from './defaults.js';\nimport postProcessor from './postProcessor.js';\nimport { defer, isString } from './utils.js';\nimport keysFromSelector from './selector.js';\n\nconst noop = () => {}\n\n// Binds the member functions of the given class instance so that they can be\n// destructured or used as callbacks.\nconst bindMemberFunctions = (inst) => {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst))\n  mems.forEach((mem) => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst)\n    }\n  })\n}\n\nclass I18n extends EventEmitter {\n  constructor(options = {}, callback) {\n    super();\n\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = { external: [] };\n\n    bindMemberFunctions(this);\n\n    if (callback && !this.isInitialized && !options.isClone) {\n      // https://github.com/i18next/i18next/issues/879\n      if (!this.options.initAsync) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n\n  init(options = {}, callback) {\n    this.isInitializing = true;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    if (options.defaultNS == null && options.ns) {\n      if (isString(options.ns)) {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n\n    const defOpts = getDefaults();\n    this.options = { ...defOpts, ...this.options, ...transformOptions(options) };\n    this.options.interpolation = { ...defOpts.interpolation, ...this.options.interpolation }; // do not use reference\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n\n    const createClassOnDemand = (ClassOrObject) => {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    }\n\n    // init services\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else {\n        formatter = Formatter;\n      }\n\n      const lu = new LanguageUtils(this.options);\n\n      // if (this.options.resources) {\n      //   Object.keys(this.options.resources).forEach((lng) => {\n      //     const fLng = lu.formatLanguageCode(lng);\n      //     if (fLng !== lng) {\n      //       this.options.resources[fLng] = this.options.resources[lng];\n      //       delete this.options.resources[lng];\n      //       this.logger.warn(`init: lng in resource is not valid, mapping ${lng} to ${fLng}`);\n      //     }\n      //   })\n      // }\n\n      this.store = new ResourceStore(this.options.resources, this.options);\n\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix,\n      });\n\n      const usingLegacyFormatFunction = this.options.interpolation.format && this.options.interpolation.format !== defOpts.interpolation.format;\n      if (usingLegacyFormatFunction) {\n        this.logger.deprecate(`init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting`);\n      }\n\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        if (s.formatter.init) s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n\n      s.backendConnector = new BackendConnector(\n        createClassOnDemand(this.modules.backend),\n        s.resourceStore,\n        s,\n        this.options,\n      );\n      // pipe events from backendConnector\n      s.backendConnector.on('*', (event, ...args) => {\n        this.emit(event, ...args);\n      });\n\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n\n      this.translator = new Translator(this.services, this.options);\n      // pipe events from translator\n      this.translator.on('*', (event, ...args) => {\n        this.emit(event, ...args);\n      });\n\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng)\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0]\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n\n    // append api\n    const storeApi = [\n      'getResource',\n      'hasResourceBundle',\n      'getResourceBundle',\n      'getDataByLanguage',\n    ];\n    storeApi.forEach(fcName => {\n      this[fcName] = (...args) => this.store[fcName](...args);\n    });\n    const storeApiChained = [\n      'addResource',\n      'addResources',\n      'addResourceBundle',\n      'removeResourceBundle',\n    ];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = (...args) => {\n        this.store[fcName](...args);\n        return this;\n      };\n    });\n\n    const deferred = defer();\n\n    const load = () => {\n      const finish = (err, t) => {\n        this.isInitializing = false;\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n\n        deferred.resolve(t); // not rejecting on err (as err is only a loading translation failed warning)\n        callback(err, t);\n      };\n      // fix for use cases when calling changeLanguage before finished to initialized (i.e. https://github.com/i18next/i18next/issues/1552)\n      if (this.languages && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n\n    if (this.options.resources || !this.options.initAsync) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n\n    return deferred;\n  }\n\n  /* eslint consistent-return: 0 */\n  loadResources(language, callback = noop) {\n    let usedCallback = callback;\n    const usedLng = isString(language) ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng?.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback(); // avoid loading resources for cimode\n\n      const toLoad = [];\n\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      if (!usedLng) {\n        // at least load fallbacks in this case\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n\n      this.options.preload?.forEach?.(l => append(l));\n\n      this.services.backendConnector.load(toLoad, this.options.ns, (e) => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'function') {\n      callback = lngs;\n      lngs = undefined;\n    }\n    if (typeof ns === 'function') {\n      callback = ns;\n      ns = undefined;\n    }\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve(); // not rejecting on err (as err is only a loading translation failed warning)\n      callback(err);\n    });\n    return deferred;\n  }\n\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()')\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()')\n\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n\n    if (module.type === 'logger' || (module.log && module.warn && module.error)) {\n      this.modules.logger = module;\n    }\n\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n\n    return this;\n  }\n\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n    if (!this.resolvedLanguage && this.languages.indexOf(l) < 0 && this.store.hasLanguageSomeTranslations(l)) {\n      this.resolvedLanguage = l;\n      this.languages.unshift(l);\n    }\n  }\n\n  changeLanguage(lng, callback) {\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n\n    const setLngProps = (l) => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      // find the first language resolved language\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n\n    const done = (err, l) => {\n      if (l) {\n        if (this.isLanguageChangingTo === lng) {\n          setLngProps(l);\n          this.translator.changeLanguage(l);\n          this.isLanguageChangingTo = undefined;\n          this.emit('languageChanged', l);\n          this.logger.log('languageChanged', l);\n        }\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n\n      deferred.resolve((...args) => this.t(...args));\n      if (callback) callback(err, (...args) => this.t(...args));\n    };\n\n    const setLng = lngs => {\n      // if detected lng is falsy, set it to empty array, to make sure at least the fallbackLng will be used\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      // depending on API in detector lng can be a string (old) or an array of languages ordered in priority\n      const fl = isString(lngs) ? lngs : lngs && lngs[0];\n      const l = this.store.hasLanguageSomeTranslations(fl) ? fl : this.services.languageUtils.getBestMatchFromCodes(isString(lngs) ? [lngs] : lngs);\n\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n\n        this.services.languageDetector?.cacheUserLanguage?.(l);\n      }\n\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n\n    return deferred;\n  }\n\n  getFixedT(lng, ns, keyPrefix) {\n    const fixedT = (key, opts, ...rest) => {\n      let o;\n      if (typeof opts !== 'object') {\n        o = this.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        o = { ...opts };\n      }\n\n      o.lng = o.lng || fixedT.lng;\n      o.lngs = o.lngs || fixedT.lngs;\n      o.ns = o.ns || fixedT.ns;\n      if (o.keyPrefix !== '') o.keyPrefix = o.keyPrefix || keyPrefix || fixedT.keyPrefix;\n\n      const keySeparator = this.options.keySeparator || '.';\n      let resultKey\n      if (o.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => {\n          if (typeof k === 'function') k = keysFromSelector(k, { ...this.options, ...opts });\n          return `${o.keyPrefix}${keySeparator}${k}`\n        });\n      } else {\n        if (typeof key === 'function') key = keysFromSelector(key, { ...this.options, ...opts });\n        resultKey = o.keyPrefix ? `${o.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return this.t(resultKey, o);\n    };\n    if (isString(lng)) {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n\n  t(...args) {\n    return this.translator?.translate(...args);\n  }\n\n  exists(...args) {\n    return this.translator?.exists(...args);\n  }\n\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n\n  hasLoadedNamespace(ns, options = {}) {\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n\n    // we're in cimode so this shall pass\n    if (lng.toLowerCase() === 'cimode') return true;\n\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 0 || loadState === 2;\n    };\n\n    // optional injected check\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n\n    // loaded -> SUCCESS\n    if (this.hasResourceBundle(lng, ns)) return true;\n\n    // were not loading at all -> SEMI SUCCESS\n    if (!this.services.backendConnector.backend || (this.options.resources && !this.options.partialBundledLanguages)) return true;\n\n    // failed loading ns - but at least fallback is not pending -> SEMI SUCCESS\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n\n    return false;\n  }\n\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (isString(ns)) ns = [ns];\n\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n\n    return deferred;\n  }\n\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n\n    if (isString(lngs)) lngs = [lngs];\n    const preloaded = this.options.preload || [];\n\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));\n    // Exit early if all given languages are already preloaded\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n\n    return deferred;\n  }\n\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages?.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n\n    try {\n      const l = new Intl.Locale(lng)\n      if (l && l.getTextInfo) {\n        const ti = l.getTextInfo()\n        if (ti && ti.direction) return ti.direction\n      }\n    } catch (e) {/* fall through */}\n\n    const rtlLngs = [\n      'ar',\n      'shu',\n      'sqr',\n      'ssh',\n      'xaa',\n      'yhd',\n      'yud',\n      'aao',\n      'abh',\n      'abv',\n      'acm',\n      'acq',\n      'acw',\n      'acx',\n      'acy',\n      'adf',\n      'ads',\n      'aeb',\n      'aec',\n      'afb',\n      'ajp',\n      'apc',\n      'apd',\n      'arb',\n      'arq',\n      'ars',\n      'ary',\n      'arz',\n      'auz',\n      'avl',\n      'ayh',\n      'ayl',\n      'ayn',\n      'ayp',\n      'bbz',\n      'pga',\n      'he',\n      'iw',\n      'ps',\n      'pbt',\n      'pbu',\n      'pst',\n      'prp',\n      'prd',\n      'ug',\n      'ur',\n      'ydd',\n      'yds',\n      'yih',\n      'ji',\n      'yi',\n      'hbo',\n      'men',\n      'xmn',\n      'fa',\n      'jpr',\n      'peo',\n      'pes',\n      'prs',\n      'dv',\n      'sam',\n      'ckb'\n    ];\n\n    const languageUtils = this.services?.languageUtils || new LanguageUtils(getDefaults()) // for uninitialized usage\n    if (lng.toLowerCase().indexOf('-latn') > 1) return 'ltr';\n\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1\n      ? 'rtl'\n      : 'ltr';\n  }\n\n  static createInstance(options = {}, callback) {\n    const instance = new I18n(options, callback)\n    instance.createInstance = I18n.createInstance;\n    return instance;\n  }\n\n  cloneInstance(options = {}, callback = noop) {\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = { ...this.options, ...options, ...{ isClone: true } };\n    const clone = new I18n(mergedOptions);\n    if ((options.debug !== undefined || options.prefix !== undefined)) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = { ...this.services };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      // faster than const clonedData = JSON.parse(JSON.stringify(this.store.data))\n      const clonedData = Object.keys(this.store.data).reduce((prev, l) => {\n        prev[l] = { ...this.store.data[l] };\n        prev[l] = Object.keys(prev[l]).reduce((acc, n) => {\n          acc[n] = { ...prev[l][n] };\n          return acc;\n        }, prev[l]);\n        return prev;\n      }, {});\n      clone.store = new ResourceStore(clonedData, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', (event, ...args) => {\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions; // sync options\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n\n    return clone;\n  }\n\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\n\nconst instance = I18n.createInstance();\n\nexport default instance;\n","import i18next from './i18next.js';\n\nexport { default as keyFromSelector } from './selector.js';\n\nexport default i18next;\n\nexport const createInstance = i18next.createInstance;\n\nexport const dir = i18next.dir;\nexport const init = i18next.init;\nexport const loadResources = i18next.loadResources;\nexport const reloadResources = i18next.reloadResources;\nexport const use = i18next.use;\nexport const changeLanguage = i18next.changeLanguage;\nexport const getFixedT = i18next.getFixedT;\nexport const t = i18next.t;\nexport const exists = i18next.exists;\nexport const setDefaultNamespace = i18next.setDefaultNamespace;\nexport const hasLoadedNamespace = i18next.hasLoadedNamespace;\nexport const loadNamespaces = i18next.loadNamespaces;\nexport const loadLanguages = i18next.loadLanguages;\n","/* eslint-disable\n    @typescript-eslint/no-namespace,\n    @typescript-eslint/no-explicit-any,\n */\n\nimport {\n    default as i18next,\n    type i18n as i18nextInstance,\n    type FallbackLngObjList as i18nextFallbackLngObjList,\n    type FallbackLng as i18nextFallbackLng,\n    type InterpolationOptions as i18nextInterpolationOptions,\n    type ReactOptions as i18nextReactOptions,\n    type InitOptions as i18nextInitOptions,\n    type TOptionsBase as i18nextTOptionsBase,\n    type TOptions as i18nextTOptions,\n    type ExistsFunction as i18nextExistsFunction,\n    type WithT as i18nextWithT,\n    type TFunction as i18nextTFunction,\n    type Resource as i18nextResource,\n    type ResourceLanguage as i18nextResourceLanguage,\n    type ResourceKey as i18nextResourceKey,\n    type Interpolator as i18nextInterpolator,\n    type ResourceStore as i18nextResourceStore,\n    type Services as i18nextServices,\n    type Module as i18nextModule,\n    type CallbackError as i18nextCallbackError,\n    type ReadCallback as i18nextReadCallback,\n    type MultiReadCallback as i18nextMultiReadCallback,\n    type BackendModule as i18nextBackendModule,\n    type LanguageDetectorModule as i18nextLanguageDetectorModule,\n    type LanguageDetectorAsyncModule as i18nextLanguageDetectorAsyncModule,\n    type PostProcessorModule as i18nextPostProcessorModule,\n    type LoggerModule as i18nextLoggerModule,\n    type I18nFormatModule as i18nextI18nFormatModule,\n    type ThirdPartyModule as i18nextThirdPartyModule,\n    type Modules as i18nextModules,\n    type Newable as i18nextNewable,\n} from 'i18next';\n\nconst i18n: i18n.i18n = i18next;\n\ndeclare namespace i18n {\n    export type i18n = i18nextInstance;\n    export type FallbackLngObjList = i18nextFallbackLngObjList;\n    export type FallbackLng = i18nextFallbackLng;\n    export type InterpolationOptions = i18nextInterpolationOptions;\n    export type ReactOptions = i18nextReactOptions;\n    export type InitOptions = i18nextInitOptions;\n    export type TOptionsBase = i18nextTOptionsBase;\n    export type TOptions<T extends Record<string, unknown> = Record<string, any>> = i18nextTOptions<T>;\n    export type ExistsFunction<K extends string = string, T extends Record<string, unknown> = Record<string, any>> = i18nextExistsFunction<K, T>;\n    export type WithT = i18nextWithT;\n    export type TFunction = i18nextTFunction;\n    export type Resource = i18nextResource;\n    export type ResourceLanguage = i18nextResourceLanguage;\n    export type ResourceKey = i18nextResourceKey;\n    export type Interpolator = i18nextInterpolator;\n    export type ResourceStore = i18nextResourceStore;\n    export type Services = i18nextServices;\n    export type Module = i18nextModule;\n    export type CallbackError = i18nextCallbackError;\n    export type ReadCallback = i18nextReadCallback;\n    export type MultiReadCallback = i18nextMultiReadCallback;\n    export type BackendModule<T = Record<string, unknown>> = i18nextBackendModule<T>;\n    export type LanguageDetectorModule = i18nextLanguageDetectorModule;\n    export type LanguageDetectorAsyncModule = i18nextLanguageDetectorAsyncModule;\n    export type PostProcessorModule = i18nextPostProcessorModule;\n    export type LoggerModule = i18nextLoggerModule;\n    export type I18nFormatModule = i18nextI18nFormatModule;\n    export type ThirdPartyModule = i18nextThirdPartyModule;\n    export type Modules = i18nextModules;\n    export type Newable<T> = i18nextNewable<T>;\n}\n\nexport { i18n };\n"],"mappings":";;;;uRAAO,MAAMA,EAAYC,GAAuB,iBAARA,EAG3BC,EAAQ,KACnB,IAAIC,EACAC,EAEJ,MAAMC,EAAU,IAAIC,QAAQ,CAACC,EAASC,KACpCL,EAAMI,EACNH,EAAMI,IAMR,OAHAH,EAAQE,QAAUJ,EAClBE,EAAQG,OAASJ,EAEVC,GAGII,EAAcC,GACX,MAAVA,EAAuB,GAEpB,GAAKA,EAWRC,EAA4B,OAE5BC,EAAYC,GAChBA,GAAOA,EAAIC,QAAQ,QAAS,EAAKD,EAAIE,QAAQJ,EAA2B,KAAOE,EAE3EG,EAAwBN,IAAYA,GAAUV,EAASU,GAEvDO,EAAgB,CAACP,EAAQQ,EAAMC,KACnC,MAAMC,EAASpB,EAASkB,GAAeA,EAAKG,MAAM,KAAlBH,EAChC,IAAII,EAAa,EAEjB,KAAOA,EAAaF,EAAMG,OAAS,GAAG,CACpC,GAAIP,EAAqBN,GAAS,MAAO,GAEzC,MAAMG,EAAMD,EAASQ,EAAME,KACtBZ,EAAOG,IAAQM,IAAOT,EAAOG,GAAO,IAAIM,GAG3CT,EADEc,OAAOC,UAAUC,eAAeC,KAAKjB,EAAQG,GACtCH,EAAOG,GAEP,KAETS,CACJ,CAEA,OAAIN,EAAqBN,GAAgB,GAClC,CACLT,IAAKS,EACLkB,EAAGhB,EAASQ,EAAME,MAITO,EAAU,CAACnB,EAAQQ,EAAMY,KACpC,MAAM7B,IAAEA,EAAG2B,EAAEA,GAAMX,EAAcP,EAAQQ,EAAMM,QAC/C,QAAYO,IAAR9B,GAAqC,IAAhBiB,EAAKK,OAE5B,OADAtB,EAAI2B,GAAKE,OACT,EAGF,IAAIE,EAAId,EAAKA,EAAKK,OAAS,GACvBU,EAAIf,EAAKgB,MAAM,EAAGhB,EAAKK,OAAS,GAChCY,EAAOlB,EAAcP,EAAQuB,EAAGT,QACpC,UAAoBO,IAAbI,EAAKlC,KAAqBgC,EAAEV,QACjCS,EAAI,GAAGC,EAAEA,EAAEV,OAAS,MAAMS,IAC1BC,EAAIA,EAAEC,MAAM,EAAGD,EAAEV,OAAS,GAC1BY,EAAOlB,EAAcP,EAAQuB,EAAGT,QAC5BW,GAAMlC,UAA6C,IAA/BkC,EAAKlC,IAAI,GAAGkC,EAAKP,KAAKI,OAC5CG,EAAKlC,SAAM8B,GAGfI,EAAKlC,IAAI,GAAGkC,EAAKP,KAAKI,KAAOF,GAWlBM,EAAU,CAAC1B,EAAQQ,KAC9B,MAAMjB,IAAEA,EAAG2B,EAAEA,GAAMX,EAAcP,EAAQQ,GAEzC,GAAKjB,GACAuB,OAAOC,UAAUC,eAAeC,KAAK1B,EAAK2B,GAC/C,OAAO3B,EAAI2B,IAYAS,EAAa,CAACC,EAAQC,EAAQC,KAEzC,IAAK,MAAMC,KAAQF,EACJ,cAATE,GAAiC,gBAATA,IACtBA,KAAQH,EAGRtC,EAASsC,EAAOG,KAChBH,EAAOG,aAAiBC,QACxB1C,EAASuC,EAAOE,KAChBF,EAAOE,aAAiBC,OAEpBF,IAAWF,EAAOG,GAAQF,EAAOE,IAErCJ,EAAWC,EAAOG,GAAOF,EAAOE,GAAOD,GAGzCF,EAAOG,GAAQF,EAAOE,IAI5B,OAAOH,GAGIK,EAAeC,GAE1BA,EAAI7B,QAAQ,sCAAuC,QAGrD,IAAI8B,EAAa,CACf,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,UAIA,MAAMC,EAAUC,GACjB/C,EAAS+C,GACJA,EAAKhC,QAAQ,aAAeiC,GAAMH,EAAWG,IAG/CD,EAgCT,MAAME,EAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,KAG7BC,EAAiC,IA3BvC,MAAMC,EACJ,WAAAC,CAAYC,GACVC,KAAKD,SAAWA,EAChBC,KAAKC,UAAY,IAAIC,IAGrBF,KAAKG,YAAc,EACrB,CAEA,SAAAC,CAAUC,GACR,MAAMC,EAAkBN,KAAKC,UAAUM,IAAIF,GAC3C,QAAwB5B,IAApB6B,EACF,OAAOA,EAET,MAAME,EAAY,IAAIC,OAAOJ,GAM7B,OALIL,KAAKG,YAAYlC,SAAW+B,KAAKD,UACnCC,KAAKC,UAAUS,OAAOV,KAAKG,YAAYQ,SAEzCX,KAAKC,UAAUW,IAAIP,EAASG,GAC5BR,KAAKG,YAAYU,KAAKR,GACfG,CACT,GAMqD,IAgC1CM,EAAW,CAACnE,EAAKiB,EAAMmD,EAAe,OACjD,IAAKpE,EAAK,OACV,GAAIA,EAAIiB,GAAO,CACb,IAAKM,OAAOC,UAAUC,eAAeC,KAAK1B,EAAKiB,GAAO,OACtD,OAAOjB,EAAIiB,EACb,CACA,MAAMoD,EAASpD,EAAKG,MAAMgD,GAC1B,IAAIE,EAAUtE,EACd,IAAK,IAAIuE,EAAI,EAAGA,EAAIF,EAAO/C,QAAU,CACnC,IAAKgD,GAA8B,iBAAZA,EACrB,OAEF,IAAIE,EACAC,EAAW,GACf,IAAK,IAAIC,EAAIH,EAAGG,EAAIL,EAAO/C,SAAUoD,EAMnC,GALIA,IAAMH,IACRE,GAAYL,GAEdK,GAAYJ,EAAOK,GACnBF,EAAOF,EAAQG,QACF3C,IAAT0C,EAAoB,CACtB,GAAI,CAAC,SAAU,SAAU,WAAW3D,eAAe2D,IAAQ,GAAME,EAAIL,EAAO/C,OAAS,EACnF,SAEFiD,GAAKG,EAAIH,EAAI,EACb,KACF,CAEFD,EAAUE,CACZ,CACA,OAAOF,GAGIK,EAAkBC,GAASA,GAAM9D,QAAQ,IAAK,KC5PrD+D,EAAgB,CACpBC,KAAM,SAEN,GAAAC,CAAIC,GACF3B,KAAK4B,OAAO,MAAOD,EACrB,EAEA,IAAAE,CAAKF,GACH3B,KAAK4B,OAAO,OAAQD,EACtB,EAEA,KAAAG,CAAMH,GACJ3B,KAAK4B,OAAO,QAASD,EACvB,EAEA,MAAAC,CAAOH,EAAME,GAEXI,SACF,GAGF,MAAMC,EACJ,WAAAlC,CAAYmC,EAAgBC,EAAU,IACpClC,KAAKmC,KAAKF,EAAgBC,EAC5B,CAEA,IAAAC,CAAKF,EAAgBC,EAAU,IAC7BlC,KAAKoC,OAASF,EAAQE,QAAU,WAChCpC,KAAKqC,OAASJ,GAAkBT,EAChCxB,KAAKkC,QAAUA,EACflC,KAAKsC,MAAQJ,EAAQI,KACvB,CAEA,GAAAZ,IAAOC,GACL,OAAO3B,KAAKuC,QAAQZ,EAAM,MAAO,IAAI,EACvC,CAEA,IAAAE,IAAQF,GACN,OAAO3B,KAAKuC,QAAQZ,EAAM,OAAQ,IAAI,EACxC,CAEA,KAAAG,IAASH,GACP,OAAO3B,KAAKuC,QAAQZ,EAAM,QAAS,GACrC,CAEA,SAAAa,IAAab,GACX,OAAO3B,KAAKuC,QAAQZ,EAAM,OAAQ,wBAAwB,EAC5D,CAEA,OAAAY,CAAQZ,EAAMc,EAAKL,EAAQM,GACzB,OAAIA,IAAc1C,KAAKsC,MAAc,MACjC5F,EAASiF,EAAK,MAAKA,EAAK,GAAK,GAAGS,IAASpC,KAAKoC,UAAUT,EAAK,MAC1D3B,KAAKqC,OAAOI,GAAKd,GAC1B,CAEA,MAAAgB,CAAOC,GACL,OAAO,IAAIZ,EAAOhC,KAAKqC,OAAQ,CACxBD,OAAQ,GAAGpC,KAAKoC,UAAUQ,QAC5B5C,KAAKkC,SAEZ,CAEA,KAAAW,CAAMX,GAGJ,OAFAA,EAAUA,GAAWlC,KAAKkC,QAC1BA,EAAQE,OAASF,EAAQE,QAAUpC,KAAKoC,OACjC,IAAIJ,EAAOhC,KAAKqC,OAAQH,EACjC,EAGF,MAAAY,EAAe,IAAId,ECvEnB,MAAMe,EACJ,WAAAjD,GASEE,KAAKgD,UAAY,EACnB,CAEA,EAAAC,CAAGC,EAAQC,GAMT,OALAD,EAAOnF,MAAM,KAAKqF,QAASC,IACpBrD,KAAKgD,UAAUK,KAAQrD,KAAKgD,UAAUK,GAAS,IAAInD,KACxD,MAAMoD,EAAetD,KAAKgD,UAAUK,GAAO9C,IAAI4C,IAAa,EAC5DnD,KAAKgD,UAAUK,GAAOzC,IAAIuC,EAAUG,EAAe,KAE9CtD,IACT,CAEA,GAAAuD,CAAIF,EAAOF,GACT,GAAKnD,KAAKgD,UAAUK,GACpB,OAAKF,GAKLnD,KAAKgD,UAAUK,GAAO3C,OAAOyC,QAA7BnD,WAJSA,KAAKgD,UAAUK,QACtB,EAIJ,CAEA,IAAAG,CAAKH,KAAU1B,GACb,GAAI3B,KAAKgD,UAAUK,GAAQ,CACzB,MAAMI,EAASC,MAAMC,KAAK3D,KAAKgD,UAAUK,GAAOO,WAChDH,EAAOL,QAAQ,EAAES,EAAUC,MACzB,IAAK,IAAI5C,EAAI,EAAGA,EAAI4C,EAAe5C,IACjC2C,KAAYlC,IAGlB,CAEA,GAAI3B,KAAKgD,UAAU,KAAM,CACvB,MAAMS,EAASC,MAAMC,KAAK3D,KAAKgD,UAAU,KAAKY,WAC9CH,EAAOL,QAAQ,EAAES,EAAUC,MACzB,IAAK,IAAI5C,EAAI,EAAGA,EAAI4C,EAAe5C,IACjC2C,EAASE,MAAMF,EAAU,CAACR,KAAU1B,KAG1C,CACF,EC/CF,MAAMqC,UAAsBjB,EAC1B,WAAAjD,CAAYL,EAAMyC,EAAU,CAAE+B,GAAI,CAAC,eAAgBC,UAAW,gBAC5DC,QAEAnE,KAAKP,KAAOA,GAAQ,GACpBO,KAAKkC,QAAUA,OACmBzD,IAA9BuB,KAAKkC,QAAQnB,eACff,KAAKkC,QAAQnB,aAAe,UAEWtC,IAArCuB,KAAKkC,QAAQkC,sBACfpE,KAAKkC,QAAQkC,qBAAsB,EAEvC,CAEA,aAAAC,CAAcJ,GACRjE,KAAKkC,QAAQ+B,GAAGzG,QAAQyG,GAAM,GAChCjE,KAAKkC,QAAQ+B,GAAGpD,KAAKoD,EAEzB,CAEA,gBAAAK,CAAiBL,GACf,MAAMM,EAAQvE,KAAKkC,QAAQ+B,GAAGzG,QAAQyG,GAClCM,GAAQ,GACVvE,KAAKkC,QAAQ+B,GAAGO,OAAOD,EAAO,EAElC,CAEA,WAAAE,CAAYC,EAAKT,EAAI1G,EAAK2E,EAAU,IAClC,MAAMnB,OACqBtC,IAAzByD,EAAQnB,aAA6BmB,EAAQnB,aAAef,KAAKkC,QAAQnB,aAErEqD,OAC4B3F,IAAhCyD,EAAQkC,oBACJlC,EAAQkC,oBACRpE,KAAKkC,QAAQkC,oBAEnB,IAAIxG,EACA8G,EAAIlH,QAAQ,MAAO,EACrBI,EAAO8G,EAAI3G,MAAM,MAEjBH,EAAO,CAAC8G,EAAKT,GACT1G,IACEmG,MAAMiB,QAAQpH,GAChBK,EAAKiD,QAAQtD,GACJb,EAASa,IAAQwD,EAC1BnD,EAAKiD,QAAQtD,EAAIQ,MAAMgD,IAEvBnD,EAAKiD,KAAKtD,KAKhB,MAAMqH,EAAS9F,EAAQkB,KAAKP,KAAM7B,GAMlC,OALKgH,IAAWX,IAAO1G,GAAOmH,EAAIlH,QAAQ,MAAO,IAC/CkH,EAAM9G,EAAK,GACXqG,EAAKrG,EAAK,GACVL,EAAMK,EAAKgB,MAAM,GAAGiG,KAAK,OAEvBD,GAAWR,GAAwB1H,EAASa,GAEzCuD,EAASd,KAAKP,OAAOiF,KAAOT,GAAK1G,EAAKwD,GAFgB6D,CAG/D,CAEA,WAAAE,CAAYJ,EAAKT,EAAI1G,EAAKwH,EAAO7C,EAAU,CAAE8C,QAAQ,IACnD,MAAMjE,OACqBtC,IAAzByD,EAAQnB,aAA6BmB,EAAQnB,aAAef,KAAKkC,QAAQnB,aAE3E,IAAInD,EAAO,CAAC8G,EAAKT,GACb1G,IAAKK,EAAOA,EAAKqH,OAAOlE,EAAexD,EAAIQ,MAAMgD,GAAgBxD,IAEjEmH,EAAIlH,QAAQ,MAAO,IACrBI,EAAO8G,EAAI3G,MAAM,KACjBgH,EAAQd,EACRA,EAAKrG,EAAK,IAGZoC,KAAKqE,cAAcJ,GAEnB1F,EAAQyB,KAAKP,KAAM7B,EAAMmH,GAEpB7C,EAAQ8C,QAAQhF,KAAKwD,KAAK,QAASkB,EAAKT,EAAI1G,EAAKwH,EACxD,CAEA,YAAAG,CAAaR,EAAKT,EAAIkB,EAAWjD,EAAU,CAAE8C,QAAQ,IAEnD,IAAK,MAAMI,KAAKD,GACVzI,EAASyI,EAAUC,KAAO1B,MAAMiB,QAAQQ,EAAUC,MACpDpF,KAAK8E,YAAYJ,EAAKT,EAAImB,EAAGD,EAAUC,GAAI,CAAEJ,QAAQ,IAEpD9C,EAAQ8C,QAAQhF,KAAKwD,KAAK,QAASkB,EAAKT,EAAIkB,EACnD,CAEA,iBAAAE,CACEX,EACAT,EACAkB,EACAG,EACApG,EACAgD,EAAU,CAAE8C,QAAQ,EAAOO,UAAU,IAErC,IAAI3H,EAAO,CAAC8G,EAAKT,GACbS,EAAIlH,QAAQ,MAAO,IACrBI,EAAO8G,EAAI3G,MAAM,KACjBuH,EAAOH,EACPA,EAAYlB,EACZA,EAAKrG,EAAK,IAGZoC,KAAKqE,cAAcJ,GAEnB,IAAIuB,EAAO1G,EAAQkB,KAAKP,KAAM7B,IAAS,GAElCsE,EAAQqD,WAAUJ,EAAYM,KAAKC,MAAMD,KAAKE,UAAUR,KAEzDG,EACFvG,EAAWyG,EAAML,EAAWjG,GAE5BsG,EAAO,IAAKA,KAASL,GAGvB5G,EAAQyB,KAAKP,KAAM7B,EAAM4H,GAEpBtD,EAAQ8C,QAAQhF,KAAKwD,KAAK,QAASkB,EAAKT,EAAIkB,EACnD,CAEA,oBAAAS,CAAqBlB,EAAKT,GACpBjE,KAAK6F,kBAAkBnB,EAAKT,WACvBjE,KAAKP,KAAKiF,GAAKT,GAExBjE,KAAKsE,iBAAiBL,GAEtBjE,KAAKwD,KAAK,UAAWkB,EAAKT,EAC5B,CAEA,iBAAA4B,CAAkBnB,EAAKT,GACrB,YAAqCxF,IAA9BuB,KAAKyE,YAAYC,EAAKT,EAC/B,CAEA,iBAAA6B,CAAkBpB,EAAKT,GAErB,OADKA,IAAIA,EAAKjE,KAAKkC,QAAQgC,WACpBlE,KAAKyE,YAAYC,EAAKT,EAC/B,CAEA,iBAAA8B,CAAkBrB,GAChB,OAAO1E,KAAKP,KAAKiF,EACnB,CAEA,2BAAAsB,CAA4BtB,GAC1B,MAAMjF,EAAOO,KAAK+F,kBAAkBrB,GAC9BuB,EAAKxG,GAAQvB,OAAOgI,KAAKzG,IAAU,GACzC,QAASwG,EAAEE,KAAMC,GAAM3G,EAAK2G,IAAMlI,OAAOgI,KAAKzG,EAAK2G,IAAInI,OAAS,EAClE,CAEA,MAAAoI,GACE,OAAOrG,KAAKP,IACd,EC9JF,MAAA6G,EAAe,CACbC,WAAY,GAEZ,gBAAAC,CAAiBC,GACfzG,KAAKuG,WAAWE,EAAOC,MAAQD,CACjC,EAEA,MAAAE,CAAOJ,EAAYxB,EAAOxH,EAAK2E,EAAS0E,GAKtC,OAJAL,EAAWnD,QAASyD,IAClB9B,EAAQ/E,KAAKuG,WAAWM,IAAYC,QAAQ/B,EAAOxH,EAAK2E,EAAS0E,IAAe7B,IAG3EA,CACT,GCbIgC,EAAWC,OAAO,oBAiBT,SAASC,EAAiBC,EAAUC,GACjD,MAAQJ,CAACA,GAAWnJ,GAASsJ,EAhB/B,SAASE,IACP,MAAMC,EAAQ,GAERC,EAAUpJ,OAAOyE,OAAO,MAC9B,IAAI4E,EAQJ,OAPAD,EAAQ/G,IAAM,CAACvB,EAAQzB,KACrBgK,GAAOC,WACHjK,IAAQwJ,EAAiBM,GAC7BA,EAAMxG,KAAKtD,GACXgK,EAAQE,MAAMC,UAAU1I,EAAQsI,GACzBC,EAAMA,QAERE,MAAMC,UAAUxJ,OAAOyE,OAAO,MAAO2E,GAASC,KACvD,CAGwCH,IACtC,OAAOxJ,EAAKiH,KAAKsC,GAAMpG,cAAgB,IACzC,CCdA,MAAM4G,EAAmB,GAEnBC,EAAwB/K,IAC3BH,EAASG,IAAuB,kBAARA,GAAoC,iBAARA,EAEvD,MAAMgL,UAAmB9E,EACvB,WAAAjD,CAAYgI,EAAU5F,EAAU,INYd,IAAC6F,EAAGrI,EAAGsI,EMXvB7D,QNWiB4D,EMRf,CACE,gBACA,gBACA,iBACA,eACA,mBACA,aACA,SNCgBrI,EMClBoI,ENDqBE,EMErBhI,KNDJ+H,EAAE3E,QAASgC,IACL1F,EAAE0F,KAAI4C,EAAE5C,GAAK1F,EAAE0F,MMGnBpF,KAAKkC,QAAUA,OACmBzD,IAA9BuB,KAAKkC,QAAQnB,eACff,KAAKkC,QAAQnB,aAAe,KAG9Bf,KAAKqC,OAASS,EAAWH,OAAO,aAClC,CAEA,cAAAsF,CAAevD,GACTA,IAAK1E,KAAKkI,SAAWxD,EAC3B,CAEA,MAAAyD,CAAO5K,EAAK6K,EAAI,CAAEC,cAAe,KAC/B,MAAMC,EAAM,IAAKF,GACjB,GAAW,MAAP7K,EAAa,OAAO,EACxB,MAAMgL,EAAWvI,KAAK/C,QAAQM,EAAK+K,GAGnC,QAAsB7J,IAAlB8J,GAAU1L,IAAmB,OAAO,EAGxC,MAAM2L,EAAWZ,EAAqBW,EAAS1L,KAG/C,OAA0B,IAAtByL,EAAIG,gBAA2BD,CAMrC,CAEA,cAAAE,CAAenL,EAAK+K,GAClB,IAAIK,OAAkClK,IAApB6J,EAAIK,YAA4BL,EAAIK,YAAc3I,KAAKkC,QAAQyG,iBAC7DlK,IAAhBkK,IAA2BA,EAAc,KAE7C,MAAM5H,OACiBtC,IAArB6J,EAAIvH,aAA6BuH,EAAIvH,aAAef,KAAKkC,QAAQnB,aAEnE,IAAI6H,EAAaN,EAAIrE,IAAMjE,KAAKkC,QAAQgC,WAAa,GACrD,MAAM2E,EAAuBF,GAAepL,EAAIC,QAAQmL,IAAe,EACjEG,IACH9I,KAAKkC,QAAQ6G,yBACbT,EAAIvH,cACJf,KAAKkC,QAAQ8G,wBACbV,EAAIK,aNqHwB,EAACpL,EAAKoL,EAAa5H,KACpD4H,EAAcA,GAAe,GAC7B5H,EAAeA,GAAgB,GAC/B,MAAMkI,EAAgBtJ,EAAMuJ,OACzBC,GAAMR,EAAYnL,QAAQ2L,GAAK,GAAKpI,EAAavD,QAAQ2L,GAAK,GAEjE,GAA6B,IAAzBF,EAAchL,OAAc,OAAO,EACvC,MAAMmL,EAAIxJ,EAA+BQ,UACvC,IAAI6I,EAAcI,IAAKF,GAAa,MAANA,EAAY,MAAQA,GAAItE,KAAK,SAE7D,IAAIyE,GAAWF,EAAEG,KAAKhM,GACtB,IAAK+L,EAAS,CACZ,MAAME,EAAKjM,EAAIC,QAAQuD,GACnByI,EAAK,IAAMJ,EAAEG,KAAKhM,EAAIkM,UAAU,EAAGD,MACrCF,GAAU,EAEd,CACA,OAAOA,GMrIFI,CAAoBnM,EAAKoL,EAAa5H,IACzC,GAAI8H,IAAyBC,EAAsB,CACjD,MAAM1D,EAAI7H,EAAIoM,MAAM3J,KAAK4J,aAAaC,eACtC,GAAIzE,GAAKA,EAAEnH,OAAS,EAClB,MAAO,CACLV,MACAqL,WAAYlM,EAASkM,GAAc,CAACA,GAAcA,GAGtD,MAAMkB,EAAQvM,EAAIQ,MAAM4K,IAEtBA,IAAgB5H,GACf4H,IAAgB5H,GAAgBf,KAAKkC,QAAQ+B,GAAGzG,QAAQsM,EAAM,KAAM,KAErElB,EAAakB,EAAMnJ,SACrBpD,EAAMuM,EAAMjF,KAAK9D,EACnB,CAEA,MAAO,CACLxD,MACAqL,WAAYlM,EAASkM,GAAc,CAACA,GAAcA,EAEtD,CAEA,SAAAmB,CAAU7D,EAAMkC,EAAG4B,GACjB,IAAI1B,EAAmB,iBAANF,EAAiB,IAAKA,GAAMA,EAS7C,GARmB,iBAARE,GAAoBtI,KAAKkC,QAAQ+H,mCAE1C3B,EAAMtI,KAAKkC,QAAQ+H,iCAAiCC,YAEnC,iBAAR5B,IAAkBA,EAAM,IAAKA,IACnCA,IAAKA,EAAM,IAGJ,MAARpC,EAAmC,MAAO,GAC1B,mBAATA,IAAqBA,EAAOe,EAAiBf,EAAM,IAAKlG,KAAKkC,WAAYoG,KAC/E5E,MAAMiB,QAAQuB,KAAOA,EAAO,CAAC9G,OAAO8G,KAEzC,MAAMiE,OACkB1L,IAAtB6J,EAAI6B,cAA8B7B,EAAI6B,cAAgBnK,KAAKkC,QAAQiI,cAG/DpJ,OACiBtC,IAArB6J,EAAIvH,aAA6BuH,EAAIvH,aAAef,KAAKkC,QAAQnB,cAG7DxD,IAAEA,EAAGqL,WAAEA,GAAe5I,KAAK0I,eAAexC,EAAKA,EAAKjI,OAAS,GAAIqK,GACjE8B,EAAYxB,EAAWA,EAAW3K,OAAS,GAEjD,IAAI0K,OAAkClK,IAApB6J,EAAIK,YAA4BL,EAAIK,YAAc3I,KAAKkC,QAAQyG,iBAC7DlK,IAAhBkK,IAA2BA,EAAc,KAG7C,MAAMjE,EAAM4D,EAAI5D,KAAO1E,KAAKkI,SACtBmC,EACJ/B,EAAI+B,yBAA2BrK,KAAKkC,QAAQmI,wBAC9C,GAA2B,WAAvB3F,GAAK4F,cACP,OAAID,EACEF,EACK,CACLtN,IAAK,GAAGuN,IAAYzB,IAAcpL,IAClCgN,QAAShN,EACTiN,aAAcjN,EACdkN,QAAS/F,EACTgG,OAAQN,EACRO,WAAY3K,KAAK4K,qBAAqBtC,IAGnC,GAAG8B,IAAYzB,IAAcpL,IAGlC4M,EACK,CACLtN,IAAKU,EACLgN,QAAShN,EACTiN,aAAcjN,EACdkN,QAAS/F,EACTgG,OAAQN,EACRO,WAAY3K,KAAK4K,qBAAqBtC,IAGnC/K,EAIT,MAAMgL,EAAWvI,KAAK/C,QAAQiJ,EAAMoC,GACpC,IAAIzL,EAAM0L,GAAU1L,IACpB,MAAMgO,EAAatC,GAAUgC,SAAWhN,EAClCuN,EAAkBvC,GAAUiC,cAAgBjN,EAG5CwN,OAAgCtM,IAAnB6J,EAAIyC,WAA2BzC,EAAIyC,WAAa/K,KAAKkC,QAAQ6I,WAG1EC,GAA8BhL,KAAKiL,YAAcjL,KAAKiL,WAAWC,eACjEC,OAAoC1M,IAAd6J,EAAI8C,QAAwB1O,EAAS4L,EAAI8C,OAC/DC,EAAkBxD,EAAWwD,gBAAgB/C,GAC7CgD,EAAqBH,EACvBnL,KAAKuL,eAAeC,UAAU9G,EAAK4D,EAAI8C,MAAO9C,GAC9C,GACEmD,EACJnD,EAAIoD,SAAWP,EACXnL,KAAKuL,eAAeC,UAAU9G,EAAK4D,EAAI8C,MAAO,CAAEM,SAAS,IACzD,GACAC,EAAwBR,IAAwB7C,EAAIoD,SAAyB,IAAdpD,EAAI8C,MACnEQ,EACHD,GAAyBrD,EAAI,eAAetI,KAAKkC,QAAQ2J,wBAC1DvD,EAAI,eAAegD,MACnBhD,EAAI,eAAemD,MACnBnD,EAAIsD,aAEN,IAAIE,EAAgBjP,EAChBmO,IAA+BnO,GAAOwO,IACxCS,EAAgBF,GAGlB,MAAMV,EAAiBtD,EAAqBkE,GACtCC,EAAU7N,OAAOC,UAAU6N,SAASjI,MAAM+H,GAEhD,KACEd,GACAc,GACAZ,GAhCe,CAAC,kBAAmB,oBAAqB,mBAiC/C1N,QAAQuO,GAAW,IAC1BrP,EAASqO,IAAerH,MAAMiB,QAAQmH,GAgDnC,GAAId,GAA8BtO,EAASqO,IAAerH,MAAMiB,QAAQ9H,GAE7EA,EAAMA,EAAIgI,KAAKkG,GACXlO,IAAKA,EAAMmD,KAAKiM,kBAAkBpP,EAAKqJ,EAAMoC,EAAK0B,QACjD,CAEL,IAAIkC,GAAc,EACd3B,GAAU,GAGTvK,KAAKmM,cAActP,IAAQwO,IAC9Ba,GAAc,EACdrP,EAAM+O,GAEH5L,KAAKmM,cAActP,KACtB0N,GAAU,EACV1N,EAAMU,GAGR,MAAM6O,EACJ9D,EAAI8D,gCAAkCpM,KAAKkC,QAAQkK,+BAC/CC,EAAgBD,GAAkC7B,OAAU9L,EAAY5B,EAGxEyP,EAAgBjB,GAAmBO,IAAiB/O,GAAOmD,KAAKkC,QAAQoK,cAC9E,GAAI/B,GAAW2B,GAAeI,EAAe,CAQ3C,GAPAtM,KAAKqC,OAAOX,IACV4K,EAAgB,YAAc,aAC9B5H,EACA0F,EACA7M,EACA+O,EAAgBV,EAAe/O,GAE7BkE,EAAc,CAChB,MAAMwL,EAAKvM,KAAK/C,QAAQM,EAAK,IAAK+K,EAAKvH,cAAc,IACjDwL,GAAMA,EAAG1P,KACXmD,KAAKqC,OAAOR,KACV,kLAEN,CAEA,IAAI2K,EAAO,GACX,MAAMC,EAAezM,KAAK0M,cAAcC,iBACtC3M,KAAKkC,QAAQ0K,YACbtE,EAAI5D,KAAO1E,KAAKkI,UAElB,GAAmC,aAA/BlI,KAAKkC,QAAQ2K,eAAgCJ,GAAgBA,EAAa,GAC5E,IAAK,IAAIvL,EAAI,EAAGA,EAAIuL,EAAaxO,OAAQiD,IACvCsL,EAAK3L,KAAK4L,EAAavL,QAEe,QAA/BlB,KAAKkC,QAAQ2K,cACtBL,EAAOxM,KAAK0M,cAAcI,mBAAmBxE,EAAI5D,KAAO1E,KAAKkI,UAE7DsE,EAAK3L,KAAKyH,EAAI5D,KAAO1E,KAAKkI,UAG5B,MAAM6E,EAAO,CAACC,EAAG1O,EAAG2O,KAClB,MAAMC,EACJ7B,GAAmB4B,IAAyBpQ,EAAMoQ,EAAuBZ,EACvErM,KAAKkC,QAAQiL,kBACfnN,KAAKkC,QAAQiL,kBAAkBH,EAAG5C,EAAW9L,EAAG4O,EAAmBZ,EAAehE,GACzEtI,KAAKoN,kBAAkBC,aAChCrN,KAAKoN,iBAAiBC,YACpBL,EACA5C,EACA9L,EACA4O,EACAZ,EACAhE,GAGJtI,KAAKwD,KAAK,aAAcwJ,EAAG5C,EAAW9L,EAAGzB,IAGvCmD,KAAKkC,QAAQmL,cACXrN,KAAKkC,QAAQoL,oBAAsBnC,EACrCqB,EAAKpJ,QAAS8E,IACZ,MAAMqF,EAAWvN,KAAKuL,eAAeiC,YAAYtF,EAAUI,GAEzDqD,GACArD,EAAI,eAAetI,KAAKkC,QAAQ2J,wBAChC0B,EAAS/P,QAAQ,GAAGwC,KAAKkC,QAAQ2J,uBAAyB,GAE1D0B,EAAS1M,KAAK,GAAGb,KAAKkC,QAAQ2J,uBAEhC0B,EAASnK,QAASqK,IAChBV,EAAK,CAAC7E,GAAW3K,EAAMkQ,EAAQnF,EAAI,eAAemF,MAAa7B,OAInEmB,EAAKP,EAAMjP,EAAKqO,GAGtB,CAGA/O,EAAMmD,KAAKiM,kBAAkBpP,EAAKqJ,EAAMoC,EAAKC,EAAUyB,GAGnDO,GAAW1N,IAAQU,GAAOyC,KAAKkC,QAAQwL,8BACzC7Q,EAAM,GAAGuN,IAAYzB,IAAcpL,MAIhCgN,GAAW2B,IAAgBlM,KAAKkC,QAAQyL,yBAC3C9Q,EAAMmD,KAAKkC,QAAQyL,uBACjB3N,KAAKkC,QAAQwL,4BAA8B,GAAGtD,IAAYzB,IAAcpL,IAAQA,EAChF2O,EAAcrP,OAAM4B,EACpB6J,GAGN,KA9JE,CACA,IAAKA,EAAIG,gBAAkBzI,KAAKkC,QAAQuG,cAAe,CAChDzI,KAAKkC,QAAQ0L,uBAChB5N,KAAKqC,OAAOR,KAAK,mEAEnB,MAAMuH,EAAIpJ,KAAKkC,QAAQ0L,sBACnB5N,KAAKkC,QAAQ0L,sBAAsB/C,EAAYiB,EAAe,IACzDxD,EACHrE,GAAI2E,IAEN,QAAQrL,MAAQyC,KAAKkI,mDACzB,OAAIiC,GACF5B,EAAS1L,IAAMuM,EACfb,EAASoC,WAAa3K,KAAK4K,qBAAqBtC,GACzCC,GAEFa,CACT,CAIA,GAAIrI,EAAc,CAChB,MAAM8M,EAAiBnK,MAAMiB,QAAQmH,GAC/BgC,EAAOD,EAAiB,GAAK,GAG7BE,EAAcF,EAAiB/C,EAAkBD,EACvD,IAAK,MAAMzF,KAAK0G,EACd,GAAI5N,OAAOC,UAAUC,eAAeC,KAAKyN,EAAe1G,GAAI,CAC1D,MAAM4I,EAAU,GAAGD,IAAchN,IAAeqE,IAE9C0I,EAAK1I,GADHiG,IAAoBxO,EACZmD,KAAK+J,UAAUiE,EAAS,IAC7B1F,EACHsD,aAAchE,EAAqBgE,GAAgBA,EAAaxG,QAAK3G,EAChEsM,YAAY,EAAO9G,GAAI2E,IAGpB5I,KAAK+J,UAAUiE,EAAS,IAC7B1F,EACEyC,YAAY,EAAO9G,GAAI2E,IAG5BkF,EAAK1I,KAAO4I,IAASF,EAAK1I,GAAK0G,EAAc1G,GACnD,CAEFvI,EAAMiR,CACR,CACF,CAkHA,OAAI3D,GACF5B,EAAS1L,IAAMA,EACf0L,EAASoC,WAAa3K,KAAK4K,qBAAqBtC,GACzCC,GAEF1L,CACT,CAEA,iBAAAoP,CAAkBpP,EAAKU,EAAK+K,EAAKC,EAAUyB,GACzC,GAAIhK,KAAKiL,YAAYvF,MACnB7I,EAAMmD,KAAKiL,WAAWvF,MACpB7I,EACA,IAAKmD,KAAKkC,QAAQmG,cAAc4F,oBAAqB3F,GACrDA,EAAI5D,KAAO1E,KAAKkI,UAAYK,EAASkC,QACrClC,EAASmC,OACTnC,EAASgC,QACT,CAAEhC,kBAEC,IAAKD,EAAI4F,kBAAmB,CAE7B5F,EAAID,eACNrI,KAAK4J,aAAazH,KAAK,IAClBmG,EACED,cAAe,IAAKrI,KAAKkC,QAAQmG,iBAAkBC,EAAID,iBAEhE,MAAM8F,EACJzR,EAASG,UACgC4B,IAAxC6J,GAAKD,eAAe8F,gBACjB7F,EAAID,cAAc8F,gBAClBnO,KAAKkC,QAAQmG,cAAc8F,iBACjC,IAAIC,EACJ,GAAID,EAAiB,CACnB,MAAME,EAAKxR,EAAI8M,MAAM3J,KAAK4J,aAAaC,eAEvCuE,EAAUC,GAAMA,EAAGpQ,MACrB,CAGA,IAAIwB,EAAO6I,EAAI7K,UAAYf,EAAS4L,EAAI7K,SAAW6K,EAAI7K,QAAU6K,EAWjE,GAVItI,KAAKkC,QAAQmG,cAAc4F,mBAC7BxO,EAAO,IAAKO,KAAKkC,QAAQmG,cAAc4F,oBAAqBxO,IAC9D5C,EAAMmD,KAAK4J,aAAa0E,YACtBzR,EACA4C,EACA6I,EAAI5D,KAAO1E,KAAKkI,UAAYK,EAASkC,QACrCnC,GAIE6F,EAAiB,CACnB,MAAMI,EAAK1R,EAAI8M,MAAM3J,KAAK4J,aAAaC,eAEjC2E,EAAUD,GAAMA,EAAGtQ,OACrBmQ,EAAUI,IAASlG,EAAImG,MAAO,EACpC,EACKnG,EAAI5D,KAAO6D,GAAYA,EAAS1L,MAAKyL,EAAI5D,IAAM1E,KAAKkI,UAAYK,EAASkC,UAC7D,IAAbnC,EAAImG,OACN5R,EAAMmD,KAAK4J,aAAa6E,KACtB5R,EACA,IAAI8E,IACEqI,IAAU,KAAOrI,EAAK,IAAO2G,EAAIoG,QAM9B1O,KAAK+J,aAAapI,EAAMpE,IAL7ByC,KAAKqC,OAAOR,KACV,6CAA6CF,EAAK,cAAcpE,EAAI,MAE/D,MAIX+K,IAGAA,EAAID,eAAerI,KAAK4J,aAAa+E,OAC3C,CAGA,MAAMC,EAActG,EAAIsG,aAAe5O,KAAKkC,QAAQ0M,YAC9CC,EAAqBnS,EAASkS,GAAe,CAACA,GAAeA,EAiBnE,OAfW,MAAP/R,GAAegS,GAAoB5Q,SAAqC,IAA3BqK,EAAIwG,qBACnDjS,EAAMyJ,EAAcK,OAClBkI,EACAhS,EACAU,EACAyC,KAAKkC,SAAWlC,KAAKkC,QAAQ6M,wBACzB,CACEC,aAAc,IAAKzG,EAAUoC,WAAY3K,KAAK4K,qBAAqBtC,OAChEA,GAELA,EACJtI,OAIGnD,CACT,CAEA,OAAAI,CAAQiJ,EAAMoC,EAAM,IAClB,IAAI2G,EACA1E,EACAC,EACAC,EACAC,EAsGJ,OApGIhO,EAASwJ,KAAOA,EAAO,CAACA,IAG5BA,EAAK9C,QAAS9E,IACZ,GAAI0B,KAAKmM,cAAc8C,GAAQ,OAC/B,MAAMC,EAAYlP,KAAK0I,eAAepK,EAAGgK,GACnC/K,EAAM2R,EAAU3R,IACtBgN,EAAUhN,EACV,IAAIqL,EAAasG,EAAUtG,WACvB5I,KAAKkC,QAAQiN,aAAYvG,EAAaA,EAAW3D,OAAOjF,KAAKkC,QAAQiN,aAEzE,MAAMhE,OAAoC1M,IAAd6J,EAAI8C,QAAwB1O,EAAS4L,EAAI8C,OAC/DO,EAAwBR,IAAwB7C,EAAIoD,SAAyB,IAAdpD,EAAI8C,MACnEgE,OACY3Q,IAAhB6J,EAAIoG,UACHhS,EAAS4L,EAAIoG,UAAmC,iBAAhBpG,EAAIoG,UACrB,KAAhBpG,EAAIoG,QAEAW,EAAQ/G,EAAIkE,KACdlE,EAAIkE,KACJxM,KAAK0M,cAAcI,mBAAmBxE,EAAI5D,KAAO1E,KAAKkI,SAAUI,EAAIsE,aAExEhE,EAAWxF,QAASa,IACdjE,KAAKmM,cAAc8C,KACvBvE,EAASzG,EAGN0D,EAAiB,GAAG0H,EAAM,MAAMpL,OACjCjE,KAAKsP,OAAOC,oBACXvP,KAAKsP,OAAOC,mBAAmB7E,KAEhC/C,EAAiB,GAAG0H,EAAM,MAAMpL,MAAQ,EACxCjE,KAAKqC,OAAOR,KACV,QAAQ0I,qBAA2B8E,EAAMxK,KACvC,2CACqC6F,wBACvC,6NAIJ2E,EAAMjM,QAAS7B,IACb,GAAIvB,KAAKmM,cAAc8C,GAAQ,OAC/BxE,EAAUlJ,EAEV,MAAMiO,EAAY,CAACjS,GAEnB,GAAIyC,KAAKiL,YAAYwE,cACnBzP,KAAKiL,WAAWwE,cAAcD,EAAWjS,EAAKgE,EAAM0C,EAAIqE,OACnD,CACL,IAAIoH,EACAvE,IACFuE,EAAe1P,KAAKuL,eAAeC,UAAUjK,EAAM+G,EAAI8C,MAAO9C,IAChE,MAAMqH,EAAa,GAAG3P,KAAKkC,QAAQ2J,sBAC7B+D,EAAgB,GAAG5P,KAAKkC,QAAQ2J,yBAAyB7L,KAAKkC,QAAQ2J,kBAe5E,GAbIV,IACE7C,EAAIoD,SAAmD,IAAxCgE,EAAalS,QAAQoS,IACtCJ,EAAU3O,KACRtD,EAAMmS,EAAajS,QAAQmS,EAAe5P,KAAKkC,QAAQ2J,kBAG3D2D,EAAU3O,KAAKtD,EAAMmS,GACjB/D,GACF6D,EAAU3O,KAAKtD,EAAMoS,IAKrBP,EAAsB,CACxB,MAAMS,EAAa,GAAGtS,IAAMyC,KAAKkC,QAAQ4N,kBAAoB,MAAMxH,EAAIoG,UACvEc,EAAU3O,KAAKgP,GAGX1E,IACE7C,EAAIoD,SAAmD,IAAxCgE,EAAalS,QAAQoS,IACtCJ,EAAU3O,KACRgP,EAAaH,EAAajS,QAAQmS,EAAe5P,KAAKkC,QAAQ2J,kBAGlE2D,EAAU3O,KAAKgP,EAAaH,GACxB/D,GACF6D,EAAU3O,KAAKgP,EAAaF,GAGlC,CACF,CAGA,IAAII,EAEJ,KAAQA,EAAcP,EAAUQ,OACzBhQ,KAAKmM,cAAc8C,KACtBzE,EAAeuF,EACfd,EAAQjP,KAAKyE,YAAYlD,EAAM0C,EAAI8L,EAAazH,WAOnD,CAAEzL,IAAKoS,EAAO1E,UAASC,eAAcC,UAASC,SACvD,CAEA,aAAAyB,CAActP,GACZ,aACU4B,IAAR5B,IACGmD,KAAKkC,QAAQ+N,YAAsB,OAARpT,IAC3BmD,KAAKkC,QAAQgO,mBAA6B,KAARrT,EAEzC,CAEA,WAAA4H,CAAYlD,EAAM0C,EAAI1G,EAAK2E,EAAU,IACnC,OAAIlC,KAAKiL,YAAYxG,YAAoBzE,KAAKiL,WAAWxG,YAAYlD,EAAM0C,EAAI1G,EAAK2E,GAC7ElC,KAAKmQ,cAAc1L,YAAYlD,EAAM0C,EAAI1G,EAAK2E,EACvD,CAEA,oBAAA0I,CAAqB1I,EAAU,IAE7B,MAAMkO,EAAc,CAClB,eACA,UACA,UACA,UACA,MACA,OACA,cACA,KACA,eACA,cACA,gBACA,gBACA,aACA,cACA,iBAGIC,EAA2BnO,EAAQzE,UAAYf,EAASwF,EAAQzE,SACtE,IAAIgC,EAAO4Q,EAA2BnO,EAAQzE,QAAUyE,EAUxD,GATImO,QAAqD,IAAlBnO,EAAQkJ,QAC7C3L,EAAK2L,MAAQlJ,EAAQkJ,OAGnBpL,KAAKkC,QAAQmG,cAAc4F,mBAC7BxO,EAAO,IAAKO,KAAKkC,QAAQmG,cAAc4F,oBAAqBxO,KAIzD4Q,EAA0B,CAC7B5Q,EAAO,IAAKA,GACZ,IAAK,MAAMlC,KAAO6S,SACT3Q,EAAKlC,EAEhB,CAEA,OAAOkC,CACT,CAEA,sBAAO4L,CAAgBnJ,GACrB,MAAME,EAAS,eAEf,IAAK,MAAMkO,KAAUpO,EACnB,GACEhE,OAAOC,UAAUC,eAAeC,KAAK6D,EAASoO,IAC9ClO,IAAWkO,EAAO7G,UAAU,EAAGrH,UAC/B3D,IAAcyD,EAAQoO,GAEtB,OAAO,EAIX,OAAO,CACT,ECxnBF,MAAMC,EACJ,WAAAzQ,CAAYoC,GACVlC,KAAKkC,QAAUA,EAEflC,KAAKwQ,cAAgBxQ,KAAKkC,QAAQsO,gBAAiB,EACnDxQ,KAAKqC,OAASS,EAAWH,OAAO,gBAClC,CAEA,qBAAA8N,CAAsBlP,GAEpB,GADAA,EAAOD,EAAeC,IACjBA,GAAQA,EAAK/D,QAAQ,KAAO,EAAG,OAAO,KAE3C,MAAMmB,EAAI4C,EAAKxD,MAAM,KACrB,OAAiB,IAAbY,EAAEV,OAAqB,MAC3BU,EAAEqR,MACoC,MAAlCrR,EAAEA,EAAEV,OAAS,GAAGqM,cAA8B,KAC3CtK,KAAK0Q,mBAAmB/R,EAAEkG,KAAK,MACxC,CAEA,uBAAA8L,CAAwBpP,GAEtB,GADAA,EAAOD,EAAeC,IACjBA,GAAQA,EAAK/D,QAAQ,KAAO,EAAG,OAAO+D,EAE3C,MAAM5C,EAAI4C,EAAKxD,MAAM,KACrB,OAAOiC,KAAK0Q,mBAAmB/R,EAAE,GACnC,CAEA,kBAAA+R,CAAmBnP,GAEjB,GAAI7E,EAAS6E,IAASA,EAAK/D,QAAQ,MAAO,EAAI,CAC5C,IAAIoT,EACJ,IACEA,EAAgBC,KAAKC,oBAAoBvP,GAAM,EACjD,CAAE,MAAO7C,GAET,CAIA,OAHIkS,GAAiB5Q,KAAKkC,QAAQ6O,eAChCH,EAAgBA,EAActG,eAE5BsG,IAEA5Q,KAAKkC,QAAQ6O,aACRxP,EAAK+I,cAGP/I,EACT,CAEA,OAAOvB,KAAKkC,QAAQ8O,WAAahR,KAAKkC,QAAQ6O,aAAexP,EAAK+I,cAAgB/I,CACpF,CAEA,eAAA0P,CAAgB1P,GAId,OAH0B,iBAAtBvB,KAAKkC,QAAQgP,MAA2BlR,KAAKkC,QAAQiP,4BACvD5P,EAAOvB,KAAK2Q,wBAAwBpP,KAGnCvB,KAAKwQ,gBAAkBxQ,KAAKwQ,cAAcvS,QAAU+B,KAAKwQ,cAAchT,QAAQ+D,IAAQ,CAE5F,CAEA,qBAAA6P,CAAsB/B,GACpB,IAAKA,EAAO,OAAO,KAEnB,IAAIJ,EAyCJ,OAtCAI,EAAMjM,QAAS7B,IACb,GAAI0N,EAAO,OACX,MAAMoC,EAAarR,KAAK0Q,mBAAmBnP,GACtCvB,KAAKkC,QAAQsO,gBAAiBxQ,KAAKiR,gBAAgBI,KAAapC,EAAQoC,MAM1EpC,GAASjP,KAAKkC,QAAQsO,eACzBnB,EAAMjM,QAAS7B,IACb,GAAI0N,EAAO,OAEX,MAAMqC,EAAYtR,KAAKyQ,sBAAsBlP,GAE7C,GAAIvB,KAAKiR,gBAAgBK,GAAY,OAAQrC,EAAQqC,EAErD,MAAMC,EAAUvR,KAAK2Q,wBAAwBpP,GAE7C,GAAIvB,KAAKiR,gBAAgBM,GAAU,OAAQtC,EAAQsC,EAGnDtC,EAAQjP,KAAKkC,QAAQsO,cAAcrK,KAAMqL,GACnCA,IAAiBD,EAAgBC,EACjCA,EAAahU,QAAQ,KAAO,GAAK+T,EAAQ/T,QAAQ,KAAO,OAA5D,EAEEgU,EAAahU,QAAQ,KAAO,GAC5B+T,EAAQ/T,QAAQ,KAAO,GACvBgU,EAAa/H,UAAU,EAAG+H,EAAahU,QAAQ,QAAU+T,GAGrB,IAAlCC,EAAahU,QAAQ+T,IAAkBA,EAAQtT,OAAS,EADnDuT,OACT,KAKDvC,IAAOA,EAAQjP,KAAK2M,iBAAiB3M,KAAKkC,QAAQ0K,aAAa,IAE7DqC,CACT,CAEA,gBAAAtC,CAAiB8E,EAAWlQ,GAC1B,IAAKkQ,EAAW,MAAO,GAGvB,GAFyB,mBAAdA,IAA0BA,EAAYA,EAAUlQ,IACvD7E,EAAS+U,KAAYA,EAAY,CAACA,IAClC/N,MAAMiB,QAAQ8M,GAAY,OAAOA,EAErC,IAAKlQ,EAAM,OAAOkQ,EAAUC,SAAW,GAGvC,IAAIzC,EAAQwC,EAAUlQ,GAMtB,OALK0N,IAAOA,EAAQwC,EAAUzR,KAAKyQ,sBAAsBlP,KACpD0N,IAAOA,EAAQwC,EAAUzR,KAAK0Q,mBAAmBnP,KACjD0N,IAAOA,EAAQwC,EAAUzR,KAAK2Q,wBAAwBpP,KACtD0N,IAAOA,EAAQwC,EAAUC,SAEvBzC,GAAS,EAClB,CAEA,kBAAAnC,CAAmBvL,EAAMoQ,GACvB,MAAMC,EAAgB5R,KAAK2M,mBACP,IAAjBgF,EAAyB,GAAKA,IAAiB3R,KAAKkC,QAAQ0K,aAAe,GAC5ErL,GAGI8N,EAAQ,GACRwC,EAAW1I,IACVA,IACDnJ,KAAKiR,gBAAgB9H,GACvBkG,EAAMxO,KAAKsI,GAEXnJ,KAAKqC,OAAOR,KAAK,uDAAuDsH,OAiB5E,OAbIzM,EAAS6E,KAAUA,EAAK/D,QAAQ,MAAO,GAAM+D,EAAK/D,QAAQ,MAAO,IACzC,iBAAtBwC,KAAKkC,QAAQgP,MAAyBW,EAAQ7R,KAAK0Q,mBAAmBnP,IAChD,iBAAtBvB,KAAKkC,QAAQgP,MAAiD,gBAAtBlR,KAAKkC,QAAQgP,MACvDW,EAAQ7R,KAAKyQ,sBAAsBlP,IACX,gBAAtBvB,KAAKkC,QAAQgP,MAAwBW,EAAQ7R,KAAK2Q,wBAAwBpP,KACrE7E,EAAS6E,IAClBsQ,EAAQ7R,KAAK0Q,mBAAmBnP,IAGlCqQ,EAAcxO,QAAS0O,IACjBzC,EAAM7R,QAAQsU,GAAM,GAAGD,EAAQ7R,KAAK0Q,mBAAmBoB,MAGtDzC,CACT,EC3JF,MAAM0C,EAAgB,CACpBC,KAAM,EACNC,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,KAAM,EACNC,MAAO,GAGHC,EAAY,CAChBC,OAASnH,GAAoB,IAAVA,EAAc,MAAQ,QACzCoH,gBAAiB,MACfC,iBAAkB,CAAC,MAAO,YAI9B,MAAMC,EACJ,WAAA5S,CAAY4M,EAAexK,EAAU,IACnClC,KAAK0M,cAAgBA,EACrB1M,KAAKkC,QAAUA,EAEflC,KAAKqC,OAASS,EAAWH,OAAO,kBAIhC3C,KAAK2S,iBAAmB,EAC1B,CAEA,OAAAC,CAAQlO,EAAK/H,GACXqD,KAAK6S,MAAMnO,GAAO/H,CACpB,CAEA,UAAAmW,GACE9S,KAAK2S,iBAAmB,EAC1B,CAEA,OAAAI,CAAQxR,EAAMW,EAAU,IACtB,MAAM8Q,EAAc1R,EAAwB,QAATC,EAAiB,KAAOA,GACrDE,EAAOS,EAAQwJ,QAAU,UAAY,WACrCuH,EAAWxN,KAAKE,UAAU,CAAEqN,cAAavR,SAE/C,GAAIwR,KAAYjT,KAAK2S,iBACnB,OAAO3S,KAAK2S,iBAAiBM,GAG/B,IAAIC,EAEJ,IACEA,EAAO,IAAIrC,KAAKsC,YAAYH,EAAa,CAAEvR,QAC7C,CAAE,MAAO2R,GACP,IAAKvC,KAEH,OADA7Q,KAAKqC,OAAOP,MAAM,iDACXwQ,EAET,IAAK/Q,EAAKoI,MAAM,OAAQ,OAAO2I,EAC/B,MAAMe,EAAUrT,KAAK0M,cAAciE,wBAAwBpP,GAC3D2R,EAAOlT,KAAK+S,QAAQM,EAASnR,EAC/B,CAGA,OADAlC,KAAK2S,iBAAiBM,GAAYC,EAC3BA,CACT,CAEA,WAAAI,CAAY/R,EAAMW,EAAU,IAC1B,IAAIgR,EAAOlT,KAAK+S,QAAQxR,EAAMW,GAE9B,OADKgR,IAAMA,EAAOlT,KAAK+S,QAAQ,MAAO7Q,IAC/BgR,GAAMV,kBAAkBC,iBAAiBxU,OAAS,CAC3D,CAEA,mBAAAsV,CAAoBhS,EAAMhE,EAAK2E,EAAU,IACvC,OAAOlC,KAAKwN,YAAYjM,EAAMW,GAASmH,IAAKoE,GAAW,GAAGlQ,IAAMkQ,IAClE,CAEA,WAAAD,CAAYjM,EAAMW,EAAU,IAC1B,IAAIgR,EAAOlT,KAAK+S,QAAQxR,EAAMW,GAE9B,OADKgR,IAAMA,EAAOlT,KAAK+S,QAAQ,MAAO7Q,IACjCgR,EAEEA,EAAKV,kBAAkBC,iBAC3Be,KAAK,CAACC,EAAiBC,IAAoB3B,EAAc0B,GAAmB1B,EAAc2B,IAC1FrK,IAAIsK,GAAkB,GAAG3T,KAAKkC,QAAQ0R,UAAU1R,EAAQwJ,QAAU,UAAU1L,KAAKkC,QAAQ0R,UAAY,KAAKD,KAJ3F,EAKpB,CAEA,SAAAnI,CAAUjK,EAAM6J,EAAOlJ,EAAU,IAC/B,MAAMgR,EAAOlT,KAAK+S,QAAQxR,EAAMW,GAEhC,OAAIgR,EACK,GAAGlT,KAAKkC,QAAQ0R,UAAU1R,EAAQwJ,QAAU,UAAU1L,KAAKkC,QAAQ0R,UAAY,KAAKV,EAAKX,OAAOnH,MAGzGpL,KAAKqC,OAAOR,KAAK,6BAA6BN,KACvCvB,KAAKwL,UAAU,MAAOJ,EAAOlJ,GACtC,ECrFF,MAAM2R,EAAuB,CAC3BpU,EACAqU,EACAvW,EACAwD,EAAe,IACfqD,GAAsB,KAEtB,IAAIxG,EToF6B,EAAC6B,EAAMqU,EAAavW,KACrD,MAAMwH,EAAQjG,EAAQW,EAAMlC,GAC5B,YAAckB,IAAVsG,EACKA,EAGFjG,EAAQgV,EAAavW,IS1FjBwW,CAAoBtU,EAAMqU,EAAavW,GAKlD,OAJKK,GAAQwG,GAAuB1H,EAASa,KAC3CK,EAAOkD,EAASrB,EAAMlC,EAAKwD,QACdtC,IAATb,IAAoBA,EAAOkD,EAASgT,EAAavW,EAAKwD,KAErDnD,GAGHoW,EAAaC,GAAQA,EAAIxW,QAAQ,MAAO,QAE9C,MAAMyW,EACJ,WAAApU,CAAYoC,EAAU,IACpBlC,KAAKqC,OAASS,EAAWH,OAAO,gBAEhC3C,KAAKkC,QAAUA,EACflC,KAAKmU,OAASjS,GAASmG,eAAe8L,QAAM,CAAMpP,GAAUA,GAC5D/E,KAAKmC,KAAKD,EACZ,CAGA,IAAAC,CAAKD,EAAU,IACRA,EAAQmG,gBAAenG,EAAQmG,cAAgB,CAAE+L,aAAa,IAEnE,MACJ5U,OAAMA,EAAM4U,YACNA,EAAWC,oBACXA,EAAmBjS,OACnBA,EAAMkS,cACNA,EAAa7G,OACbA,EAAM8G,cACNA,EAAaC,gBACbA,EAAeC,eACfA,EAAcC,eACdA,EAAcC,cACdA,EAAaC,qBACbA,EAAoBC,cACpBA,EAAaC,qBACbA,EAAoBC,wBACpBA,EAAuBC,YACvBA,EAAWC,aACXA,GACE/S,EAAQmG,cAEZrI,KAAKR,YAAoBf,IAAXe,EAAuBA,EAAS0V,EAC9ClV,KAAKoU,iBAA8B3V,IAAhB2V,GAA4BA,EAC/CpU,KAAKqU,yBAA8C5V,IAAxB4V,GAAoCA,EAE/DrU,KAAKoC,OAASA,EAAS/C,EAAY+C,GAAUkS,GAAiB,KAC9DtU,KAAKyN,OAASA,EAASpO,EAAYoO,GAAU8G,GAAiB,KAE9DvU,KAAKwU,gBAAkBA,GAAmB,IAE1CxU,KAAK0U,eAAiBD,EAAiB,GAAKC,GAAkB,IAC9D1U,KAAKyU,eAAiBzU,KAAK0U,eAAiB,GAAKD,GAAkB,GAEnEzU,KAAK2U,cAAgBA,EACjBtV,EAAYsV,GACZC,GAAwBvV,EAAY,OACxCW,KAAK6U,cAAgBA,EACjBxV,EAAYwV,GACZC,GAAwBzV,EAAY,KAExCW,KAAK+U,wBAA0BA,GAA2B,IAE1D/U,KAAKgV,YAAcA,GAAe,IAElChV,KAAKiV,kBAAgCxW,IAAjBwW,GAA6BA,EAGjDjV,KAAKmV,aACP,CAEA,KAAAxG,GACM3O,KAAKkC,SAASlC,KAAKmC,KAAKnC,KAAKkC,QACnC,CAEA,WAAAiT,GACE,MAAMC,EAAmB,CAACC,EAAgBhV,IACpCgV,GAAgBpW,SAAWoB,GAC7BgV,EAAeC,UAAY,EACpBD,GAEF,IAAI5U,OAAOJ,EAAS,KAG7BL,KAAKuV,OAASH,EAAiBpV,KAAKuV,OAAQ,GAAGvV,KAAKoC,cAAcpC,KAAKyN,UACvEzN,KAAKwV,eAAiBJ,EACpBpV,KAAKwV,eACL,GAAGxV,KAAKoC,SAASpC,KAAK0U,sBAAsB1U,KAAKyU,iBAAiBzU,KAAKyN,UAEzEzN,KAAK6J,cAAgBuL,EACnBpV,KAAK6J,cACL,GAAG7J,KAAK2U,iFAAiF3U,KAAK6U,gBAElG,CAEA,WAAAvG,CAAYhP,EAAKG,EAAMiF,EAAKxC,GAC1B,IAAIyH,EACA5E,EACA0Q,EAEJ,MAAM3B,EACH9T,KAAKkC,SAAWlC,KAAKkC,QAAQmG,eAAiBrI,KAAKkC,QAAQmG,cAAc4F,kBAC1E,GAEIyH,EAAgBnY,IACpB,GAAIA,EAAIC,QAAQwC,KAAKwU,iBAAmB,EAAG,CACzC,MAAM5W,EAAOiW,EACXpU,EACAqU,EACAvW,EACAyC,KAAKkC,QAAQnB,aACbf,KAAKkC,QAAQkC,qBAEf,OAAOpE,KAAKiV,aACRjV,KAAKmU,OAAOvW,OAAMa,EAAWiG,EAAK,IAAKxC,KAAYzC,EAAMkW,iBAAkBpY,IAC3EK,CACN,CAEA,MAAMe,EAAIpB,EAAIQ,MAAMiC,KAAKwU,iBACnBlW,EAAIK,EAAEgC,QAAQiV,OACdC,EAAIlX,EAAEkG,KAAK7E,KAAKwU,iBAAiBoB,OAEvC,OAAO5V,KAAKmU,OACVN,EACEpU,EACAqU,EACAxV,EACA0B,KAAKkC,QAAQnB,aACbf,KAAKkC,QAAQkC,qBAEfyR,EACAnR,EACA,IACKxC,KACAzC,EACHkW,iBAAkBrX,KAKxB0B,KAAKmV,cAEL,MAAMW,EACJ5T,GAAS4T,6BAA+B9V,KAAKkC,QAAQ4T,4BAEjD3H,OACwC1P,IAA5CyD,GAASmG,eAAe8F,gBACpBjM,EAAQmG,cAAc8F,gBACtBnO,KAAKkC,QAAQmG,cAAc8F,gBAE3B4H,EAAQ,CACZ,CAEEC,MAAOhW,KAAKwV,eACZS,UAAYhC,GAAQD,EAAUC,IAEhC,CAEE+B,MAAOhW,KAAKuV,OACZU,UAAYhC,GAASjU,KAAKoU,YAAcJ,EAAUhU,KAAKR,OAAOyU,IAAQD,EAAUC,KAuCpF,OApCA8B,EAAM3S,QAAS8S,IAGb,IAFAT,EAAW,EAEH9L,EAAQuM,EAAKF,MAAMG,KAAK7W,IAAO,CACrC,MAAM8W,EAAazM,EAAM,GAAGiM,OAE5B,GADA7Q,EAAQ2Q,EAAaU,QACP3X,IAAVsG,EACF,GAA2C,mBAAhC+Q,EAA4C,CACrD,MAAMO,EAAOP,EAA4BxW,EAAKqK,EAAOzH,GACrD6C,EAAQrI,EAAS2Z,GAAQA,EAAO,EAClC,MAAO,GAAInU,GAAWhE,OAAOC,UAAUC,eAAeC,KAAK6D,EAASkU,GAClErR,EAAQ,OACH,IAAIoJ,EAAiB,CAC1BpJ,EAAQ4E,EAAM,GACd,QACF,CACE3J,KAAKqC,OAAOR,KAAK,8BAA8BuU,uBAAgC9W,KAC/EyF,EAAQ,EACV,MACUrI,EAASqI,IAAW/E,KAAKqU,sBACnCtP,EAAQ5H,EAAW4H,IAErB,MAAMkR,EAAYC,EAAKD,UAAUlR,GASjC,GARAzF,EAAMA,EAAI7B,QAAQkM,EAAM,GAAIsM,GACxB9H,GACF+H,EAAKF,MAAMV,WAAavQ,EAAM9G,OAC9BiY,EAAKF,MAAMV,WAAa3L,EAAM,GAAG1L,QAEjCiY,EAAKF,MAAMV,UAAY,EAEzBG,IACIA,GAAYzV,KAAKgV,YACnB,KAEJ,IAEK1V,CACT,CAEA,IAAAmP,CAAKnP,EAAKwS,EAAI5P,EAAU,IACtB,IAAIyH,EACA5E,EAEAuR,EAGJ,MAAMC,EAAmB,CAAChZ,EAAKiZ,KAC7B,MAAMC,EAAMzW,KAAK+U,wBACjB,GAAIxX,EAAIC,QAAQiZ,GAAO,EAAG,OAAOlZ,EAEjC,MAAM4L,EAAI5L,EAAIQ,MAAM,IAAI0C,OAAO,GAAGgW,WAElC,IAAIC,EAAgB,IAAIvN,EAAE,KAC1B5L,EAAM4L,EAAE,GACRuN,EAAgB1W,KAAKsO,YAAYoI,EAAeJ,GAChD,MAAMK,EAAsBD,EAAc/M,MAAM,MAC1CiN,EAAsBF,EAAc/M,MAAM,QAE5CgN,GAAqB1Y,QAAU,GAAK,GAAM,IAAM2Y,GAClDA,EAAoB3Y,OAAS,GAAM,KAEnCyY,EAAgBA,EAAcjZ,QAAQ,KAAM,MAG9C,IACE6Y,EAAgB7Q,KAAKC,MAAMgR,GAEvBF,IAAkBF,EAAgB,IAAKE,KAAqBF,GAClE,CAAE,MAAO5X,GAEP,OADAsB,KAAKqC,OAAOR,KAAK,oDAAoDtE,IAAOmB,GACrE,GAAGnB,IAAMkZ,IAAMC,GACxB,CAKA,OAFIJ,EAAc1K,cAAgB0K,EAAc1K,aAAapO,QAAQwC,KAAKoC,SAAU,UAC3EkU,EAAc1K,aAChBrO,GAIT,KAAQoM,EAAQ3J,KAAK6J,cAAcsM,KAAK7W,IAAO,CAC7C,IAAIuX,EAAa,GAEjBP,EAAgB,IAAKpU,GACrBoU,EACEA,EAAc7Y,UAAYf,EAAS4Z,EAAc7Y,SAC7C6Y,EAAc7Y,QACd6Y,EACNA,EAAcxH,oBAAqB,SAC5BwH,EAAc1K,aAarB,MAAMkL,EAAc,OAAOvN,KAAKI,EAAM,IAClCA,EAAM,GAAGoN,YAAY,KAAO,EAC5BpN,EAAM,GAAGnM,QAAQwC,KAAKwU,iBAa1B,IAZoB,IAAhBsC,IACFD,EAAalN,EAAM,GAChB/K,MAAMkY,GACN/Y,MAAMiC,KAAKwU,iBACXnL,IAAK2N,GAASA,EAAKpB,QACnB1M,OAAO+N,SACVtN,EAAM,GAAKA,EAAM,GAAG/K,MAAM,EAAGkY,IAG/B/R,EAAQ+M,EAAGyE,EAAiBlY,KAAK2B,KAAM2J,EAAM,GAAGiM,OAAQU,GAAgBA,GAGpEvR,GAAS4E,EAAM,KAAOrK,IAAQ5C,EAASqI,GAAQ,OAAOA,EAGrDrI,EAASqI,KAAQA,EAAQ5H,EAAW4H,IACpCA,IACH/E,KAAKqC,OAAOR,KAAK,qBAAqB8H,EAAM,kBAAkBrK,KAC9DyF,EAAQ,IAGN8R,EAAW5Y,SACb8G,EAAQ8R,EAAWK,OAEjB,CAAC9Q,EAAGyP,IACF7V,KAAKmU,OAAO/N,EAAGyP,EAAG3T,EAAQwC,IAAK,IAAKxC,EAASyT,iBAAkBhM,EAAM,GAAGiM,SAC1E7Q,EAAM6Q,SAMVtW,EAAMA,EAAI7B,QAAQkM,EAAM,GAAI5E,GAC5B/E,KAAKuV,OAAOD,UAAY,CAC1B,CACA,OAAOhW,CACT,EC9TF,MA2CM6X,EAAyBC,IAC7B,MAAMC,EAAQ,GACd,MAAO,CAACjR,EAAG4G,EAAG5E,KACZ,IAAIkP,EAAclP,EAGhBA,GACAA,EAAEuN,kBACFvN,EAAEmP,cACFnP,EAAEmP,aAAanP,EAAEuN,mBACjBvN,EAAEA,EAAEuN,oBAEJ2B,EAAc,IACTA,EACH,CAAClP,EAAEuN,uBAAmBlX,IAG1B,MAAMlB,EAAMyP,EAAIvH,KAAKE,UAAU2R,GAC/B,IAAIE,EAAMH,EAAM9Z,GAKhB,OAJKia,IACHA,EAAMJ,EAAG9V,EAAe0L,GAAI5E,GAC5BiP,EAAM9Z,GAAOia,GAERA,EAAIpR,KAITqR,EAA4BL,GAAO,CAAChR,EAAG4G,EAAG5E,IAAMgP,EAAG9V,EAAe0L,GAAI5E,EAAtBgP,CAAyBhR,GAE/E,MAAMsR,EACJ,WAAA5X,CAAYoC,EAAU,IACpBlC,KAAKqC,OAASS,EAAWH,OAAO,aAChC3C,KAAKkC,QAAUA,EACflC,KAAKmC,KAAKD,EACZ,CAGA,IAAAC,CAAK2F,EAAU5F,EAAU,CAAEmG,cAAe,KACxCrI,KAAKwU,gBAAkBtS,EAAQmG,cAAcmM,iBAAmB,IAChE,MAAMmD,EAAKzV,EAAQ0V,oBAAsBT,EAAwBM,EACjEzX,KAAK6X,QAAU,CACbC,OAAQH,EAAG,CAACjT,EAAK4D,KACf,MAAMyP,EAAY,IAAIlH,KAAKmH,aAAatT,EAAK,IAAK4D,IAClD,OAAQ2L,GAAQ8D,EAAU5D,OAAOF,KAEnCgE,SAAUN,EAAG,CAACjT,EAAK4D,KACjB,MAAMyP,EAAY,IAAIlH,KAAKmH,aAAatT,EAAK,IAAK4D,EAAK4P,MAAO,aAC9D,OAAQjE,GAAQ8D,EAAU5D,OAAOF,KAEnCkE,SAAUR,EAAG,CAACjT,EAAK4D,KACjB,MAAMyP,EAAY,IAAIlH,KAAKuH,eAAe1T,EAAK,IAAK4D,IACpD,OAAQ2L,GAAQ8D,EAAU5D,OAAOF,KAEnCoE,aAAcV,EAAG,CAACjT,EAAK4D,KACrB,MAAMyP,EAAY,IAAIlH,KAAKyH,mBAAmB5T,EAAK,IAAK4D,IACxD,OAAQ2L,GAAQ8D,EAAU5D,OAAOF,EAAK3L,EAAIiQ,OAAS,SAErDC,KAAMb,EAAG,CAACjT,EAAK4D,KACb,MAAMyP,EAAY,IAAIlH,KAAK4H,WAAW/T,EAAK,IAAK4D,IAChD,OAAQ2L,GAAQ8D,EAAU5D,OAAOF,KAGvC,CAEA,GAAAyE,CAAIhS,EAAMoL,GACR9R,KAAK6X,QAAQnR,EAAK4D,cAAcsL,QAAU9D,CAC5C,CAEA,SAAA6G,CAAUjS,EAAMoL,GACd9R,KAAK6X,QAAQnR,EAAK4D,cAAcsL,QAAUuB,EAAsBrF,EAClE,CAEA,MAAAqC,CAAOpP,EAAOoP,EAAQzP,EAAKxC,EAAU,IACnC,MAAM2V,EAAU1D,EAAOpW,MAAMiC,KAAKwU,iBAClC,GACEqD,EAAQ5Z,OAAS,GACjB4Z,EAAQ,GAAGra,QAAQ,KAAO,GAC1Bqa,EAAQ,GAAGra,QAAQ,KAAO,GAC1Bqa,EAAQ1R,KAAM0P,GAAMA,EAAErY,QAAQ,MAAO,GACrC,CACA,MAAM8X,EAAYuC,EAAQe,UAAW/C,GAAMA,EAAErY,QAAQ,MAAO,GAC5Dqa,EAAQ,GAAK,CAACA,EAAQ,MAAOA,EAAQrT,OAAO,EAAG8Q,IAAYzQ,KAAK7E,KAAKwU,gBACvE,CAEA,MAAM5P,EAASiT,EAAQX,OAAO,CAAC2B,EAAKhD,KAClC,MAAMiD,WAAEA,EAAUC,cAAEA,GAhIH,CAACC,IACtB,IAAIF,EAAaE,EAAU1O,cAAcsL,OACzC,MAAMmD,EAAgB,GACtB,GAAIC,EAAUxb,QAAQ,MAAO,EAAI,CAC/B,MAAMmB,EAAIqa,EAAUjb,MAAM,KAC1B+a,EAAana,EAAE,GAAG2L,cAAcsL,OAEhC,MAAMqD,EAASta,EAAE,GAAG8K,UAAU,EAAG9K,EAAE,GAAGV,OAAS,GAG/C,GAAmB,aAAf6a,GAA6BG,EAAOzb,QAAQ,KAAO,EAChDub,EAAcd,WAAUc,EAAcd,SAAWgB,EAAOrD,aACxD,GAAmB,iBAAfkD,GAAiCG,EAAOzb,QAAQ,KAAO,EAC3Dub,EAAcR,QAAOQ,EAAcR,MAAQU,EAAOrD,YAClD,CACL,MAAMzO,EAAO8R,EAAOlb,MAAM,KAE1BoJ,EAAK/D,QAASkF,IACZ,GAAIA,EAAK,CACP,MAAO/K,KAAQ2b,GAAQ5Q,EAAIvK,MAAM,KAC3BkW,EAAMiF,EACTrU,KAAK,KACL+Q,OACAnY,QAAQ,WAAY,IAEjB0b,EAAa5b,EAAIqY,OAElBmD,EAAcI,KAAaJ,EAAcI,GAAclF,GAChD,UAARA,IAAiB8E,EAAcI,IAAc,GACrC,SAARlF,IAAgB8E,EAAcI,IAAc,GAE3CC,MAAMnF,KAAM8E,EAAcI,GAAcE,SAASpF,EAAK,IAC7D,GAEJ,CACF,CAEA,MAAO,CACL6E,aACAC,kBAyFwCO,CAAezD,GAErD,GAAI7V,KAAK6X,QAAQiB,GAAa,CAC5B,IAAIS,EAAYV,EAChB,IAEE,MAAMW,EAAatX,GAASqV,eAAerV,EAAQyT,mBAAqB,GAGlE3I,EAAIwM,EAAWC,QAAUD,EAAW9U,KAAOxC,EAAQuX,QAAUvX,EAAQwC,KAAOA,EAElF6U,EAAYvZ,KAAK6X,QAAQiB,GAAYD,EAAK7L,EAAG,IACxC+L,KACA7W,KACAsX,GAEP,CAAE,MAAO1X,GACP9B,KAAKqC,OAAOR,KAAKC,EACnB,CACA,OAAOyX,CAET,CAGA,OAFEvZ,KAAKqC,OAAOR,KAAK,oCAAoCiX,KAEhDD,GACN9T,GAEH,OAAOH,CACT,ECpJF,MAAM8U,UAAkB3W,EACtB,WAAAjD,CAAY6Z,EAASC,EAAO9R,EAAU5F,EAAU,IAC9CiC,QAEAnE,KAAK2Z,QAAUA,EACf3Z,KAAK4Z,MAAQA,EACb5Z,KAAK8H,SAAWA,EAChB9H,KAAK0M,cAAgB5E,EAAS4E,cAC9B1M,KAAKkC,QAAUA,EACflC,KAAKqC,OAASS,EAAWH,OAAO,oBAEhC3C,KAAK6Z,aAAe,GACpB7Z,KAAK8Z,iBAAmB5X,EAAQ4X,kBAAoB,GACpD9Z,KAAK+Z,aAAe,EAEpB/Z,KAAKga,WAAa9X,EAAQ8X,YAAc,EAAI9X,EAAQ8X,WAAa,EACjEha,KAAKia,aAAe/X,EAAQ+X,cAAgB,EAAI/X,EAAQ+X,aAAe,IAEvEja,KAAKqH,MAAQ,GACbrH,KAAKka,MAAQ,GAEbla,KAAK2Z,SAASxX,OAAO2F,EAAU5F,EAAQyX,QAASzX,EAClD,CAEA,SAAAiY,CAAUC,EAAWxR,EAAY1G,EAASmY,GAExC,MAAMC,EAAS,GACTC,EAAU,GACVC,EAAkB,GAClBC,EAAmB,GAsCzB,OApCAL,EAAUhX,QAASsB,IACjB,IAAIgW,GAAmB,EAEvB9R,EAAWxF,QAASa,IAClB,MAAMyC,EAAO,GAAGhC,KAAOT,KAElB/B,EAAQyY,QAAU3a,KAAK4Z,MAAM/T,kBAAkBnB,EAAKT,GACvDjE,KAAKqH,MAAMX,GAAQ,EACV1G,KAAKqH,MAAMX,GAAQ,IAEE,IAArB1G,KAAKqH,MAAMX,QACEjI,IAAlB8b,EAAQ7T,KAAqB6T,EAAQ7T,IAAQ,IAEjD1G,KAAKqH,MAAMX,GAAQ,EAEnBgU,GAAmB,OAEGjc,IAAlB8b,EAAQ7T,KAAqB6T,EAAQ7T,IAAQ,QAC5BjI,IAAjB6b,EAAO5T,KAAqB4T,EAAO5T,IAAQ,QAClBjI,IAAzBgc,EAAiBxW,KAAmBwW,EAAiBxW,IAAM,OAI9DyW,IAAkBF,EAAgB9V,IAAO,MAG5CxG,OAAOgI,KAAKoU,GAAQrc,QAAUC,OAAOgI,KAAKqU,GAAStc,SACrD+B,KAAKka,MAAMrZ,KAAK,CACd0Z,UACAK,aAAc1c,OAAOgI,KAAKqU,GAAStc,OACnC4c,OAAQ,GACRC,OAAQ,GACRT,aAIG,CACLC,OAAQpc,OAAOgI,KAAKoU,GACpBC,QAASrc,OAAOgI,KAAKqU,GACrBC,gBAAiBtc,OAAOgI,KAAKsU,GAC7BC,iBAAkBvc,OAAOgI,KAAKuU,GAElC,CAEA,MAAAI,CAAOnU,EAAM0M,EAAK3T,GAChB,MAAMC,EAAIgH,EAAK3I,MAAM,KACf2G,EAAMhF,EAAE,GACRuE,EAAKvE,EAAE,GAET0T,GAAKpT,KAAKwD,KAAK,gBAAiBkB,EAAKT,EAAImP,IAExCA,GAAO3T,GACVO,KAAK4Z,MAAMvU,kBAAkBX,EAAKT,EAAIxE,OAAMhB,OAAWA,EAAW,CAAE8G,UAAU,IAIhFvF,KAAKqH,MAAMX,GAAQ0M,GAAM,EAAK,EAC1BA,GAAO3T,IAAMO,KAAKqH,MAAMX,GAAQ,GAGpC,MAAMmU,EAAS,GAGf7a,KAAKka,MAAM9W,QAAS2X,IXpBA,EAAC3d,EAAQQ,EAAMY,KACrC,MAAM7B,IAAEA,EAAG2B,EAAEA,GAAMX,EAAcP,EAAQQ,EAAMM,QAE/CvB,EAAI2B,GAAK3B,EAAI2B,IAAM,GAEN3B,EAAI2B,GAAGuC,KAAKrC,IWgBrBwc,CAASD,EAAEF,OAAQ,CAACnW,GAAMT,GAtGV,EAAC8W,EAAGrU,UACAjI,IAApBsc,EAAER,QAAQ7T,YACLqU,EAAER,QAAQ7T,GACjBqU,EAAEH,iBAoGAK,CAAcF,EAAGrU,GAEb0M,GAAK2H,EAAED,OAAOja,KAAKuS,GAEA,IAAnB2H,EAAEH,cAAuBG,EAAEG,OAE7Bhd,OAAOgI,KAAK6U,EAAEF,QAAQzX,QAAS4J,IACxB6N,EAAO7N,KAAI6N,EAAO7N,GAAK,IAC5B,MAAMmO,EAAaJ,EAAEF,OAAO7N,GACxBmO,EAAWld,QACbkd,EAAW/X,QAAS6C,SACGxH,IAAjBoc,EAAO7N,GAAG/G,KAAkB4U,EAAO7N,GAAG/G,IAAK,OAMrD8U,EAAEG,MAAO,EACLH,EAAED,OAAO7c,OACX8c,EAAEV,SAASU,EAAED,QAEbC,EAAEV,cAMRra,KAAKwD,KAAK,SAAUqX,GAGpB7a,KAAKka,MAAQla,KAAKka,MAAMhR,OAAQ6R,IAAOA,EAAEG,KAC3C,CAEA,IAAAE,CAAK1W,EAAKT,EAAIoX,EAAQC,EAAQ,EAAGC,EAAOvb,KAAKia,aAAcI,GACzD,IAAK3V,EAAIzG,OAAQ,OAAOoc,EAAS,KAAM,IAMvC,GAAIra,KAAK+Z,cAAgB/Z,KAAK8Z,iBAE5B,OADA9Z,KAAK6Z,aAAahZ,KAAK,CAAE6D,MAAKT,KAAIoX,SAAQC,QAAOC,OAAMlB,kBACvD,EAEFra,KAAK+Z,eAEL,MAAMyB,EAAW,CAACpI,EAAK3T,KAErB,GADAO,KAAK+Z,eACD/Z,KAAK6Z,aAAa5b,OAAS,EAAG,CAChC,MAAMkD,EAAOnB,KAAK6Z,aAAalZ,QAC/BX,KAAKob,KAAKja,EAAKuD,IAAKvD,EAAK8C,GAAI9C,EAAKka,OAAQla,EAAKma,MAAOna,EAAKoa,KAAMpa,EAAKkZ,SACxE,CACA,GAAIjH,GAAO3T,GAA0B6b,EAAQtb,KAAKga,WAIhD,OAHAyB,WAAW,KACTzb,KAAKob,KAAK/c,KAAK2B,KAAM0E,EAAKT,EAAIoX,EAAQC,EAAQ,EAAU,EAAPC,EAAUlB,IAC1DkB,QACH,EAEFlB,EAASjH,EAAK3T,IAGVqS,EAAK9R,KAAK2Z,QAAQ0B,GAAQK,KAAK1b,KAAK2Z,SAC1C,GAAkB,IAAd7H,EAAG7T,OAkBP,OAAO6T,EAAGpN,EAAKT,EAAIuX,GAhBjB,IACE,MAAMpS,EAAI0I,EAAGpN,EAAKT,GACdmF,GAAuB,mBAAXA,EAAEuS,KAEhBvS,EAAEuS,KAAMlc,GAAS+b,EAAS,KAAM/b,IAAOmc,MAAMJ,GAG7CA,EAAS,KAAMpS,EAEnB,CAAE,MAAOgK,GACPoI,EAASpI,EACX,CAMJ,CAGA,cAAAyI,CAAezB,EAAWxR,EAAY1G,EAAU,GAAImY,GAClD,IAAKra,KAAK2Z,QAER,OADA3Z,KAAKqC,OAAOR,KAAK,kEACVwY,GAAYA,IAGjB3d,EAAS0d,KAAYA,EAAYpa,KAAK0M,cAAcI,mBAAmBsN,IACvE1d,EAASkM,KAAaA,EAAa,CAACA,IAExC,MAAM0R,EAASta,KAAKma,UAAUC,EAAWxR,EAAY1G,EAASmY,GAC9D,IAAKC,EAAOA,OAAOrc,OAEjB,OADKqc,EAAOC,QAAQtc,QAAQoc,IACrB,KAGTC,EAAOA,OAAOlX,QAASsD,IACrB1G,KAAK8b,QAAQpV,IAEjB,CAEA,IAAAwK,CAAKkJ,EAAWxR,EAAYyR,GAC1Bra,KAAK6b,eAAezB,EAAWxR,EAAY,GAAIyR,EACjD,CAEA,MAAAM,CAAOP,EAAWxR,EAAYyR,GAC5Bra,KAAK6b,eAAezB,EAAWxR,EAAY,CAAE+R,QAAQ,GAAQN,EAC/D,CAEA,OAAAyB,CAAQpV,EAAMtE,EAAS,IACrB,MAAM1C,EAAIgH,EAAK3I,MAAM,KACf2G,EAAMhF,EAAE,GACRuE,EAAKvE,EAAE,GAEbM,KAAKob,KAAK1W,EAAKT,EAAI,YAAQxF,OAAWA,EAAW,CAAC2U,EAAK3T,KACjD2T,GAAKpT,KAAKqC,OAAOR,KAAK,GAAGO,sBAA2B6B,kBAAmBS,WAAc0O,IACpFA,GAAO3T,GACVO,KAAKqC,OAAOX,IAAI,GAAGU,qBAA0B6B,kBAAmBS,IAAOjF,GAEzEO,KAAK6a,OAAOnU,EAAM0M,EAAK3T,IAE3B,CAEA,WAAA4N,CAAY+M,EAAWhQ,EAAW7M,EAAKwe,EAAeC,EAAU9Z,EAAU,GAAI+Z,EAAM,QAClF,GACEjc,KAAK8H,UAAUwH,OAAOC,qBACrBvP,KAAK8H,UAAUwH,OAAOC,mBAAmBnF,GAM1C,OAJApK,KAAKqC,OAAOR,KACV,qBAAqBtE,wBAA0B6M,wBAC/C,iOAEF,EAIF,GAAI7M,SAA6C,KAARA,EAAzC,CAEA,GAAIyC,KAAK2Z,SAAShX,OAAQ,CACxB,MAAMwE,EAAO,IACRjF,EACH8Z,YAEIlK,EAAK9R,KAAK2Z,QAAQhX,OAAO+Y,KAAK1b,KAAK2Z,SACzC,GAAI7H,EAAG7T,OAAS,EAEd,IACE,IAAImL,EAGFA,EAFgB,IAAd0I,EAAG7T,OAED6T,EAAGsI,EAAWhQ,EAAW7M,EAAKwe,EAAe5U,GAE7C2K,EAAGsI,EAAWhQ,EAAW7M,EAAKwe,GAEhC3S,GAAuB,mBAAXA,EAAEuS,KAEhBvS,EAAEuS,KAAMlc,GAASwc,EAAI,KAAMxc,IAAOmc,MAAMK,GAGxCA,EAAI,KAAM7S,EAEd,CAAE,MAAOgK,GACP6I,EAAI7I,EACN,MAGAtB,EAAGsI,EAAWhQ,EAAW7M,EAAKwe,EAAeE,EAA2B9U,EAE5E,CAGKiT,GAAcA,EAAU,IAC7Bpa,KAAK4Z,MAAM9U,YAAYsV,EAAU,GAAIhQ,EAAW7M,EAAKwe,EApCA,CAqCvD,ECzRK,MAAMxb,EAAM,MACjB+B,OAAO,EACP4Z,WAAW,EAEXjY,GAAI,CAAC,eACLC,UAAW,CAAC,eACZ0I,YAAa,CAAC,OACduC,YAAY,EAEZqB,eAAe,EACfW,0BAA0B,EAC1BD,KAAM,MACNiL,SAAS,EAETC,sBAAsB,EACtBrb,aAAc,IACd4H,YAAa,IACbkD,gBAAiB,IACjBiE,iBAAkB,IAElBuM,yBAAyB,EACzBhP,aAAa,EACbf,eAAe,EACfO,cAAe,WACfS,oBAAoB,EACpBH,mBAAmB,EACnB2I,6BAA6B,EAE7BlH,aAAa,EACbG,yBAAyB,EACzBkB,YAAY,EACZC,mBAAmB,EACnBzH,eAAe,EACfsC,YAAY,EACZ6C,uBAAuB,EACvBD,wBAAwB,EACxBD,6BAA6B,EAC7BrD,yBAAyB,EACzBJ,iCAAmCtI,IACjC,IAAI2a,EAAM,GAIV,GAHuB,iBAAZ3a,EAAK,KAAiB2a,EAAM3a,EAAK,IACxCjF,EAASiF,EAAK,MAAK2a,EAAI1Q,aAAejK,EAAK,IAC3CjF,EAASiF,EAAK,MAAK2a,EAAIC,aAAe5a,EAAK,IACxB,iBAAZA,EAAK,IAAsC,iBAAZA,EAAK,GAAiB,CAC9D,MAAMO,EAAUP,EAAK,IAAMA,EAAK,GAChCzD,OAAOgI,KAAKhE,GAASkB,QAAS7F,IAC5B+e,EAAI/e,GAAO2E,EAAQ3E,IAEvB,CACA,OAAO+e,GAETjU,cAAe,CACb+L,aAAa,EAEbD,OAASpP,GAAUA,EACnB3C,OAAQ,KACRqL,OAAQ,KACR+G,gBAAiB,IAIjBE,eAAgB,IAEhBC,cAAe,MACfE,cAAe,IACfE,wBAAyB,IAIzBC,YAAa,IACb7G,iBAAiB,GAEnByJ,qBAAqB,IAIV4E,EAAoBta,IAE3BxF,EAASwF,EAAQ+B,MAAK/B,EAAQ+B,GAAK,CAAC/B,EAAQ+B,KAC5CvH,EAASwF,EAAQ0K,eAAc1K,EAAQ0K,YAAc,CAAC1K,EAAQ0K,cAC9DlQ,EAASwF,EAAQiN,cAAajN,EAAQiN,WAAa,CAACjN,EAAQiN,aAG5DjN,EAAQsO,eAAehT,UAAU,UAAY,IAC/C0E,EAAQsO,cAAgBtO,EAAQsO,cAAcvL,OAAO,CAAC,YAInB,kBAA1B/C,EAAQua,gBAA6Bva,EAAQga,UAAYha,EAAQua,eAErEva,GC9EHwa,EAAO,OAab,MAAMC,UAAa5Z,EACjB,WAAAjD,CAAYoC,EAAU,GAAImY,GAUxB,GATAlW,QAEAnE,KAAKkC,QAAUsa,EAAiBta,GAChClC,KAAK8H,SAAW,GAChB9H,KAAKqC,OAASS,EACd9C,KAAK4c,QAAU,CAAEC,SAAU,IAhBH,CAACC,IAC3B,MAAMC,EAAO7e,OAAO8e,oBAAoB9e,OAAO+e,eAAeH,IAC9DC,EAAK3Z,QAASyV,IACa,mBAAdiE,EAAKjE,KACdiE,EAAKjE,GAAOiE,EAAKjE,GAAK6C,KAAKoB,OAc7BI,CAAoBld,MAEhBqa,IAAara,KAAKmd,gBAAkBjb,EAAQkb,QAAS,CAEvD,IAAKpd,KAAKkC,QAAQga,UAEhB,OADAlc,KAAKmC,KAAKD,EAASmY,GACZra,KAETyb,WAAW,KACTzb,KAAKmC,KAAKD,EAASmY,IAClB,EACL,CACF,CAEA,IAAAlY,CAAKD,EAAU,GAAImY,GACjBra,KAAKqd,gBAAiB,EACC,mBAAZnb,IACTmY,EAAWnY,EACXA,EAAU,IAGa,MAArBA,EAAQgC,WAAqBhC,EAAQ+B,KACnCvH,EAASwF,EAAQ+B,IACnB/B,EAAQgC,UAAYhC,EAAQ+B,GACnB/B,EAAQ+B,GAAGzG,QAAQ,eAAiB,IAC7C0E,EAAQgC,UAAYhC,EAAQ+B,GAAG,KAInC,MAAMqZ,EAAUC,IAChBvd,KAAKkC,QAAU,IAAKob,KAAYtd,KAAKkC,WAAYsa,EAAiBta,IAClElC,KAAKkC,QAAQmG,cAAgB,IAAKiV,EAAQjV,iBAAkBrI,KAAKkC,QAAQmG,oBAC5C5J,IAAzByD,EAAQnB,eACVf,KAAKkC,QAAQ6G,wBAA0B7G,EAAQnB,mBAErBtC,IAAxByD,EAAQyG,cACV3I,KAAKkC,QAAQ8G,uBAAyB9G,EAAQyG,aAGhD,MAAM6U,EAAuBC,GACtBA,EACwB,mBAAlBA,EAAqC,IAAIA,EAC7CA,EAFoB,KAM7B,IAAKzd,KAAKkC,QAAQkb,QAAS,CAOzB,IAAIrF,EANA/X,KAAK4c,QAAQva,OACfS,EAAWX,KAAKqb,EAAoBxd,KAAK4c,QAAQva,QAASrC,KAAKkC,SAE/DY,EAAWX,KAAK,KAAMnC,KAAKkC,SAK3B6V,EADE/X,KAAK4c,QAAQ7E,UACH/X,KAAK4c,QAAQ7E,UAEbL,EAGd,MAAMgG,EAAK,IAAIC,EAAc3d,KAAKkC,SAalClC,KAAK4Z,MAAQ,IAAI5V,EAAchE,KAAKkC,QAAQiD,UAAWnF,KAAKkC,SAE5D,MAAMxC,EAAIM,KAAK8H,SACfpI,EAAE2C,OAASS,EACXpD,EAAEyQ,cAAgBnQ,KAAK4Z,MACvBla,EAAEgN,cAAgBgR,EAClBhe,EAAE6L,eAAiB,IAAImH,EAAegL,EAAI,CACxC9J,QAAS5T,KAAKkC,QAAQ2J,gBACtBuQ,qBAAsBpc,KAAKkC,QAAQka,uBAGrC,MAAMwB,EAA4B5d,KAAKkC,QAAQmG,cAAc8L,QAAUnU,KAAKkC,QAAQmG,cAAc8L,SAAWmJ,EAAQjV,cAAc8L,OAC/HyJ,GACF5d,KAAKqC,OAAOG,UAAU,+IAGpBuV,GAAe/X,KAAKkC,QAAQmG,cAAc8L,QAAUnU,KAAKkC,QAAQmG,cAAc8L,SAAWmJ,EAAQjV,cAAc8L,SAClHzU,EAAEqY,UAAYyF,EAAoBzF,GAC9BrY,EAAEqY,UAAU5V,MAAMzC,EAAEqY,UAAU5V,KAAKzC,EAAGM,KAAKkC,SAC/ClC,KAAKkC,QAAQmG,cAAc8L,OAASzU,EAAEqY,UAAU5D,OAAOuH,KAAKhc,EAAEqY,YAGhErY,EAAEkK,aAAe,IAAIsK,EAAalU,KAAKkC,SACvCxC,EAAE4P,MAAQ,CACRC,mBAAoBvP,KAAKuP,mBAAmBmM,KAAK1b,OAGnDN,EAAE0N,iBAAmB,IAAIyQ,EACvBL,EAAoBxd,KAAK4c,QAAQjD,SACjCja,EAAEyQ,cACFzQ,EACAM,KAAKkC,SAGPxC,EAAE0N,iBAAiBnK,GAAG,IAAK,CAACI,KAAU1B,KACpC3B,KAAKwD,KAAKH,KAAU1B,KAGlB3B,KAAK4c,QAAQkB,mBACfpe,EAAEoe,iBAAmBN,EAAoBxd,KAAK4c,QAAQkB,kBAClDpe,EAAEoe,iBAAiB3b,MAAMzC,EAAEoe,iBAAiB3b,KAAKzC,EAAGM,KAAKkC,QAAQ6b,UAAW/d,KAAKkC,UAGnFlC,KAAK4c,QAAQ3R,aACfvL,EAAEuL,WAAauS,EAAoBxd,KAAK4c,QAAQ3R,YAC5CvL,EAAEuL,WAAW9I,MAAMzC,EAAEuL,WAAW9I,KAAKnC,OAG3CA,KAAK4G,WAAa,IAAIiB,EAAW7H,KAAK8H,SAAU9H,KAAKkC,SAErDlC,KAAK4G,WAAW3D,GAAG,IAAK,CAACI,KAAU1B,KACjC3B,KAAKwD,KAAKH,KAAU1B,KAGtB3B,KAAK4c,QAAQC,SAASzZ,QAAQgC,IACxBA,EAAEjD,MAAMiD,EAAEjD,KAAKnC,OAEvB,CAKA,GAHAA,KAAKmU,OAASnU,KAAKkC,QAAQmG,cAAc8L,OACpCkG,IAAUA,EAAWqC,GAEtB1c,KAAKkC,QAAQ0K,cAAgB5M,KAAK8H,SAASgW,mBAAqB9d,KAAKkC,QAAQwC,IAAK,CACpF,MAAM2K,EAAQrP,KAAK8H,SAAS4E,cAAcC,iBAAiB3M,KAAKkC,QAAQ0K,aACpEyC,EAAMpR,OAAS,GAAkB,QAAboR,EAAM,KAAcrP,KAAKkC,QAAQwC,IAAM2K,EAAM,GACvE,CACKrP,KAAK8H,SAASgW,kBAAqB9d,KAAKkC,QAAQwC,KACnD1E,KAAKqC,OAAOR,KAAK,2DAIF,CACf,cACA,oBACA,oBACA,qBAEOuB,QAAQiY,IACfrb,KAAKqb,GAAU,IAAI1Z,IAAS3B,KAAK4Z,MAAMyB,MAAW1Z,KAE5B,CACtB,cACA,eACA,oBACA,wBAEcyB,QAAQiY,IACtBrb,KAAKqb,GAAU,IAAI1Z,KACjB3B,KAAK4Z,MAAMyB,MAAW1Z,GACf3B,QAIX,MAAMge,EAAWphB,IAEXsU,EAAO,KACX,MAAM+M,EAAS,CAAC7K,EAAKpL,KACnBhI,KAAKqd,gBAAiB,EAClBrd,KAAKmd,gBAAkBnd,KAAKke,sBAAsBle,KAAKqC,OAAOR,KAAK,yEACvE7B,KAAKmd,eAAgB,EAChBnd,KAAKkC,QAAQkb,SAASpd,KAAKqC,OAAOX,IAAI,cAAe1B,KAAKkC,SAC/DlC,KAAKwD,KAAK,cAAexD,KAAKkC,SAE9B8b,EAAS/gB,QAAQ+K,GACjBqS,EAASjH,EAAKpL,IAGhB,GAAIhI,KAAKoa,YAAcpa,KAAKmd,cAAe,OAAOc,EAAO,KAAMje,KAAKgI,EAAE0T,KAAK1b,OAC3EA,KAAKiI,eAAejI,KAAKkC,QAAQwC,IAAKuZ,IASxC,OANIje,KAAKkC,QAAQiD,YAAcnF,KAAKkC,QAAQga,UAC1ChL,IAEAuK,WAAWvK,EAAM,GAGZ8M,CACT,CAGA,aAAAG,CAAcjW,EAAUmS,EAAWqC,GACjC,IAAI0B,EAAe/D,EACnB,MAAM5P,EAAU/N,EAASwL,GAAYA,EAAWlI,KAAKkI,SAGrD,GAFwB,mBAAbA,IAAyBkW,EAAelW,IAE9ClI,KAAKkC,QAAQiD,WAAanF,KAAKkC,QAAQma,wBAAyB,CACnE,GAA+B,WAA3B5R,GAASH,iBAAgCtK,KAAKkC,QAAQia,SAA2C,IAAhCnc,KAAKkC,QAAQia,QAAQle,QAAe,OAAOmgB,IAEhH,MAAM9D,EAAS,GAET+D,EAAS3Z,IACb,IAAKA,EAAK,OACV,GAAY,WAARA,EAAkB,OACtB,MAAM8H,EAAOxM,KAAK8H,SAAS4E,cAAcI,mBAAmBpI,GAC5D8H,EAAKpJ,QAAQ4J,IACD,WAANA,GACAsN,EAAO9c,QAAQwP,GAAK,GAAGsN,EAAOzZ,KAAKmM,MAI3C,GAAKvC,EAKH4T,EAAO5T,OALK,CAEZ,MAAMgH,EAAYzR,KAAK8H,SAAS4E,cAAcC,iBAAiB3M,KAAKkC,QAAQ0K,aAC5E6E,EAAUrO,QAAQ4J,GAAKqR,EAAOrR,GAChC,CAIAhN,KAAKkC,QAAQia,SAAS/Y,UAAU4J,GAAKqR,EAAOrR,IAE5ChN,KAAK8H,SAASsF,iBAAiB8D,KAAKoJ,EAAQta,KAAKkC,QAAQ+B,GAAKvF,IACvDA,GAAMsB,KAAKse,mBAAoBte,KAAKkI,UAAUlI,KAAKue,oBAAoBve,KAAKkI,UACjFkW,EAAa1f,IAEjB,MACE0f,EAAa,KAEjB,CAEA,eAAAI,CAAgBhS,EAAMvI,EAAIoW,GACxB,MAAM2D,EAAWphB,IAgBjB,MAfoB,mBAAT4P,IACT6N,EAAW7N,EACXA,OAAO/N,GAES,mBAAPwF,IACToW,EAAWpW,EACXA,OAAKxF,GAEF+N,IAAMA,EAAOxM,KAAKoa,WAClBnW,IAAIA,EAAKjE,KAAKkC,QAAQ+B,IACtBoW,IAAUA,EAAWqC,GAC1B1c,KAAK8H,SAASsF,iBAAiBuN,OAAOnO,EAAMvI,EAAImP,IAC9C4K,EAAS/gB,UACTod,EAASjH,KAEJ4K,CACT,CAEA,GAAAS,CAAIhY,GACF,IAAKA,EAAQ,MAAM,IAAIiY,MAAM,iGAC7B,IAAKjY,EAAOhF,KAAM,MAAM,IAAIid,MAAM,4FA8BlC,MA5BoB,YAAhBjY,EAAOhF,OACTzB,KAAK4c,QAAQjD,QAAUlT,IAGL,WAAhBA,EAAOhF,MAAsBgF,EAAO/E,KAAO+E,EAAO5E,MAAQ4E,EAAO3E,SACnE9B,KAAK4c,QAAQva,OAASoE,GAGJ,qBAAhBA,EAAOhF,OACTzB,KAAK4c,QAAQkB,iBAAmBrX,GAGd,eAAhBA,EAAOhF,OACTzB,KAAK4c,QAAQ3R,WAAaxE,GAGR,kBAAhBA,EAAOhF,MACT6E,EAAcE,iBAAiBC,GAGb,cAAhBA,EAAOhF,OACTzB,KAAK4c,QAAQ7E,UAAYtR,GAGP,aAAhBA,EAAOhF,MACTzB,KAAK4c,QAAQC,SAAShc,KAAK4F,GAGtBzG,IACT,CAEA,mBAAAue,CAAoBvR,GAClB,GAAKA,GAAMhN,KAAKoa,aACZ,CAAC,SAAU,OAAO5c,QAAQwP,IAAK,GAAnC,CACA,IAAK,IAAI2R,EAAK,EAAGA,EAAK3e,KAAKoa,UAAUnc,OAAQ0gB,IAAM,CACjD,MAAMC,EAAY5e,KAAKoa,UAAUuE,GACjC,KAAI,CAAC,SAAU,OAAOnhB,QAAQohB,IAAa,IACvC5e,KAAK4Z,MAAM5T,4BAA4B4Y,GAAY,CACrD5e,KAAKse,iBAAmBM,EACxB,KACF,CACF,EACK5e,KAAKse,kBAAoBte,KAAKoa,UAAU5c,QAAQwP,GAAK,GAAKhN,KAAK4Z,MAAM5T,4BAA4BgH,KACpGhN,KAAKse,iBAAmBtR,EACxBhN,KAAKoa,UAAUyE,QAAQ7R,GAXc,CAazC,CAEA,cAAA/E,CAAevD,EAAK2V,GAClBra,KAAK8e,qBAAuBpa,EAC5B,MAAMsZ,EAAWphB,IACjBoD,KAAKwD,KAAK,mBAAoBkB,GAE9B,MAAMqa,EAAe/R,IACnBhN,KAAKkI,SAAW8E,EAChBhN,KAAKoa,UAAYpa,KAAK8H,SAAS4E,cAAcI,mBAAmBE,GAEhEhN,KAAKse,sBAAmB7f,EACxBuB,KAAKue,oBAAoBvR,IAGrBkO,EAAO,CAAC9H,EAAKpG,KACbA,EACEhN,KAAK8e,uBAAyBpa,IAChCqa,EAAY/R,GACZhN,KAAK4G,WAAWqB,eAAe+E,GAC/BhN,KAAK8e,0BAAuBrgB,EAC5BuB,KAAKwD,KAAK,kBAAmBwJ,GAC7BhN,KAAKqC,OAAOX,IAAI,kBAAmBsL,IAGrChN,KAAK8e,0BAAuBrgB,EAG9Buf,EAAS/gB,QAAQ,IAAI0E,IAAS3B,KAAKgI,KAAKrG,IACpC0Y,GAAUA,EAASjH,EAAK,IAAIzR,IAAS3B,KAAKgI,KAAKrG,KAG/Cqd,EAASxS,IAER9H,GAAQ8H,IAAQxM,KAAK8H,SAASgW,mBAAkBtR,EAAO,IAE5D,MAAMyS,EAAKviB,EAAS8P,GAAQA,EAAOA,GAAQA,EAAK,GAC1CQ,EAAIhN,KAAK4Z,MAAM5T,4BAA4BiZ,GAAMA,EAAKjf,KAAK8H,SAAS4E,cAAc0E,sBAAsB1U,EAAS8P,GAAQ,CAACA,GAAQA,GAEpIQ,IACGhN,KAAKkI,UACR6W,EAAY/R,GAEThN,KAAK4G,WAAWsB,UAAUlI,KAAK4G,WAAWqB,eAAe+E,GAE9DhN,KAAK8H,SAASgW,kBAAkBoB,oBAAoBlS,IAGtDhN,KAAKme,cAAcnR,EAAGoG,IACpB8H,EAAK9H,EAAKpG,MAgBd,OAZKtI,IAAO1E,KAAK8H,SAASgW,kBAAqB9d,KAAK8H,SAASgW,iBAAiBqB,OAElEza,GAAO1E,KAAK8H,SAASgW,kBAAoB9d,KAAK8H,SAASgW,iBAAiBqB,MAC7B,IAAjDnf,KAAK8H,SAASgW,iBAAiBsB,OAAOnhB,OACxC+B,KAAK8H,SAASgW,iBAAiBsB,SAASzD,KAAKqD,GAE7Chf,KAAK8H,SAASgW,iBAAiBsB,OAAOJ,GAGxCA,EAAOta,GARPsa,EAAOhf,KAAK8H,SAASgW,iBAAiBsB,UAWjCpB,CACT,CAEA,SAAAqB,CAAU3a,EAAKT,EAAIqb,GACjB,MAAMC,EAAS,CAAChiB,EAAK4J,KAAS+R,KAC5B,IAAI9Q,EAEFA,EADkB,iBAATjB,EACLnH,KAAKkC,QAAQ+H,iCAAiC,CAAC1M,EAAK4J,GAAMlC,OAAOiU,IAEjE,IAAK/R,GAGXiB,EAAE1D,IAAM0D,EAAE1D,KAAO6a,EAAO7a,IACxB0D,EAAEoE,KAAOpE,EAAEoE,MAAQ+S,EAAO/S,KAC1BpE,EAAEnE,GAAKmE,EAAEnE,IAAMsb,EAAOtb,GACF,KAAhBmE,EAAEkX,YAAkBlX,EAAEkX,UAAYlX,EAAEkX,WAAaA,GAAaC,EAAOD,WAEzE,MAAMve,EAAef,KAAKkC,QAAQnB,cAAgB,IAClD,IAAIye,EAUJ,OATIpX,EAAEkX,WAAa5b,MAAMiB,QAAQpH,GAC/BiiB,EAAYjiB,EAAI8L,IAAI/K,IACD,mBAANA,IAAkBA,EAAI2I,EAAiB3I,EAAG,IAAK0B,KAAKkC,WAAYiF,KACpE,GAAGiB,EAAEkX,YAAYve,IAAezC,OAGtB,mBAARf,IAAoBA,EAAM0J,EAAiB1J,EAAK,IAAKyC,KAAKkC,WAAYiF,KACjFqY,EAAYpX,EAAEkX,UAAY,GAAGlX,EAAEkX,YAAYve,IAAexD,IAAQA,GAE7DyC,KAAKgI,EAAEwX,EAAWpX,IAS3B,OAPI1L,EAASgI,GACX6a,EAAO7a,IAAMA,EAEb6a,EAAO/S,KAAO9H,EAEhB6a,EAAOtb,GAAKA,EACZsb,EAAOD,UAAYA,EACZC,CACT,CAEA,CAAAvX,IAAKrG,GACH,OAAO3B,KAAK4G,YAAYmD,aAAapI,EACvC,CAEA,MAAAwG,IAAUxG,GACR,OAAO3B,KAAK4G,YAAYuB,UAAUxG,EACpC,CAEA,mBAAA8d,CAAoBxb,GAClBjE,KAAKkC,QAAQgC,UAAYD,CAC3B,CAEA,kBAAAsL,CAAmBtL,EAAI/B,EAAU,IAC/B,IAAKlC,KAAKmd,cAER,OADAnd,KAAKqC,OAAOR,KAAK,kDAAmD7B,KAAKoa,YAClE,EAET,IAAKpa,KAAKoa,YAAcpa,KAAKoa,UAAUnc,OAErC,OADA+B,KAAKqC,OAAOR,KAAK,6DAA8D7B,KAAKoa,YAC7E,EAGT,MAAM1V,EAAMxC,EAAQwC,KAAO1E,KAAKse,kBAAoBte,KAAKoa,UAAU,GAC7DxN,IAAc5M,KAAKkC,SAAUlC,KAAKkC,QAAQ0K,YAC1C8S,EAAU1f,KAAKoa,UAAUpa,KAAKoa,UAAUnc,OAAS,GAGvD,GAA0B,WAAtByG,EAAI4F,cAA4B,OAAO,EAE3C,MAAMqV,EAAiB,CAAC3S,EAAG/G,KACzB,MAAM2Z,EAAY5f,KAAK8H,SAASsF,iBAAiB/F,MAAM,GAAG2F,KAAK/G,KAC/D,OAAqB,IAAd2Z,GAAkC,IAAdA,GAAiC,IAAdA,GAIhD,GAAI1d,EAAQ2d,SAAU,CACpB,MAAMC,EAAY5d,EAAQ2d,SAAS7f,KAAM2f,GACzC,QAAkBlhB,IAAdqhB,EAAyB,OAAOA,CACtC,CAGA,QAAI9f,KAAK6F,kBAAkBnB,EAAKT,OAG3BjE,KAAK8H,SAASsF,iBAAiBuM,WAAY3Z,KAAKkC,QAAQiD,WAAcnF,KAAKkC,QAAQma,8BAGpFsD,EAAejb,EAAKT,IAAS2I,IAAe+S,EAAeD,EAASzb,IAG1E,CAEA,cAAA8b,CAAe9b,EAAIoW,GACjB,MAAM2D,EAAWphB,IAEjB,OAAKoD,KAAKkC,QAAQ+B,IAIdvH,EAASuH,KAAKA,EAAK,CAACA,IAExBA,EAAGb,QAAQ6C,IACLjG,KAAKkC,QAAQ+B,GAAGzG,QAAQyI,GAAK,GAAGjG,KAAKkC,QAAQ+B,GAAGpD,KAAKoF,KAG3DjG,KAAKme,cAAc/K,IACjB4K,EAAS/gB,UACLod,GAAUA,EAASjH,KAGlB4K,IAdD3D,GAAUA,IACPrd,QAAQC,UAcnB,CAEA,aAAA+iB,CAAcxT,EAAM6N,GAClB,MAAM2D,EAAWphB,IAEbF,EAAS8P,KAAOA,EAAO,CAACA,IAC5B,MAAMyT,EAAYjgB,KAAKkC,QAAQia,SAAW,GAEpC+D,EAAU1T,EAAKtD,OAAOxE,GAAOub,EAAUziB,QAAQkH,GAAO,GAAK1E,KAAK8H,SAAS4E,cAAcuE,gBAAgBvM,IAE7G,OAAKwb,EAAQjiB,QAKb+B,KAAKkC,QAAQia,QAAU8D,EAAUhb,OAAOib,GACxClgB,KAAKme,cAAc/K,IACjB4K,EAAS/gB,UACLod,GAAUA,EAASjH,KAGlB4K,IAVD3D,GAAUA,IACPrd,QAAQC,UAUnB,CAEA,GAAAkjB,CAAIzb,GAEF,GADKA,IAAKA,EAAM1E,KAAKse,mBAAqBte,KAAKoa,WAAWnc,OAAS,EAAI+B,KAAKoa,UAAU,GAAKpa,KAAKkI,YAC3FxD,EAAK,MAAO,MAEjB,IACE,MAAMsI,EAAI,IAAI6D,KAAKuP,OAAO1b,GAC1B,GAAIsI,GAAKA,EAAEqT,YAAa,CACtB,MAAMC,EAAKtT,EAAEqT,cACb,GAAIC,GAAMA,EAAGC,UAAW,OAAOD,EAAGC,SACpC,CACF,CAAE,MAAO7hB,GAAsB,CAE/B,MAiEMgO,EAAgB1M,KAAK8H,UAAU4E,eAAiB,IAAIiR,EAAcJ,KACxE,OAAI7Y,EAAI4F,cAAc9M,QAAQ,SAAW,EAAU,MAlEnC,CACd,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,OAMaA,QAAQkP,EAAciE,wBAAwBjM,KAAQ,GAAMA,EAAI4F,cAAc9M,QAAQ,SAAW,EAC5G,MACA,KACN,CAEA,qBAAOgjB,CAAete,EAAU,GAAImY,GAClC,MAAMoG,EAAW,IAAI9D,EAAKza,EAASmY,GAEnC,OADAoG,EAASD,eAAiB7D,EAAK6D,eACxBC,CACT,CAEA,aAAAC,CAAcxe,EAAU,GAAImY,EAAWqC,GACrC,MAAMiE,EAAoBze,EAAQye,kBAC9BA,UAA0Bze,EAAQye,kBACtC,MAAMC,EAAgB,IAAK5gB,KAAKkC,WAAYA,EAAckb,SAAS,GAC7Dva,EAAQ,IAAI8Z,EAAKiE,QACAniB,IAAlByD,EAAQI,YAA0C7D,IAAnByD,EAAQE,SAC1CS,EAAMR,OAASQ,EAAMR,OAAOQ,MAAMX,IAUpC,GARsB,CAAC,QAAS,WAAY,YAC9BkB,QAAQgC,IACpBvC,EAAMuC,GAAKpF,KAAKoF,KAElBvC,EAAMiF,SAAW,IAAK9H,KAAK8H,UAC3BjF,EAAMiF,SAASwH,MAAQ,CACrBC,mBAAoB1M,EAAM0M,mBAAmBmM,KAAK7Y,IAEhD8d,EAAmB,CAErB,MAAME,EAAa3iB,OAAOgI,KAAKlG,KAAK4Z,MAAMna,MAAMyX,OAAO,CAAC4J,EAAM9T,KAC5D8T,EAAK9T,GAAK,IAAKhN,KAAK4Z,MAAMna,KAAKuN,IAC/B8T,EAAK9T,GAAK9O,OAAOgI,KAAK4a,EAAK9T,IAAIkK,OAAO,CAAC6J,EAAK9a,KAC1C8a,EAAI9a,GAAK,IAAK6a,EAAK9T,GAAG/G,IACf8a,GACND,EAAK9T,IACD8T,GACN,IACHje,EAAM+W,MAAQ,IAAI5V,EAAc6c,EAAYD,GAC5C/d,EAAMiF,SAASqI,cAAgBtN,EAAM+W,KACvC,CAWA,OAVA/W,EAAM+D,WAAa,IAAIiB,EAAWhF,EAAMiF,SAAU8Y,GAClD/d,EAAM+D,WAAW3D,GAAG,IAAK,CAACI,KAAU1B,KAClCkB,EAAMW,KAAKH,KAAU1B,KAEvBkB,EAAMV,KAAKye,EAAevG,GAC1BxX,EAAM+D,WAAW1E,QAAU0e,EAC3B/d,EAAM+D,WAAWwG,iBAAiBtF,SAASwH,MAAQ,CACjDC,mBAAoB1M,EAAM0M,mBAAmBmM,KAAK7Y,IAG7CA,CACT,CAEA,MAAAwD,GACE,MAAO,CACLnE,QAASlC,KAAKkC,QACd0X,MAAO5Z,KAAK4Z,MACZ1R,SAAUlI,KAAKkI,SACfkS,UAAWpa,KAAKoa,UAChBkE,iBAAkBte,KAAKse,iBAE3B,EAGF,MAAMmC,EAAW9D,EAAK6D,iBCrqBQQ,EAAQR,eAEnBQ,EAAQb,IACPa,EAAQ7e,KACC6e,EAAQ7C,cACN6C,EAAQxC,gBACpBwC,EAAQvC,IACGuC,EAAQ/Y,eACb+Y,EAAQ3B,UAChB2B,EAAQhZ,EACHgZ,EAAQ7Y,OACK6Y,EAAQvB,oBACTuB,EAAQzR,mBACZyR,EAAQjB,eACTiB,EAAQhB,cCmBrC,MAAMiB,EAAkBD,E","ignoreList":[]}